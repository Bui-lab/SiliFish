//Downloaded from https://unpkg.com/force-graph
//Bundled file: https://unpkg.com/force-graph@1.43.0/dist/force-graph.min.js
//Copyright owner: https://github.com/vasturiano
//License: https://github.com/vasturiano/force-graph/blob/master/LICENSE
// Version 1.43.0 force-graph - https://github.com/vasturiano/force-graph
!function (t, n) { "object" == typeof exports && "undefined" != typeof module ? module.exports = n() : "function" == typeof define && define.amd ? define(n) : (t = "undefined" != typeof globalThis ? globalThis : t || self).ForceGraph = n() }(this, (function () {
    "use strict"; function n(t, n) { var e = Object.keys(t); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(t); n && (r = r.filter((function (n) { return Object.getOwnPropertyDescriptor(t, n).enumerable }))), e.push.apply(e, r) } return e } function e(t) { for (var e = 1; e < arguments.length; e++) { var r = null != arguments[e] ? arguments[e] : {}; e % 2 ? n(Object(r), !0).forEach((function (n) { i(t, n, r[n]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(r)) : n(Object(r)).forEach((function (n) { Object.defineProperty(t, n, Object.getOwnPropertyDescriptor(r, n)) })) } return t } function r(t) { return r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }, r(t) } function i(t, n, e) { return (n = function (t) { var n = function (t, n) { if ("object" != typeof t || null === t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var r = e.call(t, n || "default"); if ("object" != typeof r) return r; throw new TypeError("@@toPrimitive must return a primitive value.") } return ("string" === n ? String : Number)(t) }(t, "string"); return "symbol" == typeof n ? n : String(n) }(n)) in t ? Object.defineProperty(t, n, { value: e, enumerable: !0, configurable: !0, writable: !0 }) : t[n] = e, t } function o(t, n) { return o = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, n) { return t.__proto__ = n, t }, o(t, n) } function a() { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function () { }))), !0 } catch (t) { return !1 } } function u(t, n, e) { return u = a() ? Reflect.construct.bind() : function (t, n, e) { var r = [null]; r.push.apply(r, n); var i = new (Function.bind.apply(t, r)); return e && o(i, e.prototype), i }, u.apply(null, arguments) } function s(t, n) { return function (t) { if (Array.isArray(t)) return t }(t) || function (t, n) { var e = null == t ? null : "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"]; if (null != e) { var r, i, o, a, u = [], s = !0, l = !1; try { if (o = (e = e.call(t)).next, 0 === n) { if (Object(e) !== e) return; s = !1 } else for (; !(s = (r = o.call(e)).done) && (u.push(r.value), u.length !== n); s = !0); } catch (t) { l = !0, i = t } finally { try { if (!s && null != e.return && (a = e.return(), Object(a) !== a)) return } finally { if (l) throw i } } return u } }(t, n) || c(t, n) || function () { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") }() } function l(t) { return function (t) { if (Array.isArray(t)) return h(t) }(t) || function (t) { if ("undefined" != typeof Symbol && null != t[Symbol.iterator] || null != t["@@iterator"]) return Array.from(t) }(t) || c(t) || function () { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") }() } function c(t, n) { if (t) { if ("string" == typeof t) return h(t, n); var e = Object.prototype.toString.call(t).slice(8, -1); return "Object" === e && t.constructor && (e = t.constructor.name), "Map" === e || "Set" === e ? Array.from(t) : "Arguments" === e || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e) ? h(t, n) : void 0 } } function h(t, n) { (null == n || n > t.length) && (n = t.length); for (var e = 0, r = new Array(n); e < n; e++)r[e] = t[e]; return r } !function (t, n) { void 0 === n && (n = {}); var e = n.insertAt; if (t && "undefined" != typeof document) { var r = document.head || document.getElementsByTagName("head")[0], i = document.createElement("style"); i.type = "text/css", "top" === e && r.firstChild ? r.insertBefore(i, r.firstChild) : r.appendChild(i), i.styleSheet ? i.styleSheet.cssText = t : i.appendChild(document.createTextNode(t)) } }(".force-graph-container canvas {\n  display: block;\n  user-select: none;\n  outline: none;\n  -webkit-tap-highlight-color: transparent;\n}\n\n.force-graph-container .graph-tooltip {\n  position: absolute;\n  top: 0;\n  font-family: sans-serif;\n  font-size: 16px;\n  padding: 4px;\n  border-radius: 3px;\n  color: #eee;\n  background: rgba(0,0,0,0.65);\n  visibility: hidden; /* by default */\n}\n\n.force-graph-container .clickable {\n  cursor: pointer;\n}\n\n.force-graph-container .grabbable {\n  cursor: move;\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n\n.force-graph-container .grabbable:active {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n}\n"); var f = "http://www.w3.org/1999/xhtml", d = { svg: "http://www.w3.org/2000/svg", xhtml: f, xlink: "http://www.w3.org/1999/xlink", xml: "http://www.w3.org/XML/1998/namespace", xmlns: "http://www.w3.org/2000/xmlns/" }; function p(t) { var n = t += "", e = n.indexOf(":"); return e >= 0 && "xmlns" !== (n = t.slice(0, e)) && (t = t.slice(e + 1)), d.hasOwnProperty(n) ? { space: d[n], local: t } : t } function g(t) { return function () { var n = this.ownerDocument, e = this.namespaceURI; return e === f && n.documentElement.namespaceURI === f ? n.createElement(t) : n.createElementNS(e, t) } } function y(t) { return function () { return this.ownerDocument.createElementNS(t.space, t.local) } } function v(t) { var n = p(t); return (n.local ? y : g)(n) } function _() { } function m(t) { return null == t ? _ : function () { return this.querySelector(t) } } function x(t) { return null == t ? [] : Array.isArray(t) ? t : Array.from(t) } function b() { return [] } function w(t) { return null == t ? b : function () { return this.querySelectorAll(t) } } function k(t) { return function () { return this.matches(t) } } function M(t) { return function (n) { return n.matches(t) } } var z = Array.prototype.find; function A() { return this.firstElementChild } var S = Array.prototype.filter; function C() { return Array.from(this.children) } function E(t) { return new Array(t.length) } function N(t, n) { this.ownerDocument = t.ownerDocument, this.namespaceURI = t.namespaceURI, this._next = null, this._parent = t, this.__data__ = n } function P(t) { return function () { return t } } function O(t, n, e, r, i, o) { for (var a, u = 0, s = n.length, l = o.length; u < l; ++u)(a = n[u]) ? (a.__data__ = o[u], r[u] = a) : e[u] = new N(t, o[u]); for (; u < s; ++u)(a = n[u]) && (i[u] = a) } function T(t, n, e, r, i, o, a) { var u, s, l, c = new Map, h = n.length, f = o.length, d = new Array(h); for (u = 0; u < h; ++u)(s = n[u]) && (d[u] = l = a.call(s, s.__data__, u, n) + "", c.has(l) ? i[u] = s : c.set(l, s)); for (u = 0; u < f; ++u)l = a.call(t, o[u], u, o) + "", (s = c.get(l)) ? (r[u] = s, s.__data__ = o[u], c.delete(l)) : e[u] = new N(t, o[u]); for (u = 0; u < h; ++u)(s = n[u]) && c.get(d[u]) === s && (i[u] = s) } function j(t) { return t.__data__ } function R(t) { return "object" == typeof t && "length" in t ? t : Array.from(t) } function D(t, n) { return t < n ? -1 : t > n ? 1 : t >= n ? 0 : NaN } function I(t) { return function () { this.removeAttribute(t) } } function U(t) { return function () { this.removeAttributeNS(t.space, t.local) } } function F(t, n) { return function () { this.setAttribute(t, n) } } function L(t, n) { return function () { this.setAttributeNS(t.space, t.local, n) } } function q(t, n) { return function () { var e = n.apply(this, arguments); null == e ? this.removeAttribute(t) : this.setAttribute(t, e) } } function B(t, n) { return function () { var e = n.apply(this, arguments); null == e ? this.removeAttributeNS(t.space, t.local) : this.setAttributeNS(t.space, t.local, e) } } function $(t) { return t.ownerDocument && t.ownerDocument.defaultView || t.document && t || t.defaultView } function H(t) { return function () { this.style.removeProperty(t) } } function V(t, n, e) { return function () { this.style.setProperty(t, n, e) } } function G(t, n, e) { return function () { var r = n.apply(this, arguments); null == r ? this.style.removeProperty(t) : this.style.setProperty(t, r, e) } } function X(t, n) { return t.style.getPropertyValue(n) || $(t).getComputedStyle(t, null).getPropertyValue(n) } function Y(t) { return function () { delete this[t] } } function W(t, n) { return function () { this[t] = n } } function Z(t, n) { return function () { var e = n.apply(this, arguments); null == e ? delete this[t] : this[t] = e } } function Q(t) { return t.trim().split(/^|\s+/) } function K(t) { return t.classList || new J(t) } function J(t) { this._node = t, this._names = Q(t.getAttribute("class") || "") } function tt(t, n) { for (var e = K(t), r = -1, i = n.length; ++r < i;)e.add(n[r]) } function nt(t, n) { for (var e = K(t), r = -1, i = n.length; ++r < i;)e.remove(n[r]) } function et(t) { return function () { tt(this, t) } } function rt(t) { return function () { nt(this, t) } } function it(t, n) { return function () { (n.apply(this, arguments) ? tt : nt)(this, t) } } function ot() { this.textContent = "" } function at(t) { return function () { this.textContent = t } } function ut(t) { return function () { var n = t.apply(this, arguments); this.textContent = null == n ? "" : n } } function st() { this.innerHTML = "" } function lt(t) { return function () { this.innerHTML = t } } function ct(t) { return function () { var n = t.apply(this, arguments); this.innerHTML = null == n ? "" : n } } function ht() { this.nextSibling && this.parentNode.appendChild(this) } function ft() { this.previousSibling && this.parentNode.insertBefore(this, this.parentNode.firstChild) } function dt() { return null } function pt() { var t = this.parentNode; t && t.removeChild(this) } function gt() { var t = this.cloneNode(!1), n = this.parentNode; return n ? n.insertBefore(t, this.nextSibling) : t } function yt() { var t = this.cloneNode(!0), n = this.parentNode; return n ? n.insertBefore(t, this.nextSibling) : t } function vt(t) { return t.trim().split(/^|\s+/).map((function (t) { var n = "", e = t.indexOf("."); return e >= 0 && (n = t.slice(e + 1), t = t.slice(0, e)), { type: t, name: n } })) } function _t(t) { return function () { var n = this.__on; if (n) { for (var e, r = 0, i = -1, o = n.length; r < o; ++r)e = n[r], t.type && e.type !== t.type || e.name !== t.name ? n[++i] = e : this.removeEventListener(e.type, e.listener, e.options); ++i ? n.length = i : delete this.__on } } } function mt(t, n, e) { return function () { var r, i = this.__on, o = function (t) { return function (n) { t.call(this, n, this.__data__) } }(n); if (i) for (var a = 0, u = i.length; a < u; ++a)if ((r = i[a]).type === t.type && r.name === t.name) return this.removeEventListener(r.type, r.listener, r.options), this.addEventListener(r.type, r.listener = o, r.options = e), void (r.value = n); this.addEventListener(t.type, o, e), r = { type: t.type, name: t.name, value: n, listener: o, options: e }, i ? i.push(r) : this.__on = [r] } } function xt(t, n, e) { var r = $(t), i = r.CustomEvent; "function" == typeof i ? i = new i(n, e) : (i = r.document.createEvent("Event"), e ? (i.initEvent(n, e.bubbles, e.cancelable), i.detail = e.detail) : i.initEvent(n, !1, !1)), t.dispatchEvent(i) } function bt(t, n) { return function () { return xt(this, t, n) } } function wt(t, n) { return function () { return xt(this, t, n.apply(this, arguments)) } } N.prototype = { constructor: N, appendChild: function (t) { return this._parent.insertBefore(t, this._next) }, insertBefore: function (t, n) { return this._parent.insertBefore(t, n) }, querySelector: function (t) { return this._parent.querySelector(t) }, querySelectorAll: function (t) { return this._parent.querySelectorAll(t) } }, J.prototype = { add: function (t) { this._names.indexOf(t) < 0 && (this._names.push(t), this._node.setAttribute("class", this._names.join(" "))) }, remove: function (t) { var n = this._names.indexOf(t); n >= 0 && (this._names.splice(n, 1), this._node.setAttribute("class", this._names.join(" "))) }, contains: function (t) { return this._names.indexOf(t) >= 0 } }; var kt = [null]; function Mt(t, n) { this._groups = t, this._parents = n } function zt() { return new Mt([[document.documentElement]], kt) } function At(t) { return "string" == typeof t ? new Mt([[document.querySelector(t)]], [document.documentElement]) : new Mt([[t]], kt) } function St(t, n) { if (t = function (t) { let n; for (; n = t.sourceEvent;)t = n; return t }(t), void 0 === n && (n = t.currentTarget), n) { var e = n.ownerSVGElement || n; if (e.createSVGPoint) { var r = e.createSVGPoint(); return r.x = t.clientX, r.y = t.clientY, [(r = r.matrixTransform(n.getScreenCTM().inverse())).x, r.y] } if (n.getBoundingClientRect) { var i = n.getBoundingClientRect(); return [t.clientX - i.left - n.clientLeft, t.clientY - i.top - n.clientTop] } } return [t.pageX, t.pageY] } Mt.prototype = zt.prototype = { constructor: Mt, select: function (t) { "function" != typeof t && (t = m(t)); for (var n = this._groups, e = n.length, r = new Array(e), i = 0; i < e; ++i)for (var o, a, u = n[i], s = u.length, l = r[i] = new Array(s), c = 0; c < s; ++c)(o = u[c]) && (a = t.call(o, o.__data__, c, u)) && ("__data__" in o && (a.__data__ = o.__data__), l[c] = a); return new Mt(r, this._parents) }, selectAll: function (t) { t = "function" == typeof t ? function (t) { return function () { return x(t.apply(this, arguments)) } }(t) : w(t); for (var n = this._groups, e = n.length, r = [], i = [], o = 0; o < e; ++o)for (var a, u = n[o], s = u.length, l = 0; l < s; ++l)(a = u[l]) && (r.push(t.call(a, a.__data__, l, u)), i.push(a)); return new Mt(r, i) }, selectChild: function (t) { return this.select(null == t ? A : function (t) { return function () { return z.call(this.children, t) } }("function" == typeof t ? t : M(t))) }, selectChildren: function (t) { return this.selectAll(null == t ? C : function (t) { return function () { return S.call(this.children, t) } }("function" == typeof t ? t : M(t))) }, filter: function (t) { "function" != typeof t && (t = k(t)); for (var n = this._groups, e = n.length, r = new Array(e), i = 0; i < e; ++i)for (var o, a = n[i], u = a.length, s = r[i] = [], l = 0; l < u; ++l)(o = a[l]) && t.call(o, o.__data__, l, a) && s.push(o); return new Mt(r, this._parents) }, data: function (t, n) { if (!arguments.length) return Array.from(this, j); var e = n ? T : O, r = this._parents, i = this._groups; "function" != typeof t && (t = P(t)); for (var o = i.length, a = new Array(o), u = new Array(o), s = new Array(o), l = 0; l < o; ++l) { var c = r[l], h = i[l], f = h.length, d = R(t.call(c, c && c.__data__, l, r)), p = d.length, g = u[l] = new Array(p), y = a[l] = new Array(p), v = s[l] = new Array(f); e(c, h, g, y, v, d, n); for (var _, m, x = 0, b = 0; x < p; ++x)if (_ = g[x]) { for (x >= b && (b = x + 1); !(m = y[b]) && ++b < p;); _._next = m || null } } return (a = new Mt(a, r))._enter = u, a._exit = s, a }, enter: function () { return new Mt(this._enter || this._groups.map(E), this._parents) }, exit: function () { return new Mt(this._exit || this._groups.map(E), this._parents) }, join: function (t, n, e) { var r = this.enter(), i = this, o = this.exit(); return "function" == typeof t ? (r = t(r)) && (r = r.selection()) : r = r.append(t + ""), null != n && (i = n(i)) && (i = i.selection()), null == e ? o.remove() : e(o), r && i ? r.merge(i).order() : i }, merge: function (t) { for (var n = t.selection ? t.selection() : t, e = this._groups, r = n._groups, i = e.length, o = r.length, a = Math.min(i, o), u = new Array(i), s = 0; s < a; ++s)for (var l, c = e[s], h = r[s], f = c.length, d = u[s] = new Array(f), p = 0; p < f; ++p)(l = c[p] || h[p]) && (d[p] = l); for (; s < i; ++s)u[s] = e[s]; return new Mt(u, this._parents) }, selection: function () { return this }, order: function () { for (var t = this._groups, n = -1, e = t.length; ++n < e;)for (var r, i = t[n], o = i.length - 1, a = i[o]; --o >= 0;)(r = i[o]) && (a && 4 ^ r.compareDocumentPosition(a) && a.parentNode.insertBefore(r, a), a = r); return this }, sort: function (t) { function n(n, e) { return n && e ? t(n.__data__, e.__data__) : !n - !e } t || (t = D); for (var e = this._groups, r = e.length, i = new Array(r), o = 0; o < r; ++o) { for (var a, u = e[o], s = u.length, l = i[o] = new Array(s), c = 0; c < s; ++c)(a = u[c]) && (l[c] = a); l.sort(n) } return new Mt(i, this._parents).order() }, call: function () { var t = arguments[0]; return arguments[0] = this, t.apply(null, arguments), this }, nodes: function () { return Array.from(this) }, node: function () { for (var t = this._groups, n = 0, e = t.length; n < e; ++n)for (var r = t[n], i = 0, o = r.length; i < o; ++i) { var a = r[i]; if (a) return a } return null }, size: function () { let t = 0; for (const n of this) ++t; return t }, empty: function () { return !this.node() }, each: function (t) { for (var n = this._groups, e = 0, r = n.length; e < r; ++e)for (var i, o = n[e], a = 0, u = o.length; a < u; ++a)(i = o[a]) && t.call(i, i.__data__, a, o); return this }, attr: function (t, n) { var e = p(t); if (arguments.length < 2) { var r = this.node(); return e.local ? r.getAttributeNS(e.space, e.local) : r.getAttribute(e) } return this.each((null == n ? e.local ? U : I : "function" == typeof n ? e.local ? B : q : e.local ? L : F)(e, n)) }, style: function (t, n, e) { return arguments.length > 1 ? this.each((null == n ? H : "function" == typeof n ? G : V)(t, n, null == e ? "" : e)) : X(this.node(), t) }, property: function (t, n) { return arguments.length > 1 ? this.each((null == n ? Y : "function" == typeof n ? Z : W)(t, n)) : this.node()[t] }, classed: function (t, n) { var e = Q(t + ""); if (arguments.length < 2) { for (var r = K(this.node()), i = -1, o = e.length; ++i < o;)if (!r.contains(e[i])) return !1; return !0 } return this.each(("function" == typeof n ? it : n ? et : rt)(e, n)) }, text: function (t) { return arguments.length ? this.each(null == t ? ot : ("function" == typeof t ? ut : at)(t)) : this.node().textContent }, html: function (t) { return arguments.length ? this.each(null == t ? st : ("function" == typeof t ? ct : lt)(t)) : this.node().innerHTML }, raise: function () { return this.each(ht) }, lower: function () { return this.each(ft) }, append: function (t) { var n = "function" == typeof t ? t : v(t); return this.select((function () { return this.appendChild(n.apply(this, arguments)) })) }, insert: function (t, n) { var e = "function" == typeof t ? t : v(t), r = null == n ? dt : "function" == typeof n ? n : m(n); return this.select((function () { return this.insertBefore(e.apply(this, arguments), r.apply(this, arguments) || null) })) }, remove: function () { return this.each(pt) }, clone: function (t) { return this.select(t ? yt : gt) }, datum: function (t) { return arguments.length ? this.property("__data__", t) : this.node().__data__ }, on: function (t, n, e) { var r, i, o = vt(t + ""), a = o.length; if (!(arguments.length < 2)) { for (u = n ? mt : _t, r = 0; r < a; ++r)this.each(u(o[r], n, e)); return this } var u = this.node().__on; if (u) for (var s, l = 0, c = u.length; l < c; ++l)for (r = 0, s = u[l]; r < a; ++r)if ((i = o[r]).type === s.type && i.name === s.name) return s.value }, dispatch: function (t, n) { return this.each(("function" == typeof n ? wt : bt)(t, n)) }, [Symbol.iterator]: function* () { for (var t = this._groups, n = 0, e = t.length; n < e; ++n)for (var r, i = t[n], o = 0, a = i.length; o < a; ++o)(r = i[o]) && (yield r) } }; var Ct = { value: () => { } }; function Et() { for (var t, n = 0, e = arguments.length, r = {}; n < e; ++n) { if (!(t = arguments[n] + "") || t in r || /[\s.]/.test(t)) throw new Error("illegal type: " + t); r[t] = [] } return new Nt(r) } function Nt(t) { this._ = t } function Pt(t, n) { return t.trim().split(/^|\s+/).map((function (t) { var e = "", r = t.indexOf("."); if (r >= 0 && (e = t.slice(r + 1), t = t.slice(0, r)), t && !n.hasOwnProperty(t)) throw new Error("unknown type: " + t); return { type: t, name: e } })) } function Ot(t, n) { for (var e, r = 0, i = t.length; r < i; ++r)if ((e = t[r]).name === n) return e.value } function Tt(t, n, e) { for (var r = 0, i = t.length; r < i; ++r)if (t[r].name === n) { t[r] = Ct, t = t.slice(0, r).concat(t.slice(r + 1)); break } return null != e && t.push({ name: n, value: e }), t } Nt.prototype = Et.prototype = { constructor: Nt, on: function (t, n) { var e, r = this._, i = Pt(t + "", r), o = -1, a = i.length; if (!(arguments.length < 2)) { if (null != n && "function" != typeof n) throw new Error("invalid callback: " + n); for (; ++o < a;)if (e = (t = i[o]).type) r[e] = Tt(r[e], t.name, n); else if (null == n) for (e in r) r[e] = Tt(r[e], t.name, null); return this } for (; ++o < a;)if ((e = (t = i[o]).type) && (e = Ot(r[e], t.name))) return e }, copy: function () { var t = {}, n = this._; for (var e in n) t[e] = n[e].slice(); return new Nt(t) }, call: function (t, n) { if ((e = arguments.length - 2) > 0) for (var e, r, i = new Array(e), o = 0; o < e; ++o)i[o] = arguments[o + 2]; if (!this._.hasOwnProperty(t)) throw new Error("unknown type: " + t); for (o = 0, e = (r = this._[t]).length; o < e; ++o)r[o].value.apply(n, i) }, apply: function (t, n, e) { if (!this._.hasOwnProperty(t)) throw new Error("unknown type: " + t); for (var r = this._[t], i = 0, o = r.length; i < o; ++i)r[i].value.apply(n, e) } }; const jt = { passive: !1 }, Rt = { capture: !0, passive: !1 }; function Dt(t) { t.stopImmediatePropagation() } function It(t) { t.preventDefault(), t.stopImmediatePropagation() } function Ut(t) { var n = t.document.documentElement, e = At(t).on("dragstart.drag", It, Rt); "onselectstart" in n ? e.on("selectstart.drag", It, Rt) : (n.__noselect = n.style.MozUserSelect, n.style.MozUserSelect = "none") } function Ft(t, n) { var e = t.document.documentElement, r = At(t).on("dragstart.drag", null); n && (r.on("click.drag", It, Rt), setTimeout((function () { r.on("click.drag", null) }), 0)), "onselectstart" in e ? r.on("selectstart.drag", null) : (e.style.MozUserSelect = e.__noselect, delete e.__noselect) } var Lt = t => () => t; function qt(t, { sourceEvent: n, subject: e, target: r, identifier: i, active: o, x: a, y: u, dx: s, dy: l, dispatch: c }) { Object.defineProperties(this, { type: { value: t, enumerable: !0, configurable: !0 }, sourceEvent: { value: n, enumerable: !0, configurable: !0 }, subject: { value: e, enumerable: !0, configurable: !0 }, target: { value: r, enumerable: !0, configurable: !0 }, identifier: { value: i, enumerable: !0, configurable: !0 }, active: { value: o, enumerable: !0, configurable: !0 }, x: { value: a, enumerable: !0, configurable: !0 }, y: { value: u, enumerable: !0, configurable: !0 }, dx: { value: s, enumerable: !0, configurable: !0 }, dy: { value: l, enumerable: !0, configurable: !0 }, _: { value: c } }) } function Bt(t) { return !t.ctrlKey && !t.button } function $t() { return this.parentNode } function Ht(t, n) { return null == n ? { x: t.x, y: t.y } : n } function Vt() { return navigator.maxTouchPoints || "ontouchstart" in this } function Gt(t, n, e) { t.prototype = n.prototype = e, e.constructor = t } function Xt(t, n) { var e = Object.create(t.prototype); for (var r in n) e[r] = n[r]; return e } function Yt() { } qt.prototype.on = function () { var t = this._.on.apply(this._, arguments); return t === this._ ? this : t }; var Wt = .7, Zt = 1 / Wt, Qt = "\\s*([+-]?\\d+)\\s*", Kt = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*", Jt = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*", tn = /^#([0-9a-f]{3,8})$/, nn = new RegExp(`^rgb\\(${Qt},${Qt},${Qt}\\)$`), en = new RegExp(`^rgb\\(${Jt},${Jt},${Jt}\\)$`), rn = new RegExp(`^rgba\\(${Qt},${Qt},${Qt},${Kt}\\)$`), on = new RegExp(`^rgba\\(${Jt},${Jt},${Jt},${Kt}\\)$`), an = new RegExp(`^hsl\\(${Kt},${Jt},${Jt}\\)$`), un = new RegExp(`^hsla\\(${Kt},${Jt},${Jt},${Kt}\\)$`), sn = { aliceblue: 15792383, antiquewhite: 16444375, aqua: 65535, aquamarine: 8388564, azure: 15794175, beige: 16119260, bisque: 16770244, black: 0, blanchedalmond: 16772045, blue: 255, blueviolet: 9055202, brown: 10824234, burlywood: 14596231, cadetblue: 6266528, chartreuse: 8388352, chocolate: 13789470, coral: 16744272, cornflowerblue: 6591981, cornsilk: 16775388, crimson: 14423100, cyan: 65535, darkblue: 139, darkcyan: 35723, darkgoldenrod: 12092939, darkgray: 11119017, darkgreen: 25600, darkgrey: 11119017, darkkhaki: 12433259, darkmagenta: 9109643, darkolivegreen: 5597999, darkorange: 16747520, darkorchid: 10040012, darkred: 9109504, darksalmon: 15308410, darkseagreen: 9419919, darkslateblue: 4734347, darkslategray: 3100495, darkslategrey: 3100495, darkturquoise: 52945, darkviolet: 9699539, deeppink: 16716947, deepskyblue: 49151, dimgray: 6908265, dimgrey: 6908265, dodgerblue: 2003199, firebrick: 11674146, floralwhite: 16775920, forestgreen: 2263842, fuchsia: 16711935, gainsboro: 14474460, ghostwhite: 16316671, gold: 16766720, goldenrod: 14329120, gray: 8421504, green: 32768, greenyellow: 11403055, grey: 8421504, honeydew: 15794160, hotpink: 16738740, indianred: 13458524, indigo: 4915330, ivory: 16777200, khaki: 15787660, lavender: 15132410, lavenderblush: 16773365, lawngreen: 8190976, lemonchiffon: 16775885, lightblue: 11393254, lightcoral: 15761536, lightcyan: 14745599, lightgoldenrodyellow: 16448210, lightgray: 13882323, lightgreen: 9498256, lightgrey: 13882323, lightpink: 16758465, lightsalmon: 16752762, lightseagreen: 2142890, lightskyblue: 8900346, lightslategray: 7833753, lightslategrey: 7833753, lightsteelblue: 11584734, lightyellow: 16777184, lime: 65280, limegreen: 3329330, linen: 16445670, magenta: 16711935, maroon: 8388608, mediumaquamarine: 6737322, mediumblue: 205, mediumorchid: 12211667, mediumpurple: 9662683, mediumseagreen: 3978097, mediumslateblue: 8087790, mediumspringgreen: 64154, mediumturquoise: 4772300, mediumvioletred: 13047173, midnightblue: 1644912, mintcream: 16121850, mistyrose: 16770273, moccasin: 16770229, navajowhite: 16768685, navy: 128, oldlace: 16643558, olive: 8421376, olivedrab: 7048739, orange: 16753920, orangered: 16729344, orchid: 14315734, palegoldenrod: 15657130, palegreen: 10025880, paleturquoise: 11529966, palevioletred: 14381203, papayawhip: 16773077, peachpuff: 16767673, peru: 13468991, pink: 16761035, plum: 14524637, powderblue: 11591910, purple: 8388736, rebeccapurple: 6697881, red: 16711680, rosybrown: 12357519, royalblue: 4286945, saddlebrown: 9127187, salmon: 16416882, sandybrown: 16032864, seagreen: 3050327, seashell: 16774638, sienna: 10506797, silver: 12632256, skyblue: 8900331, slateblue: 6970061, slategray: 7372944, slategrey: 7372944, snow: 16775930, springgreen: 65407, steelblue: 4620980, tan: 13808780, teal: 32896, thistle: 14204888, tomato: 16737095, turquoise: 4251856, violet: 15631086, wheat: 16113331, white: 16777215, whitesmoke: 16119285, yellow: 16776960, yellowgreen: 10145074 }; function ln() { return this.rgb().formatHex() } function cn() { return this.rgb().formatRgb() } function hn(t) { var n, e; return t = (t + "").trim().toLowerCase(), (n = tn.exec(t)) ? (e = n[1].length, n = parseInt(n[1], 16), 6 === e ? fn(n) : 3 === e ? new yn(n >> 8 & 15 | n >> 4 & 240, n >> 4 & 15 | 240 & n, (15 & n) << 4 | 15 & n, 1) : 8 === e ? dn(n >> 24 & 255, n >> 16 & 255, n >> 8 & 255, (255 & n) / 255) : 4 === e ? dn(n >> 12 & 15 | n >> 8 & 240, n >> 8 & 15 | n >> 4 & 240, n >> 4 & 15 | 240 & n, ((15 & n) << 4 | 15 & n) / 255) : null) : (n = nn.exec(t)) ? new yn(n[1], n[2], n[3], 1) : (n = en.exec(t)) ? new yn(255 * n[1] / 100, 255 * n[2] / 100, 255 * n[3] / 100, 1) : (n = rn.exec(t)) ? dn(n[1], n[2], n[3], n[4]) : (n = on.exec(t)) ? dn(255 * n[1] / 100, 255 * n[2] / 100, 255 * n[3] / 100, n[4]) : (n = an.exec(t)) ? wn(n[1], n[2] / 100, n[3] / 100, 1) : (n = un.exec(t)) ? wn(n[1], n[2] / 100, n[3] / 100, n[4]) : sn.hasOwnProperty(t) ? fn(sn[t]) : "transparent" === t ? new yn(NaN, NaN, NaN, 0) : null } function fn(t) { return new yn(t >> 16 & 255, t >> 8 & 255, 255 & t, 1) } function dn(t, n, e, r) { return r <= 0 && (t = n = e = NaN), new yn(t, n, e, r) } function pn(t) { return t instanceof Yt || (t = hn(t)), t ? new yn((t = t.rgb()).r, t.g, t.b, t.opacity) : new yn } function gn(t, n, e, r) { return 1 === arguments.length ? pn(t) : new yn(t, n, e, null == r ? 1 : r) } function yn(t, n, e, r) { this.r = +t, this.g = +n, this.b = +e, this.opacity = +r } function vn() { return `#${bn(this.r)}${bn(this.g)}${bn(this.b)}` } function _n() { const t = mn(this.opacity); return `${1 === t ? "rgb(" : "rgba("}${xn(this.r)}, ${xn(this.g)}, ${xn(this.b)}${1 === t ? ")" : `, ${t})`}` } function mn(t) { return isNaN(t) ? 1 : Math.max(0, Math.min(1, t)) } function xn(t) { return Math.max(0, Math.min(255, Math.round(t) || 0)) } function bn(t) { return ((t = xn(t)) < 16 ? "0" : "") + t.toString(16) } function wn(t, n, e, r) { return r <= 0 ? t = n = e = NaN : e <= 0 || e >= 1 ? t = n = NaN : n <= 0 && (t = NaN), new Mn(t, n, e, r) } function kn(t) { if (t instanceof Mn) return new Mn(t.h, t.s, t.l, t.opacity); if (t instanceof Yt || (t = hn(t)), !t) return new Mn; if (t instanceof Mn) return t; var n = (t = t.rgb()).r / 255, e = t.g / 255, r = t.b / 255, i = Math.min(n, e, r), o = Math.max(n, e, r), a = NaN, u = o - i, s = (o + i) / 2; return u ? (a = n === o ? (e - r) / u + 6 * (e < r) : e === o ? (r - n) / u + 2 : (n - e) / u + 4, u /= s < .5 ? o + i : 2 - o - i, a *= 60) : u = s > 0 && s < 1 ? 0 : a, new Mn(a, u, s, t.opacity) } function Mn(t, n, e, r) { this.h = +t, this.s = +n, this.l = +e, this.opacity = +r } function zn(t) { return (t = (t || 0) % 360) < 0 ? t + 360 : t } function An(t) { return Math.max(0, Math.min(1, t || 0)) } function Sn(t, n, e) { return 255 * (t < 60 ? n + (e - n) * t / 60 : t < 180 ? e : t < 240 ? n + (e - n) * (240 - t) / 60 : n) } Gt(Yt, hn, { copy(t) { return Object.assign(new this.constructor, this, t) }, displayable() { return this.rgb().displayable() }, hex: ln, formatHex: ln, formatHex8: function () { return this.rgb().formatHex8() }, formatHsl: function () { return kn(this).formatHsl() }, formatRgb: cn, toString: cn }), Gt(yn, gn, Xt(Yt, { brighter(t) { return t = null == t ? Zt : Math.pow(Zt, t), new yn(this.r * t, this.g * t, this.b * t, this.opacity) }, darker(t) { return t = null == t ? Wt : Math.pow(Wt, t), new yn(this.r * t, this.g * t, this.b * t, this.opacity) }, rgb() { return this }, clamp() { return new yn(xn(this.r), xn(this.g), xn(this.b), mn(this.opacity)) }, displayable() { return -.5 <= this.r && this.r < 255.5 && -.5 <= this.g && this.g < 255.5 && -.5 <= this.b && this.b < 255.5 && 0 <= this.opacity && this.opacity <= 1 }, hex: vn, formatHex: vn, formatHex8: function () { return `#${bn(this.r)}${bn(this.g)}${bn(this.b)}${bn(255 * (isNaN(this.opacity) ? 1 : this.opacity))}` }, formatRgb: _n, toString: _n })), Gt(Mn, (function (t, n, e, r) { return 1 === arguments.length ? kn(t) : new Mn(t, n, e, null == r ? 1 : r) }), Xt(Yt, { brighter(t) { return t = null == t ? Zt : Math.pow(Zt, t), new Mn(this.h, this.s, this.l * t, this.opacity) }, darker(t) { return t = null == t ? Wt : Math.pow(Wt, t), new Mn(this.h, this.s, this.l * t, this.opacity) }, rgb() { var t = this.h % 360 + 360 * (this.h < 0), n = isNaN(t) || isNaN(this.s) ? 0 : this.s, e = this.l, r = e + (e < .5 ? e : 1 - e) * n, i = 2 * e - r; return new yn(Sn(t >= 240 ? t - 240 : t + 120, i, r), Sn(t, i, r), Sn(t < 120 ? t + 240 : t - 120, i, r), this.opacity) }, clamp() { return new Mn(zn(this.h), An(this.s), An(this.l), mn(this.opacity)) }, displayable() { return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1 }, formatHsl() { const t = mn(this.opacity); return `${1 === t ? "hsl(" : "hsla("}${zn(this.h)}, ${100 * An(this.s)}%, ${100 * An(this.l)}%${1 === t ? ")" : `, ${t})`}` } })); var Cn = t => () => t; function En(t) { return 1 == (t = +t) ? Nn : function (n, e) { return e - n ? function (t, n, e) { return t = Math.pow(t, e), n = Math.pow(n, e) - t, e = 1 / e, function (r) { return Math.pow(t + r * n, e) } }(n, e, t) : Cn(isNaN(n) ? e : n) } } function Nn(t, n) { var e = n - t; return e ? function (t, n) { return function (e) { return t + e * n } }(t, e) : Cn(isNaN(t) ? n : t) } var Pn = function t(n) { var e = En(n); function r(t, n) { var r = e((t = gn(t)).r, (n = gn(n)).r), i = e(t.g, n.g), o = e(t.b, n.b), a = Nn(t.opacity, n.opacity); return function (n) { return t.r = r(n), t.g = i(n), t.b = o(n), t.opacity = a(n), t + "" } } return r.gamma = t, r }(1); function On(t, n) { return t = +t, n = +n, function (e) { return t * (1 - e) + n * e } } var Tn = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g, jn = new RegExp(Tn.source, "g"); function Rn(t, n) { var e, r, i, o = Tn.lastIndex = jn.lastIndex = 0, a = -1, u = [], s = []; for (t += "", n += ""; (e = Tn.exec(t)) && (r = jn.exec(n));)(i = r.index) > o && (i = n.slice(o, i), u[a] ? u[a] += i : u[++a] = i), (e = e[0]) === (r = r[0]) ? u[a] ? u[a] += r : u[++a] = r : (u[++a] = null, s.push({ i: a, x: On(e, r) })), o = jn.lastIndex; return o < n.length && (i = n.slice(o), u[a] ? u[a] += i : u[++a] = i), u.length < 2 ? s[0] ? function (t) { return function (n) { return t(n) + "" } }(s[0].x) : function (t) { return function () { return t } }(n) : (n = s.length, function (t) { for (var e, r = 0; r < n; ++r)u[(e = s[r]).i] = e.x(t); return u.join("") }) } var Dn, In = 180 / Math.PI, Un = { translateX: 0, translateY: 0, rotate: 0, skewX: 0, scaleX: 1, scaleY: 1 }; function Fn(t, n, e, r, i, o) { var a, u, s; return (a = Math.sqrt(t * t + n * n)) && (t /= a, n /= a), (s = t * e + n * r) && (e -= t * s, r -= n * s), (u = Math.sqrt(e * e + r * r)) && (e /= u, r /= u, s /= u), t * r < n * e && (t = -t, n = -n, s = -s, a = -a), { translateX: i, translateY: o, rotate: Math.atan2(n, t) * In, skewX: Math.atan(s) * In, scaleX: a, scaleY: u } } function Ln(t, n, e, r) { function i(t) { return t.length ? t.pop() + " " : "" } return function (o, a) { var u = [], s = []; return o = t(o), a = t(a), function (t, r, i, o, a, u) { if (t !== i || r !== o) { var s = a.push("translate(", null, n, null, e); u.push({ i: s - 4, x: On(t, i) }, { i: s - 2, x: On(r, o) }) } else (i || o) && a.push("translate(" + i + n + o + e) }(o.translateX, o.translateY, a.translateX, a.translateY, u, s), function (t, n, e, o) { t !== n ? (t - n > 180 ? n += 360 : n - t > 180 && (t += 360), o.push({ i: e.push(i(e) + "rotate(", null, r) - 2, x: On(t, n) })) : n && e.push(i(e) + "rotate(" + n + r) }(o.rotate, a.rotate, u, s), function (t, n, e, o) { t !== n ? o.push({ i: e.push(i(e) + "skewX(", null, r) - 2, x: On(t, n) }) : n && e.push(i(e) + "skewX(" + n + r) }(o.skewX, a.skewX, u, s), function (t, n, e, r, o, a) { if (t !== e || n !== r) { var u = o.push(i(o) + "scale(", null, ",", null, ")"); a.push({ i: u - 4, x: On(t, e) }, { i: u - 2, x: On(n, r) }) } else 1 === e && 1 === r || o.push(i(o) + "scale(" + e + "," + r + ")") }(o.scaleX, o.scaleY, a.scaleX, a.scaleY, u, s), o = a = null, function (t) { for (var n, e = -1, r = s.length; ++e < r;)u[(n = s[e]).i] = n.x(t); return u.join("") } } } var qn = Ln((function (t) { const n = new ("function" == typeof DOMMatrix ? DOMMatrix : WebKitCSSMatrix)(t + ""); return n.isIdentity ? Un : Fn(n.a, n.b, n.c, n.d, n.e, n.f) }), "px, ", "px)", "deg)"), Bn = Ln((function (t) { return null == t ? Un : (Dn || (Dn = document.createElementNS("http://www.w3.org/2000/svg", "g")), Dn.setAttribute("transform", t), (t = Dn.transform.baseVal.consolidate()) ? Fn((t = t.matrix).a, t.b, t.c, t.d, t.e, t.f) : Un) }), ", ", ")", ")"); function $n(t) { return ((t = Math.exp(t)) + 1 / t) / 2 } var Hn, Vn, Gn = function t(n, e, r) { function i(t, i) { var o, a, u = t[0], s = t[1], l = t[2], c = i[0], h = i[1], f = i[2], d = c - u, p = h - s, g = d * d + p * p; if (g < 1e-12) a = Math.log(f / l) / n, o = function (t) { return [u + t * d, s + t * p, l * Math.exp(n * t * a)] }; else { var y = Math.sqrt(g), v = (f * f - l * l + r * g) / (2 * l * e * y), _ = (f * f - l * l - r * g) / (2 * f * e * y), m = Math.log(Math.sqrt(v * v + 1) - v), x = Math.log(Math.sqrt(_ * _ + 1) - _); a = (x - m) / n, o = function (t) { var r = t * a, i = $n(m), o = l / (e * y) * (i * function (t) { return ((t = Math.exp(2 * t)) - 1) / (t + 1) }(n * r + m) - function (t) { return ((t = Math.exp(t)) - 1 / t) / 2 }(m)); return [u + o * d, s + o * p, l * i / $n(n * r + m)] } } return o.duration = 1e3 * a * n / Math.SQRT2, o } return i.rho = function (n) { var e = Math.max(.001, +n), r = e * e; return t(e, r, r * r) }, i }(Math.SQRT2, 2, 4), Xn = 0, Yn = 0, Wn = 0, Zn = 0, Qn = 0, Kn = 0, Jn = "object" == typeof performance && performance.now ? performance : Date, te = "object" == typeof window && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function (t) { setTimeout(t, 17) }; function ne() { return Qn || (te(ee), Qn = Jn.now() + Kn) } function ee() { Qn = 0 } function re() { this._call = this._time = this._next = null } function ie(t, n, e) { var r = new re; return r.restart(t, n, e), r } function oe() { Qn = (Zn = Jn.now()) + Kn, Xn = Yn = 0; try { !function () { ne(), ++Xn; for (var t, n = Hn; n;)(t = Qn - n._time) >= 0 && n._call.call(void 0, t), n = n._next; --Xn }() } finally { Xn = 0, function () { var t, n, e = Hn, r = 1 / 0; for (; e;)e._call ? (r > e._time && (r = e._time), t = e, e = e._next) : (n = e._next, e._next = null, e = t ? t._next = n : Hn = n); Vn = t, ue(r) }(), Qn = 0 } } function ae() { var t = Jn.now(), n = t - Zn; n > 1e3 && (Kn -= n, Zn = t) } function ue(t) { Xn || (Yn && (Yn = clearTimeout(Yn)), t - Qn > 24 ? (t < 1 / 0 && (Yn = setTimeout(oe, t - Jn.now() - Kn)), Wn && (Wn = clearInterval(Wn))) : (Wn || (Zn = Jn.now(), Wn = setInterval(ae, 1e3)), Xn = 1, te(oe))) } function se(t, n, e) { var r = new re; return n = null == n ? 0 : +n, r.restart((e => { r.stop(), t(e + n) }), n, e), r } re.prototype = ie.prototype = { constructor: re, restart: function (t, n, e) { if ("function" != typeof t) throw new TypeError("callback is not a function"); e = (null == e ? ne() : +e) + (null == n ? 0 : +n), this._next || Vn === this || (Vn ? Vn._next = this : Hn = this, Vn = this), this._call = t, this._time = e, ue() }, stop: function () { this._call && (this._call = null, this._time = 1 / 0, ue()) } }; var le = Et("start", "end", "cancel", "interrupt"), ce = []; function he(t, n, e, r, i, o) { var a = t.__transition; if (a) { if (e in a) return } else t.__transition = {}; !function (t, n, e) { var r, i = t.__transition; function o(t) { e.state = 1, e.timer.restart(a, e.delay, e.time), e.delay <= t && a(t - e.delay) } function a(o) { var l, c, h, f; if (1 !== e.state) return s(); for (l in i) if ((f = i[l]).name === e.name) { if (3 === f.state) return se(a); 4 === f.state ? (f.state = 6, f.timer.stop(), f.on.call("interrupt", t, t.__data__, f.index, f.group), delete i[l]) : +l < n && (f.state = 6, f.timer.stop(), f.on.call("cancel", t, t.__data__, f.index, f.group), delete i[l]) } if (se((function () { 3 === e.state && (e.state = 4, e.timer.restart(u, e.delay, e.time), u(o)) })), e.state = 2, e.on.call("start", t, t.__data__, e.index, e.group), 2 === e.state) { for (e.state = 3, r = new Array(h = e.tween.length), l = 0, c = -1; l < h; ++l)(f = e.tween[l].value.call(t, t.__data__, e.index, e.group)) && (r[++c] = f); r.length = c + 1 } } function u(n) { for (var i = n < e.duration ? e.ease.call(null, n / e.duration) : (e.timer.restart(s), e.state = 5, 1), o = -1, a = r.length; ++o < a;)r[o].call(t, i); 5 === e.state && (e.on.call("end", t, t.__data__, e.index, e.group), s()) } function s() { for (var r in e.state = 6, e.timer.stop(), delete i[n], i) return; delete t.__transition } i[n] = e, e.timer = ie(o, 0, e.time) }(t, e, { name: n, index: r, group: i, on: le, tween: ce, time: o.time, delay: o.delay, duration: o.duration, ease: o.ease, timer: null, state: 0 }) } function fe(t, n) { var e = pe(t, n); if (e.state > 0) throw new Error("too late; already scheduled"); return e } function de(t, n) { var e = pe(t, n); if (e.state > 3) throw new Error("too late; already running"); return e } function pe(t, n) { var e = t.__transition; if (!e || !(e = e[n])) throw new Error("transition not found"); return e } function ge(t, n) { var e, r, i, o = t.__transition, a = !0; if (o) { for (i in n = null == n ? null : n + "", o) (e = o[i]).name === n ? (r = e.state > 2 && e.state < 5, e.state = 6, e.timer.stop(), e.on.call(r ? "interrupt" : "cancel", t, t.__data__, e.index, e.group), delete o[i]) : a = !1; a && delete t.__transition } } function ye(t, n) { var e, r; return function () { var i = de(this, t), o = i.tween; if (o !== e) for (var a = 0, u = (r = e = o).length; a < u; ++a)if (r[a].name === n) { (r = r.slice()).splice(a, 1); break } i.tween = r } } function ve(t, n, e) { var r, i; if ("function" != typeof e) throw new Error; return function () { var o = de(this, t), a = o.tween; if (a !== r) { i = (r = a).slice(); for (var u = { name: n, value: e }, s = 0, l = i.length; s < l; ++s)if (i[s].name === n) { i[s] = u; break } s === l && i.push(u) } o.tween = i } } function _e(t, n, e) { var r = t._id; return t.each((function () { var t = de(this, r); (t.value || (t.value = {}))[n] = e.apply(this, arguments) })), function (t) { return pe(t, r).value[n] } } function me(t, n) { var e; return ("number" == typeof n ? On : n instanceof hn ? Pn : (e = hn(n)) ? (n = e, Pn) : Rn)(t, n) } function xe(t) { return function () { this.removeAttribute(t) } } function be(t) { return function () { this.removeAttributeNS(t.space, t.local) } } function we(t, n, e) { var r, i, o = e + ""; return function () { var a = this.getAttribute(t); return a === o ? null : a === r ? i : i = n(r = a, e) } } function ke(t, n, e) { var r, i, o = e + ""; return function () { var a = this.getAttributeNS(t.space, t.local); return a === o ? null : a === r ? i : i = n(r = a, e) } } function Me(t, n, e) { var r, i, o; return function () { var a, u, s = e(this); if (null != s) return (a = this.getAttribute(t)) === (u = s + "") ? null : a === r && u === i ? o : (i = u, o = n(r = a, s)); this.removeAttribute(t) } } function ze(t, n, e) { var r, i, o; return function () { var a, u, s = e(this); if (null != s) return (a = this.getAttributeNS(t.space, t.local)) === (u = s + "") ? null : a === r && u === i ? o : (i = u, o = n(r = a, s)); this.removeAttributeNS(t.space, t.local) } } function Ae(t, n) { return function (e) { this.setAttribute(t, n.call(this, e)) } } function Se(t, n) { return function (e) { this.setAttributeNS(t.space, t.local, n.call(this, e)) } } function Ce(t, n) { var e, r; function i() { var i = n.apply(this, arguments); return i !== r && (e = (r = i) && Se(t, i)), e } return i._value = n, i } function Ee(t, n) { var e, r; function i() { var i = n.apply(this, arguments); return i !== r && (e = (r = i) && Ae(t, i)), e } return i._value = n, i } function Ne(t, n) { return function () { fe(this, t).delay = +n.apply(this, arguments) } } function Pe(t, n) { return n = +n, function () { fe(this, t).delay = n } } function Oe(t, n) { return function () { de(this, t).duration = +n.apply(this, arguments) } } function Te(t, n) { return n = +n, function () { de(this, t).duration = n } } function je(t, n) { if ("function" != typeof n) throw new Error; return function () { de(this, t).ease = n } } function Re(t, n, e) { var r, i, o = function (t) { return (t + "").trim().split(/^|\s+/).every((function (t) { var n = t.indexOf("."); return n >= 0 && (t = t.slice(0, n)), !t || "start" === t })) }(n) ? fe : de; return function () { var a = o(this, t), u = a.on; u !== r && (i = (r = u).copy()).on(n, e), a.on = i } } var De = zt.prototype.constructor; function Ie(t) { return function () { this.style.removeProperty(t) } } function Ue(t, n, e) { return function (r) { this.style.setProperty(t, n.call(this, r), e) } } function Fe(t, n, e) { var r, i; function o() { var o = n.apply(this, arguments); return o !== i && (r = (i = o) && Ue(t, o, e)), r } return o._value = n, o } function Le(t) { return function (n) { this.textContent = t.call(this, n) } } function qe(t) { var n, e; function r() { var r = t.apply(this, arguments); return r !== e && (n = (e = r) && Le(r)), n } return r._value = t, r } var Be = 0; function $e(t, n, e, r) { this._groups = t, this._parents = n, this._name = e, this._id = r } function He() { return ++Be } var Ve = zt.prototype; $e.prototype = { constructor: $e, select: function (t) { var n = this._name, e = this._id; "function" != typeof t && (t = m(t)); for (var r = this._groups, i = r.length, o = new Array(i), a = 0; a < i; ++a)for (var u, s, l = r[a], c = l.length, h = o[a] = new Array(c), f = 0; f < c; ++f)(u = l[f]) && (s = t.call(u, u.__data__, f, l)) && ("__data__" in u && (s.__data__ = u.__data__), h[f] = s, he(h[f], n, e, f, h, pe(u, e))); return new $e(o, this._parents, n, e) }, selectAll: function (t) { var n = this._name, e = this._id; "function" != typeof t && (t = w(t)); for (var r = this._groups, i = r.length, o = [], a = [], u = 0; u < i; ++u)for (var s, l = r[u], c = l.length, h = 0; h < c; ++h)if (s = l[h]) { for (var f, d = t.call(s, s.__data__, h, l), p = pe(s, e), g = 0, y = d.length; g < y; ++g)(f = d[g]) && he(f, n, e, g, d, p); o.push(d), a.push(s) } return new $e(o, a, n, e) }, selectChild: Ve.selectChild, selectChildren: Ve.selectChildren, filter: function (t) { "function" != typeof t && (t = k(t)); for (var n = this._groups, e = n.length, r = new Array(e), i = 0; i < e; ++i)for (var o, a = n[i], u = a.length, s = r[i] = [], l = 0; l < u; ++l)(o = a[l]) && t.call(o, o.__data__, l, a) && s.push(o); return new $e(r, this._parents, this._name, this._id) }, merge: function (t) { if (t._id !== this._id) throw new Error; for (var n = this._groups, e = t._groups, r = n.length, i = e.length, o = Math.min(r, i), a = new Array(r), u = 0; u < o; ++u)for (var s, l = n[u], c = e[u], h = l.length, f = a[u] = new Array(h), d = 0; d < h; ++d)(s = l[d] || c[d]) && (f[d] = s); for (; u < r; ++u)a[u] = n[u]; return new $e(a, this._parents, this._name, this._id) }, selection: function () { return new De(this._groups, this._parents) }, transition: function () { for (var t = this._name, n = this._id, e = He(), r = this._groups, i = r.length, o = 0; o < i; ++o)for (var a, u = r[o], s = u.length, l = 0; l < s; ++l)if (a = u[l]) { var c = pe(a, n); he(a, t, e, l, u, { time: c.time + c.delay + c.duration, delay: 0, duration: c.duration, ease: c.ease }) } return new $e(r, this._parents, t, e) }, call: Ve.call, nodes: Ve.nodes, node: Ve.node, size: Ve.size, empty: Ve.empty, each: Ve.each, on: function (t, n) { var e = this._id; return arguments.length < 2 ? pe(this.node(), e).on.on(t) : this.each(Re(e, t, n)) }, attr: function (t, n) { var e = p(t), r = "transform" === e ? Bn : me; return this.attrTween(t, "function" == typeof n ? (e.local ? ze : Me)(e, r, _e(this, "attr." + t, n)) : null == n ? (e.local ? be : xe)(e) : (e.local ? ke : we)(e, r, n)) }, attrTween: function (t, n) { var e = "attr." + t; if (arguments.length < 2) return (e = this.tween(e)) && e._value; if (null == n) return this.tween(e, null); if ("function" != typeof n) throw new Error; var r = p(t); return this.tween(e, (r.local ? Ce : Ee)(r, n)) }, style: function (t, n, e) { var r = "transform" == (t += "") ? qn : me; return null == n ? this.styleTween(t, function (t, n) { var e, r, i; return function () { var o = X(this, t), a = (this.style.removeProperty(t), X(this, t)); return o === a ? null : o === e && a === r ? i : i = n(e = o, r = a) } }(t, r)).on("end.style." + t, Ie(t)) : "function" == typeof n ? this.styleTween(t, function (t, n, e) { var r, i, o; return function () { var a = X(this, t), u = e(this), s = u + ""; return null == u && (this.style.removeProperty(t), s = u = X(this, t)), a === s ? null : a === r && s === i ? o : (i = s, o = n(r = a, u)) } }(t, r, _e(this, "style." + t, n))).each(function (t, n) { var e, r, i, o, a = "style." + n, u = "end." + a; return function () { var s = de(this, t), l = s.on, c = null == s.value[a] ? o || (o = Ie(n)) : void 0; l === e && i === c || (r = (e = l).copy()).on(u, i = c), s.on = r } }(this._id, t)) : this.styleTween(t, function (t, n, e) { var r, i, o = e + ""; return function () { var a = X(this, t); return a === o ? null : a === r ? i : i = n(r = a, e) } }(t, r, n), e).on("end.style." + t, null) }, styleTween: function (t, n, e) { var r = "style." + (t += ""); if (arguments.length < 2) return (r = this.tween(r)) && r._value; if (null == n) return this.tween(r, null); if ("function" != typeof n) throw new Error; return this.tween(r, Fe(t, n, null == e ? "" : e)) }, text: function (t) { return this.tween("text", "function" == typeof t ? function (t) { return function () { var n = t(this); this.textContent = null == n ? "" : n } }(_e(this, "text", t)) : function (t) { return function () { this.textContent = t } }(null == t ? "" : t + "")) }, textTween: function (t) { var n = "text"; if (arguments.length < 1) return (n = this.tween(n)) && n._value; if (null == t) return this.tween(n, null); if ("function" != typeof t) throw new Error; return this.tween(n, qe(t)) }, remove: function () { return this.on("end.remove", function (t) { return function () { var n = this.parentNode; for (var e in this.__transition) if (+e !== t) return; n && n.removeChild(this) } }(this._id)) }, tween: function (t, n) { var e = this._id; if (t += "", arguments.length < 2) { for (var r, i = pe(this.node(), e).tween, o = 0, a = i.length; o < a; ++o)if ((r = i[o]).name === t) return r.value; return null } return this.each((null == n ? ye : ve)(e, t, n)) }, delay: function (t) { var n = this._id; return arguments.length ? this.each(("function" == typeof t ? Ne : Pe)(n, t)) : pe(this.node(), n).delay }, duration: function (t) { var n = this._id; return arguments.length ? this.each(("function" == typeof t ? Oe : Te)(n, t)) : pe(this.node(), n).duration }, ease: function (t) { var n = this._id; return arguments.length ? this.each(je(n, t)) : pe(this.node(), n).ease }, easeVarying: function (t) { if ("function" != typeof t) throw new Error; return this.each(function (t, n) { return function () { var e = n.apply(this, arguments); if ("function" != typeof e) throw new Error; de(this, t).ease = e } }(this._id, t)) }, end: function () { var t, n, e = this, r = e._id, i = e.size(); return new Promise((function (o, a) { var u = { value: a }, s = { value: function () { 0 == --i && o() } }; e.each((function () { var e = de(this, r), i = e.on; i !== t && ((n = (t = i).copy())._.cancel.push(u), n._.interrupt.push(u), n._.end.push(s)), e.on = n })), 0 === i && o() })) }, [Symbol.iterator]: Ve[Symbol.iterator] }; var Ge = { time: null, delay: 0, duration: 250, ease: function (t) { return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2 } }; function Xe(t, n) { for (var e; !(e = t.__transition) || !(e = e[n]);)if (!(t = t.parentNode)) throw new Error(`transition ${n} not found`); return e } zt.prototype.interrupt = function (t) { return this.each((function () { ge(this, t) })) }, zt.prototype.transition = function (t) { var n, e; t instanceof $e ? (n = t._id, t = t._name) : (n = He(), (e = Ge).time = ne(), t = null == t ? null : t + ""); for (var r = this._groups, i = r.length, o = 0; o < i; ++o)for (var a, u = r[o], s = u.length, l = 0; l < s; ++l)(a = u[l]) && he(a, t, n, l, u, e || Xe(a, n)); return new $e(r, this._parents, t, n) }; var Ye = t => () => t; function We(t, { sourceEvent: n, target: e, transform: r, dispatch: i }) { Object.defineProperties(this, { type: { value: t, enumerable: !0, configurable: !0 }, sourceEvent: { value: n, enumerable: !0, configurable: !0 }, target: { value: e, enumerable: !0, configurable: !0 }, transform: { value: r, enumerable: !0, configurable: !0 }, _: { value: i } }) } function Ze(t, n, e) { this.k = t, this.x = n, this.y = e } Ze.prototype = { constructor: Ze, scale: function (t) { return 1 === t ? this : new Ze(this.k * t, this.x, this.y) }, translate: function (t, n) { return 0 === t & 0 === n ? this : new Ze(this.k, this.x + this.k * t, this.y + this.k * n) }, apply: function (t) { return [t[0] * this.k + this.x, t[1] * this.k + this.y] }, applyX: function (t) { return t * this.k + this.x }, applyY: function (t) { return t * this.k + this.y }, invert: function (t) { return [(t[0] - this.x) / this.k, (t[1] - this.y) / this.k] }, invertX: function (t) { return (t - this.x) / this.k }, invertY: function (t) { return (t - this.y) / this.k }, rescaleX: function (t) { return t.copy().domain(t.range().map(this.invertX, this).map(t.invert, t)) }, rescaleY: function (t) { return t.copy().domain(t.range().map(this.invertY, this).map(t.invert, t)) }, toString: function () { return "translate(" + this.x + "," + this.y + ") scale(" + this.k + ")" } }; var Qe = new Ze(1, 0, 0); function Ke(t) { for (; !t.__zoom;)if (!(t = t.parentNode)) return Qe; return t.__zoom } function Je(t) { t.stopImmediatePropagation() } function tr(t) { t.preventDefault(), t.stopImmediatePropagation() } function nr(t) { return !(t.ctrlKey && "wheel" !== t.type || t.button) } function er() { var t = this; return t instanceof SVGElement ? (t = t.ownerSVGElement || t).hasAttribute("viewBox") ? [[(t = t.viewBox.baseVal).x, t.y], [t.x + t.width, t.y + t.height]] : [[0, 0], [t.width.baseVal.value, t.height.baseVal.value]] : [[0, 0], [t.clientWidth, t.clientHeight]] } function rr() { return this.__zoom || Qe } function ir(t) { return -t.deltaY * (1 === t.deltaMode ? .05 : t.deltaMode ? 1 : .002) * (t.ctrlKey ? 10 : 1) } function or() { return navigator.maxTouchPoints || "ontouchstart" in this } function ar(t, n, e) { var r = t.invertX(n[0][0]) - e[0][0], i = t.invertX(n[1][0]) - e[1][0], o = t.invertY(n[0][1]) - e[0][1], a = t.invertY(n[1][1]) - e[1][1]; return t.translate(i > r ? (r + i) / 2 : Math.min(0, r) || Math.max(0, i), a > o ? (o + a) / 2 : Math.min(0, o) || Math.max(0, a)) } function ur() { var t, n, e, r = nr, i = er, o = ar, a = ir, u = or, s = [0, 1 / 0], l = [[-1 / 0, -1 / 0], [1 / 0, 1 / 0]], c = 250, h = Gn, f = Et("start", "zoom", "end"), d = 500, p = 0, g = 10; function y(t) { t.property("__zoom", rr).on("wheel.zoom", k, { passive: !1 }).on("mousedown.zoom", M).on("dblclick.zoom", z).filter(u).on("touchstart.zoom", A).on("touchmove.zoom", S).on("touchend.zoom touchcancel.zoom", C).style("-webkit-tap-highlight-color", "rgba(0,0,0,0)") } function v(t, n) { return (n = Math.max(s[0], Math.min(s[1], n))) === t.k ? t : new Ze(n, t.x, t.y) } function _(t, n, e) { var r = n[0] - e[0] * t.k, i = n[1] - e[1] * t.k; return r === t.x && i === t.y ? t : new Ze(t.k, r, i) } function m(t) { return [(+t[0][0] + +t[1][0]) / 2, (+t[0][1] + +t[1][1]) / 2] } function x(t, n, e, r) { t.on("start.zoom", (function () { b(this, arguments).event(r).start() })).on("interrupt.zoom end.zoom", (function () { b(this, arguments).event(r).end() })).tween("zoom", (function () { var t = this, o = arguments, a = b(t, o).event(r), u = i.apply(t, o), s = null == e ? m(u) : "function" == typeof e ? e.apply(t, o) : e, l = Math.max(u[1][0] - u[0][0], u[1][1] - u[0][1]), c = t.__zoom, f = "function" == typeof n ? n.apply(t, o) : n, d = h(c.invert(s).concat(l / c.k), f.invert(s).concat(l / f.k)); return function (t) { if (1 === t) t = f; else { var n = d(t), e = l / n[2]; t = new Ze(e, s[0] - n[0] * e, s[1] - n[1] * e) } a.zoom(null, t) } })) } function b(t, n, e) { return !e && t.__zooming || new w(t, n) } function w(t, n) { this.that = t, this.args = n, this.active = 0, this.sourceEvent = null, this.extent = i.apply(t, n), this.taps = 0 } function k(t, ...n) { if (r.apply(this, arguments)) { var e = b(this, n).event(t), i = this.__zoom, u = Math.max(s[0], Math.min(s[1], i.k * Math.pow(2, a.apply(this, arguments)))), c = St(t); if (e.wheel) e.mouse[0][0] === c[0] && e.mouse[0][1] === c[1] || (e.mouse[1] = i.invert(e.mouse[0] = c)), clearTimeout(e.wheel); else { if (i.k === u) return; e.mouse = [c, i.invert(c)], ge(this), e.start() } tr(t), e.wheel = setTimeout(h, 150), e.zoom("mouse", o(_(v(i, u), e.mouse[0], e.mouse[1]), e.extent, l)) } function h() { e.wheel = null, e.end() } } function M(t, ...n) { if (!e && r.apply(this, arguments)) { var i = t.currentTarget, a = b(this, n, !0).event(t), u = At(t.view).on("mousemove.zoom", f, !0).on("mouseup.zoom", d, !0), s = St(t, i), c = t.clientX, h = t.clientY; Ut(t.view), Je(t), a.mouse = [s, this.__zoom.invert(s)], ge(this), a.start() } function f(t) { if (tr(t), !a.moved) { var n = t.clientX - c, e = t.clientY - h; a.moved = n * n + e * e > p } a.event(t).zoom("mouse", o(_(a.that.__zoom, a.mouse[0] = St(t, i), a.mouse[1]), a.extent, l)) } function d(t) { u.on("mousemove.zoom mouseup.zoom", null), Ft(t.view, a.moved), tr(t), a.event(t).end() } } function z(t, ...n) { if (r.apply(this, arguments)) { var e = this.__zoom, a = St(t.changedTouches ? t.changedTouches[0] : t, this), u = e.invert(a), s = e.k * (t.shiftKey ? .5 : 2), h = o(_(v(e, s), a, u), i.apply(this, n), l); tr(t), c > 0 ? At(this).transition().duration(c).call(x, h, a, t) : At(this).call(y.transform, h, a, t) } } function A(e, ...i) { if (r.apply(this, arguments)) { var o, a, u, s, l = e.touches, c = l.length, h = b(this, i, e.changedTouches.length === c).event(e); for (Je(e), a = 0; a < c; ++a)s = [s = St(u = l[a], this), this.__zoom.invert(s), u.identifier], h.touch0 ? h.touch1 || h.touch0[2] === s[2] || (h.touch1 = s, h.taps = 0) : (h.touch0 = s, o = !0, h.taps = 1 + !!t); t && (t = clearTimeout(t)), o && (h.taps < 2 && (n = s[0], t = setTimeout((function () { t = null }), d)), ge(this), h.start()) } } function S(t, ...n) { if (this.__zooming) { var e, r, i, a, u = b(this, n).event(t), s = t.changedTouches, c = s.length; for (tr(t), e = 0; e < c; ++e)i = St(r = s[e], this), u.touch0 && u.touch0[2] === r.identifier ? u.touch0[0] = i : u.touch1 && u.touch1[2] === r.identifier && (u.touch1[0] = i); if (r = u.that.__zoom, u.touch1) { var h = u.touch0[0], f = u.touch0[1], d = u.touch1[0], p = u.touch1[1], g = (g = d[0] - h[0]) * g + (g = d[1] - h[1]) * g, y = (y = p[0] - f[0]) * y + (y = p[1] - f[1]) * y; r = v(r, Math.sqrt(g / y)), i = [(h[0] + d[0]) / 2, (h[1] + d[1]) / 2], a = [(f[0] + p[0]) / 2, (f[1] + p[1]) / 2] } else { if (!u.touch0) return; i = u.touch0[0], a = u.touch0[1] } u.zoom("touch", o(_(r, i, a), u.extent, l)) } } function C(t, ...r) { if (this.__zooming) { var i, o, a = b(this, r).event(t), u = t.changedTouches, s = u.length; for (Je(t), e && clearTimeout(e), e = setTimeout((function () { e = null }), d), i = 0; i < s; ++i)o = u[i], a.touch0 && a.touch0[2] === o.identifier ? delete a.touch0 : a.touch1 && a.touch1[2] === o.identifier && delete a.touch1; if (a.touch1 && !a.touch0 && (a.touch0 = a.touch1, delete a.touch1), a.touch0) a.touch0[1] = this.__zoom.invert(a.touch0[0]); else if (a.end(), 2 === a.taps && (o = St(o, this), Math.hypot(n[0] - o[0], n[1] - o[1]) < g)) { var l = At(this).on("dblclick.zoom"); l && l.apply(this, arguments) } } } return y.transform = function (t, n, e, r) { var i = t.selection ? t.selection() : t; i.property("__zoom", rr), t !== i ? x(t, n, e, r) : i.interrupt().each((function () { b(this, arguments).event(r).start().zoom(null, "function" == typeof n ? n.apply(this, arguments) : n).end() })) }, y.scaleBy = function (t, n, e, r) { y.scaleTo(t, (function () { var t = this.__zoom.k, e = "function" == typeof n ? n.apply(this, arguments) : n; return t * e }), e, r) }, y.scaleTo = function (t, n, e, r) { y.transform(t, (function () { var t = i.apply(this, arguments), r = this.__zoom, a = null == e ? m(t) : "function" == typeof e ? e.apply(this, arguments) : e, u = r.invert(a), s = "function" == typeof n ? n.apply(this, arguments) : n; return o(_(v(r, s), a, u), t, l) }), e, r) }, y.translateBy = function (t, n, e, r) { y.transform(t, (function () { return o(this.__zoom.translate("function" == typeof n ? n.apply(this, arguments) : n, "function" == typeof e ? e.apply(this, arguments) : e), i.apply(this, arguments), l) }), null, r) }, y.translateTo = function (t, n, e, r, a) { y.transform(t, (function () { var t = i.apply(this, arguments), a = this.__zoom, u = null == r ? m(t) : "function" == typeof r ? r.apply(this, arguments) : r; return o(Qe.translate(u[0], u[1]).scale(a.k).translate("function" == typeof n ? -n.apply(this, arguments) : -n, "function" == typeof e ? -e.apply(this, arguments) : -e), t, l) }), r, a) }, w.prototype = { event: function (t) { return t && (this.sourceEvent = t), this }, start: function () { return 1 == ++this.active && (this.that.__zooming = this, this.emit("start")), this }, zoom: function (t, n) { return this.mouse && "mouse" !== t && (this.mouse[1] = n.invert(this.mouse[0])), this.touch0 && "touch" !== t && (this.touch0[1] = n.invert(this.touch0[0])), this.touch1 && "touch" !== t && (this.touch1[1] = n.invert(this.touch1[0])), this.that.__zoom = n, this.emit("zoom"), this }, end: function () { return 0 == --this.active && (delete this.that.__zooming, this.emit("end")), this }, emit: function (t) { var n = At(this.that).datum(); f.call(t, this.that, new We(t, { sourceEvent: this.sourceEvent, target: y, type: t, transform: this.that.__zoom, dispatch: f }), n) } }, y.wheelDelta = function (t) { return arguments.length ? (a = "function" == typeof t ? t : Ye(+t), y) : a }, y.filter = function (t) { return arguments.length ? (r = "function" == typeof t ? t : Ye(!!t), y) : r }, y.touchable = function (t) { return arguments.length ? (u = "function" == typeof t ? t : Ye(!!t), y) : u }, y.extent = function (t) { return arguments.length ? (i = "function" == typeof t ? t : Ye([[+t[0][0], +t[0][1]], [+t[1][0], +t[1][1]]]), y) : i }, y.scaleExtent = function (t) { return arguments.length ? (s[0] = +t[0], s[1] = +t[1], y) : [s[0], s[1]] }, y.translateExtent = function (t) { return arguments.length ? (l[0][0] = +t[0][0], l[1][0] = +t[1][0], l[0][1] = +t[0][1], l[1][1] = +t[1][1], y) : [[l[0][0], l[0][1]], [l[1][0], l[1][1]]] }, y.constrain = function (t) { return arguments.length ? (o = t, y) : o }, y.duration = function (t) { return arguments.length ? (c = +t, y) : c }, y.interpolate = function (t) { return arguments.length ? (h = t, y) : h }, y.on = function () { var t = f.on.apply(f, arguments); return t === f ? y : t }, y.clickDistance = function (t) { return arguments.length ? (p = (t = +t) * t, y) : Math.sqrt(p) }, y.tapDistance = function (t) { return arguments.length ? (g = +t, y) : g }, y } Ke.prototype = Ze.prototype; class sr extends Map { constructor(t, n = cr) { if (super(), Object.defineProperties(this, { _intern: { value: new Map }, _key: { value: n } }), null != t) for (const [n, e] of t) this.set(n, e) } get(t) { return super.get(lr(this, t)) } has(t) { return super.has(lr(this, t)) } set(t, n) { return super.set(function ({ _intern: t, _key: n }, e) { const r = n(e); return t.has(r) ? t.get(r) : (t.set(r, e), e) }(this, t), n) } delete(t) { return super.delete(function ({ _intern: t, _key: n }, e) { const r = n(e); t.has(r) && (e = t.get(r), t.delete(r)); return e }(this, t)) } } function lr({ _intern: t, _key: n }, e) { const r = n(e); return t.has(r) ? t.get(r) : e } function cr(t) { return null !== t && "object" == typeof t ? t.valueOf() : t } function hr(t, n) { let e; if (void 0 === n) for (const n of t) null != n && (e < n || void 0 === e && n >= n) && (e = n); else { let r = -1; for (let i of t) null != (i = n(i, ++r, t)) && (e < i || void 0 === e && i >= i) && (e = i) } return e } function fr(t, n) { let e; if (void 0 === n) for (const n of t) null != n && (e > n || void 0 === e && n >= n) && (e = n); else { let r = -1; for (let i of t) null != (i = n(i, ++r, t)) && (e > i || void 0 === e && i >= i) && (e = i) } return e } var dr = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {}, pr = "Expected a function", gr = /^\s+|\s+$/g, yr = /^[-+]0x[0-9a-f]+$/i, vr = /^0b[01]+$/i, _r = /^0o[0-7]+$/i, mr = parseInt, xr = "object" == typeof dr && dr && dr.Object === Object && dr, br = "object" == typeof self && self && self.Object === Object && self, wr = xr || br || Function("return this")(), kr = Object.prototype.toString, Mr = Math.max, zr = Math.min, Ar = function () { return wr.Date.now() }; function Sr(t, n, e) { var r, i, o, a, u, s, l = 0, c = !1, h = !1, f = !0; if ("function" != typeof t) throw new TypeError(pr); function d(n) { var e = r, o = i; return r = i = void 0, l = n, a = t.apply(o, e) } function p(t) { return l = t, u = setTimeout(y, n), c ? d(t) : a } function g(t) { var e = t - s; return void 0 === s || e >= n || e < 0 || h && t - l >= o } function y() { var t = Ar(); if (g(t)) return v(t); u = setTimeout(y, function (t) { var e = n - (t - s); return h ? zr(e, o - (t - l)) : e }(t)) } function v(t) { return u = void 0, f && r ? d(t) : (r = i = void 0, a) } function _() { var t = Ar(), e = g(t); if (r = arguments, i = this, s = t, e) { if (void 0 === u) return p(s); if (h) return u = setTimeout(y, n), d(s) } return void 0 === u && (u = setTimeout(y, n)), a } return n = Er(n) || 0, Cr(e) && (c = !!e.leading, o = (h = "maxWait" in e) ? Mr(Er(e.maxWait) || 0, n) : o, f = "trailing" in e ? !!e.trailing : f), _.cancel = function () { void 0 !== u && clearTimeout(u), l = 0, r = s = i = u = void 0 }, _.flush = function () { return void 0 === u ? a : v(Ar()) }, _ } function Cr(t) { var n = typeof t; return !!t && ("object" == n || "function" == n) } function Er(t) { if ("number" == typeof t) return t; if (function (t) { return "symbol" == typeof t || function (t) { return !!t && "object" == typeof t }(t) && "[object Symbol]" == kr.call(t) }(t)) return NaN; if (Cr(t)) { var n = "function" == typeof t.valueOf ? t.valueOf() : t; t = Cr(n) ? n + "" : n } if ("string" != typeof t) return 0 === t ? t : +t; t = t.replace(gr, ""); var e = vr.test(t); return e || _r.test(t) ? mr(t.slice(2), e ? 2 : 8) : yr.test(t) ? NaN : +t } var Nr = function (t, n, e) { var r = !0, i = !0; if ("function" != typeof t) throw new TypeError(pr); return Cr(e) && (r = "leading" in e ? !!e.leading : r, i = "trailing" in e ? !!e.trailing : i), Sr(t, n, { leading: r, maxWait: n, trailing: i }) }, Pr = { Linear: { None: function (t) { return t } }, Quadratic: { In: function (t) { return t * t }, Out: function (t) { return t * (2 - t) }, InOut: function (t) { return (t *= 2) < 1 ? .5 * t * t : -.5 * (--t * (t - 2) - 1) } }, Cubic: { In: function (t) { return t * t * t }, Out: function (t) { return --t * t * t + 1 }, InOut: function (t) { return (t *= 2) < 1 ? .5 * t * t * t : .5 * ((t -= 2) * t * t + 2) } }, Quartic: { In: function (t) { return t * t * t * t }, Out: function (t) { return 1 - --t * t * t * t }, InOut: function (t) { return (t *= 2) < 1 ? .5 * t * t * t * t : -.5 * ((t -= 2) * t * t * t - 2) } }, Quintic: { In: function (t) { return t * t * t * t * t }, Out: function (t) { return --t * t * t * t * t + 1 }, InOut: function (t) { return (t *= 2) < 1 ? .5 * t * t * t * t * t : .5 * ((t -= 2) * t * t * t * t + 2) } }, Sinusoidal: { In: function (t) { return 1 - Math.cos(t * Math.PI / 2) }, Out: function (t) { return Math.sin(t * Math.PI / 2) }, InOut: function (t) { return .5 * (1 - Math.cos(Math.PI * t)) } }, Exponential: { In: function (t) { return 0 === t ? 0 : Math.pow(1024, t - 1) }, Out: function (t) { return 1 === t ? 1 : 1 - Math.pow(2, -10 * t) }, InOut: function (t) { return 0 === t ? 0 : 1 === t ? 1 : (t *= 2) < 1 ? .5 * Math.pow(1024, t - 1) : .5 * (2 - Math.pow(2, -10 * (t - 1))) } }, Circular: { In: function (t) { return 1 - Math.sqrt(1 - t * t) }, Out: function (t) { return Math.sqrt(1 - --t * t) }, InOut: function (t) { return (t *= 2) < 1 ? -.5 * (Math.sqrt(1 - t * t) - 1) : .5 * (Math.sqrt(1 - (t -= 2) * t) + 1) } }, Elastic: { In: function (t) { return 0 === t ? 0 : 1 === t ? 1 : -Math.pow(2, 10 * (t - 1)) * Math.sin(5 * (t - 1.1) * Math.PI) }, Out: function (t) { return 0 === t ? 0 : 1 === t ? 1 : Math.pow(2, -10 * t) * Math.sin(5 * (t - .1) * Math.PI) + 1 }, InOut: function (t) { return 0 === t ? 0 : 1 === t ? 1 : (t *= 2) < 1 ? -.5 * Math.pow(2, 10 * (t - 1)) * Math.sin(5 * (t - 1.1) * Math.PI) : .5 * Math.pow(2, -10 * (t - 1)) * Math.sin(5 * (t - 1.1) * Math.PI) + 1 } }, Back: { In: function (t) { var n = 1.70158; return t * t * ((n + 1) * t - n) }, Out: function (t) { var n = 1.70158; return --t * t * ((n + 1) * t + n) + 1 }, InOut: function (t) { var n = 2.5949095; return (t *= 2) < 1 ? t * t * ((n + 1) * t - n) * .5 : .5 * ((t -= 2) * t * ((n + 1) * t + n) + 2) } }, Bounce: { In: function (t) { return 1 - Pr.Bounce.Out(1 - t) }, Out: function (t) { return t < 1 / 2.75 ? 7.5625 * t * t : t < 2 / 2.75 ? 7.5625 * (t -= 1.5 / 2.75) * t + .75 : t < 2.5 / 2.75 ? 7.5625 * (t -= 2.25 / 2.75) * t + .9375 : 7.5625 * (t -= 2.625 / 2.75) * t + .984375 }, InOut: function (t) { return t < .5 ? .5 * Pr.Bounce.In(2 * t) : .5 * Pr.Bounce.Out(2 * t - 1) + .5 } } }, Or = "undefined" == typeof self && "undefined" != typeof process && process.hrtime ? function () { var t = process.hrtime(); return 1e3 * t[0] + t[1] / 1e6 } : "undefined" != typeof self && void 0 !== self.performance && void 0 !== self.performance.now ? self.performance.now.bind(self.performance) : void 0 !== Date.now ? Date.now : function () { return (new Date).getTime() }, Tr = function () { function t() { this._tweens = {}, this._tweensAddedDuringUpdate = {} } return t.prototype.getAll = function () { var t = this; return Object.keys(this._tweens).map((function (n) { return t._tweens[n] })) }, t.prototype.removeAll = function () { this._tweens = {} }, t.prototype.add = function (t) { this._tweens[t.getId()] = t, this._tweensAddedDuringUpdate[t.getId()] = t }, t.prototype.remove = function (t) { delete this._tweens[t.getId()], delete this._tweensAddedDuringUpdate[t.getId()] }, t.prototype.update = function (t, n) { void 0 === t && (t = Or()), void 0 === n && (n = !1); var e = Object.keys(this._tweens); if (0 === e.length) return !1; for (; e.length > 0;) { this._tweensAddedDuringUpdate = {}; for (var r = 0; r < e.length; r++) { var i = this._tweens[e[r]], o = !n; i && !1 === i.update(t, o) && !n && delete this._tweens[e[r]] } e = Object.keys(this._tweensAddedDuringUpdate) } return !0 }, t }(), jr = { Linear: function (t, n) { var e = t.length - 1, r = e * n, i = Math.floor(r), o = jr.Utils.Linear; return n < 0 ? o(t[0], t[1], r) : n > 1 ? o(t[e], t[e - 1], e - r) : o(t[i], t[i + 1 > e ? e : i + 1], r - i) }, Bezier: function (t, n) { for (var e = 0, r = t.length - 1, i = Math.pow, o = jr.Utils.Bernstein, a = 0; a <= r; a++)e += i(1 - n, r - a) * i(n, a) * t[a] * o(r, a); return e }, CatmullRom: function (t, n) { var e = t.length - 1, r = e * n, i = Math.floor(r), o = jr.Utils.CatmullRom; return t[0] === t[e] ? (n < 0 && (i = Math.floor(r = e * (1 + n))), o(t[(i - 1 + e) % e], t[i], t[(i + 1) % e], t[(i + 2) % e], r - i)) : n < 0 ? t[0] - (o(t[0], t[0], t[1], t[1], -r) - t[0]) : n > 1 ? t[e] - (o(t[e], t[e], t[e - 1], t[e - 1], r - e) - t[e]) : o(t[i ? i - 1 : 0], t[i], t[e < i + 1 ? e : i + 1], t[e < i + 2 ? e : i + 2], r - i) }, Utils: { Linear: function (t, n, e) { return (n - t) * e + t }, Bernstein: function (t, n) { var e = jr.Utils.Factorial; return e(t) / e(n) / e(t - n) }, Factorial: function () { var t = [1]; return function (n) { var e = 1; if (t[n]) return t[n]; for (var r = n; r > 1; r--)e *= r; return t[n] = e, e } }(), CatmullRom: function (t, n, e, r, i) { var o = .5 * (e - t), a = .5 * (r - n), u = i * i; return (2 * n - 2 * e + o + a) * (i * u) + (-3 * n + 3 * e - 2 * o - a) * u + o * i + n } } }, Rr = function () { function t() { } return t.nextId = function () { return t._nextId++ }, t._nextId = 0, t }(), Dr = new Tr, Ir = function () { function t(t, n) { void 0 === n && (n = Dr), this._object = t, this._group = n, this._isPaused = !1, this._pauseStart = 0, this._valuesStart = {}, this._valuesEnd = {}, this._valuesStartRepeat = {}, this._duration = 1e3, this._initialRepeat = 0, this._repeat = 0, this._yoyo = !1, this._isPlaying = !1, this._reversed = !1, this._delayTime = 0, this._startTime = 0, this._easingFunction = Pr.Linear.None, this._interpolationFunction = jr.Linear, this._chainedTweens = [], this._onStartCallbackFired = !1, this._id = Rr.nextId(), this._isChainStopped = !1, this._goToEnd = !1 } return t.prototype.getId = function () { return this._id }, t.prototype.isPlaying = function () { return this._isPlaying }, t.prototype.isPaused = function () { return this._isPaused }, t.prototype.to = function (t, n) { return this._valuesEnd = Object.create(t), void 0 !== n && (this._duration = n), this }, t.prototype.duration = function (t) { return this._duration = t, this }, t.prototype.start = function (t) { if (this._isPlaying) return this; if (this._group && this._group.add(this), this._repeat = this._initialRepeat, this._reversed) for (var n in this._reversed = !1, this._valuesStartRepeat) this._swapEndStartRepeatValues(n), this._valuesStart[n] = this._valuesStartRepeat[n]; return this._isPlaying = !0, this._isPaused = !1, this._onStartCallbackFired = !1, this._isChainStopped = !1, this._startTime = void 0 !== t ? "string" == typeof t ? Or() + parseFloat(t) : t : Or(), this._startTime += this._delayTime, this._setupProperties(this._object, this._valuesStart, this._valuesEnd, this._valuesStartRepeat), this }, t.prototype._setupProperties = function (t, n, e, r) { for (var i in e) { var o = t[i], a = Array.isArray(o), u = a ? "array" : typeof o, s = !a && Array.isArray(e[i]); if ("undefined" !== u && "function" !== u) { if (s) { var l = e[i]; if (0 === l.length) continue; l = l.map(this._handleRelativeValue.bind(this, o)), e[i] = [o].concat(l) } if ("object" !== u && !a || !o || s) void 0 === n[i] && (n[i] = o), a || (n[i] *= 1), r[i] = s ? e[i].slice().reverse() : n[i] || 0; else { for (var c in n[i] = a ? [] : {}, o) n[i][c] = o[c]; r[i] = a ? [] : {}, this._setupProperties(o, n[i], e[i], r[i]) } } } }, t.prototype.stop = function () { return this._isChainStopped || (this._isChainStopped = !0, this.stopChainedTweens()), this._isPlaying ? (this._group && this._group.remove(this), this._isPlaying = !1, this._isPaused = !1, this._onStopCallback && this._onStopCallback(this._object), this) : this }, t.prototype.end = function () { return this._goToEnd = !0, this.update(1 / 0), this }, t.prototype.pause = function (t) { return void 0 === t && (t = Or()), this._isPaused || !this._isPlaying || (this._isPaused = !0, this._pauseStart = t, this._group && this._group.remove(this)), this }, t.prototype.resume = function (t) { return void 0 === t && (t = Or()), this._isPaused && this._isPlaying ? (this._isPaused = !1, this._startTime += t - this._pauseStart, this._pauseStart = 0, this._group && this._group.add(this), this) : this }, t.prototype.stopChainedTweens = function () { for (var t = 0, n = this._chainedTweens.length; t < n; t++)this._chainedTweens[t].stop(); return this }, t.prototype.group = function (t) { return this._group = t, this }, t.prototype.delay = function (t) { return this._delayTime = t, this }, t.prototype.repeat = function (t) { return this._initialRepeat = t, this._repeat = t, this }, t.prototype.repeatDelay = function (t) { return this._repeatDelayTime = t, this }, t.prototype.yoyo = function (t) { return this._yoyo = t, this }, t.prototype.easing = function (t) { return this._easingFunction = t, this }, t.prototype.interpolation = function (t) { return this._interpolationFunction = t, this }, t.prototype.chain = function () { for (var t = [], n = 0; n < arguments.length; n++)t[n] = arguments[n]; return this._chainedTweens = t, this }, t.prototype.onStart = function (t) { return this._onStartCallback = t, this }, t.prototype.onUpdate = function (t) { return this._onUpdateCallback = t, this }, t.prototype.onRepeat = function (t) { return this._onRepeatCallback = t, this }, t.prototype.onComplete = function (t) { return this._onCompleteCallback = t, this }, t.prototype.onStop = function (t) { return this._onStopCallback = t, this }, t.prototype.update = function (t, n) { if (void 0 === t && (t = Or()), void 0 === n && (n = !0), this._isPaused) return !0; var e, r, i = this._startTime + this._duration; if (!this._goToEnd && !this._isPlaying) { if (t > i) return !1; n && this.start(t) } if (this._goToEnd = !1, t < this._startTime) return !0; !1 === this._onStartCallbackFired && (this._onStartCallback && this._onStartCallback(this._object), this._onStartCallbackFired = !0), r = (t - this._startTime) / this._duration, r = 0 === this._duration || r > 1 ? 1 : r; var o = this._easingFunction(r); if (this._updateProperties(this._object, this._valuesStart, this._valuesEnd, o), this._onUpdateCallback && this._onUpdateCallback(this._object, r), 1 === r) { if (this._repeat > 0) { for (e in isFinite(this._repeat) && this._repeat--, this._valuesStartRepeat) this._yoyo || "string" != typeof this._valuesEnd[e] || (this._valuesStartRepeat[e] = this._valuesStartRepeat[e] + parseFloat(this._valuesEnd[e])), this._yoyo && this._swapEndStartRepeatValues(e), this._valuesStart[e] = this._valuesStartRepeat[e]; return this._yoyo && (this._reversed = !this._reversed), void 0 !== this._repeatDelayTime ? this._startTime = t + this._repeatDelayTime : this._startTime = t + this._delayTime, this._onRepeatCallback && this._onRepeatCallback(this._object), !0 } this._onCompleteCallback && this._onCompleteCallback(this._object); for (var a = 0, u = this._chainedTweens.length; a < u; a++)this._chainedTweens[a].start(this._startTime + this._duration); return this._isPlaying = !1, !1 } return !0 }, t.prototype._updateProperties = function (t, n, e, r) { for (var i in e) if (void 0 !== n[i]) { var o = n[i] || 0, a = e[i], u = Array.isArray(t[i]), s = Array.isArray(a); !u && s ? t[i] = this._interpolationFunction(a, r) : "object" == typeof a && a ? this._updateProperties(t[i], o, a, r) : "number" == typeof (a = this._handleRelativeValue(o, a)) && (t[i] = o + (a - o) * r) } }, t.prototype._handleRelativeValue = function (t, n) { return "string" != typeof n ? n : "+" === n.charAt(0) || "-" === n.charAt(0) ? t + parseFloat(n) : parseFloat(n) }, t.prototype._swapEndStartRepeatValues = function (t) { var n = this._valuesStartRepeat[t], e = this._valuesEnd[t]; this._valuesStartRepeat[t] = "string" == typeof e ? this._valuesStartRepeat[t] + parseFloat(e) : this._valuesEnd[t], this._valuesEnd[t] = n }, t }(), Ur = Rr.nextId, Fr = Dr, Lr = Fr.getAll.bind(Fr), qr = Fr.removeAll.bind(Fr), Br = Fr.add.bind(Fr), $r = Fr.remove.bind(Fr), Hr = Fr.update.bind(Fr), Vr = { Easing: Pr, Group: Tr, Interpolation: jr, now: Or, Sequence: Rr, nextId: Ur, Tween: Ir, VERSION: "18.6.4", getAll: Lr, removeAll: qr, add: Br, remove: $r, update: Hr }; function Gr(t, n, e) { var r, i, o, a, u; function s() { var l = Date.now() - a; l < n && l >= 0 ? r = setTimeout(s, n - l) : (r = null, e || (u = t.apply(o, i), o = i = null)) } null == n && (n = 100); var l = function () { o = this, i = arguments, a = Date.now(); var l = e && !r; return r || (r = setTimeout(s, n)), l && (u = t.apply(o, i), o = i = null), u }; return l.clear = function () { r && (clearTimeout(r), r = null) }, l.flush = function () { r && (u = t.apply(o, i), o = i = null, clearTimeout(r), r = null) }, l } Gr.debounce = Gr; var Xr = Gr; function Yr(t, n) { for (var e = 0; e < n.length; e++) { var r = n[e]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r) } } function Wr(t, n, e) { return n && Yr(t.prototype, n), e && Yr(t, e), Object.defineProperty(t, "prototype", { writable: !1 }), t } function Zr(t, n) { return function (t) { if (Array.isArray(t)) return t }(t) || function (t, n) { var e = null == t ? null : "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"]; if (null == e) return; var r, i, o = [], a = !0, u = !1; try { for (e = e.call(t); !(a = (r = e.next()).done) && (o.push(r.value), !n || o.length !== n); a = !0); } catch (t) { u = !0, i = t } finally { try { a || null == e.return || e.return() } finally { if (u) throw i } } return o }(t, n) || function (t, n) { if (!t) return; if ("string" == typeof t) return Qr(t, n); var e = Object.prototype.toString.call(t).slice(8, -1); "Object" === e && t.constructor && (e = t.constructor.name); if ("Map" === e || "Set" === e) return Array.from(t); if ("Arguments" === e || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)) return Qr(t, n) }(t, n) || function () { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") }() } function Qr(t, n) { (null == n || n > t.length) && (n = t.length); for (var e = 0, r = new Array(n); e < n; e++)r[e] = t[e]; return r } var Kr = Wr((function t(n, e) { var r = e.default, i = void 0 === r ? null : r, o = e.triggerUpdate, a = void 0 === o || o, u = e.onChange, s = void 0 === u ? function (t, n) { } : u; !function (t, n) { if (!(t instanceof n)) throw new TypeError("Cannot call a class as a function") }(this, t), this.name = n, this.defaultVal = i, this.triggerUpdate = a, this.onChange = s })); function Jr(t) { var n = t.stateInit, e = void 0 === n ? function () { return {} } : n, r = t.props, i = void 0 === r ? {} : r, o = t.methods, a = void 0 === o ? {} : o, u = t.aliases, s = void 0 === u ? {} : u, l = t.init, c = void 0 === l ? function () { } : l, h = t.update, f = void 0 === h ? function () { } : h, d = Object.keys(i).map((function (t) { return new Kr(t, i[t]) })); return function () { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, n = Object.assign({}, e instanceof Function ? e(t) : e, { initialised: !1 }), r = {}; function i(n) { return o(n, t), u(), i } var o = function (t, e) { c.call(i, t, n, e), n.initialised = !0 }, u = Xr((function () { n.initialised && (f.call(i, n, r), r = {}) }), 1); return d.forEach((function (t) { i[t.name] = function (t) { var e = t.name, o = t.triggerUpdate, a = void 0 !== o && o, s = t.onChange, l = void 0 === s ? function (t, n) { } : s, c = t.defaultVal, h = void 0 === c ? null : c; return function (t) { var o = n[e]; if (!arguments.length) return o; var s = void 0 === t ? h : t; return n[e] = s, l.call(i, s, n, o), !r.hasOwnProperty(e) && (r[e] = o), a && u(), i } }(t) })), Object.keys(a).forEach((function (t) { i[t] = function () { for (var e, r = arguments.length, o = new Array(r), u = 0; u < r; u++)o[u] = arguments[u]; return (e = a[t]).call.apply(e, [i, n].concat(o)) } })), Object.entries(s).forEach((function (t) { var n = Zr(t, 2), e = n[0], r = n[1]; return i[e] = i[r] })), i.resetProps = function () { return d.forEach((function (t) { i[t.name](t.defaultVal) })), i }, i.resetProps(), n._rerender = u, i } } var ti = function (t) { return t instanceof Function ? t : "string" == typeof t ? function (n) { return n[t] } : function (n) { return t } }; const ni = /^\s+/, ei = /\s+$/; function ri(t, n) { if (n = n || {}, (t = t || "") instanceof ri) return t; if (!(this instanceof ri)) return new ri(t, n); var e = function (t) { var n = { r: 0, g: 0, b: 0 }, e = 1, r = null, i = null, o = null, a = !1, u = !1; "string" == typeof t && (t = function (t) { t = t.replace(ni, "").replace(ei, "").toLowerCase(); var n, e = !1; if (xi[t]) t = xi[t], e = !0; else if ("transparent" == t) return { r: 0, g: 0, b: 0, a: 0, format: "name" }; if (n = Ti.rgb.exec(t)) return { r: n[1], g: n[2], b: n[3] }; if (n = Ti.rgba.exec(t)) return { r: n[1], g: n[2], b: n[3], a: n[4] }; if (n = Ti.hsl.exec(t)) return { h: n[1], s: n[2], l: n[3] }; if (n = Ti.hsla.exec(t)) return { h: n[1], s: n[2], l: n[3], a: n[4] }; if (n = Ti.hsv.exec(t)) return { h: n[1], s: n[2], v: n[3] }; if (n = Ti.hsva.exec(t)) return { h: n[1], s: n[2], v: n[3], a: n[4] }; if (n = Ti.hex8.exec(t)) return { r: zi(n[1]), g: zi(n[2]), b: zi(n[3]), a: Ei(n[4]), format: e ? "name" : "hex8" }; if (n = Ti.hex6.exec(t)) return { r: zi(n[1]), g: zi(n[2]), b: zi(n[3]), format: e ? "name" : "hex" }; if (n = Ti.hex4.exec(t)) return { r: zi(n[1] + "" + n[1]), g: zi(n[2] + "" + n[2]), b: zi(n[3] + "" + n[3]), a: Ei(n[4] + "" + n[4]), format: e ? "name" : "hex8" }; if (n = Ti.hex3.exec(t)) return { r: zi(n[1] + "" + n[1]), g: zi(n[2] + "" + n[2]), b: zi(n[3] + "" + n[3]), format: e ? "name" : "hex" }; return !1 }(t)); "object" == typeof t && (ji(t.r) && ji(t.g) && ji(t.b) ? (s = t.r, l = t.g, c = t.b, n = { r: 255 * ki(s, 255), g: 255 * ki(l, 255), b: 255 * ki(c, 255) }, a = !0, u = "%" === String(t.r).substr(-1) ? "prgb" : "rgb") : ji(t.h) && ji(t.s) && ji(t.v) ? (r = Si(t.s), i = Si(t.v), n = function (t, n, e) { t = 6 * ki(t, 360), n = ki(n, 100), e = ki(e, 100); var r = Math.floor(t), i = t - r, o = e * (1 - n), a = e * (1 - i * n), u = e * (1 - (1 - i) * n), s = r % 6, l = [e, a, o, o, u, e][s], c = [u, e, e, a, o, o][s], h = [o, o, u, e, e, a][s]; return { r: 255 * l, g: 255 * c, b: 255 * h } }(t.h, r, i), a = !0, u = "hsv") : ji(t.h) && ji(t.s) && ji(t.l) && (r = Si(t.s), o = Si(t.l), n = function (t, n, e) { var r, i, o; function a(t, n, e) { return e < 0 && (e += 1), e > 1 && (e -= 1), e < 1 / 6 ? t + 6 * (n - t) * e : e < .5 ? n : e < 2 / 3 ? t + (n - t) * (2 / 3 - e) * 6 : t } if (t = ki(t, 360), n = ki(n, 100), e = ki(e, 100), 0 === n) r = i = o = e; else { var u = e < .5 ? e * (1 + n) : e + n - e * n, s = 2 * e - u; r = a(s, u, t + 1 / 3), i = a(s, u, t), o = a(s, u, t - 1 / 3) } return { r: 255 * r, g: 255 * i, b: 255 * o } }(t.h, r, o), a = !0, u = "hsl"), t.hasOwnProperty("a") && (e = t.a)); var s, l, c; return e = wi(e), { ok: a, format: t.format || u, r: Math.min(255, Math.max(n.r, 0)), g: Math.min(255, Math.max(n.g, 0)), b: Math.min(255, Math.max(n.b, 0)), a: e } }(t); this._originalInput = t, this._r = e.r, this._g = e.g, this._b = e.b, this._a = e.a, this._roundA = Math.round(100 * this._a) / 100, this._format = n.format || e.format, this._gradientType = n.gradientType, this._r < 1 && (this._r = Math.round(this._r)), this._g < 1 && (this._g = Math.round(this._g)), this._b < 1 && (this._b = Math.round(this._b)), this._ok = e.ok } function ii(t, n, e) { t = ki(t, 255), n = ki(n, 255), e = ki(e, 255); var r, i, o = Math.max(t, n, e), a = Math.min(t, n, e), u = (o + a) / 2; if (o == a) r = i = 0; else { var s = o - a; switch (i = u > .5 ? s / (2 - o - a) : s / (o + a), o) { case t: r = (n - e) / s + (n < e ? 6 : 0); break; case n: r = (e - t) / s + 2; break; case e: r = (t - n) / s + 4 }r /= 6 } return { h: r, s: i, l: u } } function oi(t, n, e) { t = ki(t, 255), n = ki(n, 255), e = ki(e, 255); var r, i, o = Math.max(t, n, e), a = Math.min(t, n, e), u = o, s = o - a; if (i = 0 === o ? 0 : s / o, o == a) r = 0; else { switch (o) { case t: r = (n - e) / s + (n < e ? 6 : 0); break; case n: r = (e - t) / s + 2; break; case e: r = (t - n) / s + 4 }r /= 6 } return { h: r, s: i, v: u } } function ai(t, n, e, r) { var i = [Ai(Math.round(t).toString(16)), Ai(Math.round(n).toString(16)), Ai(Math.round(e).toString(16))]; return r && i[0].charAt(0) == i[0].charAt(1) && i[1].charAt(0) == i[1].charAt(1) && i[2].charAt(0) == i[2].charAt(1) ? i[0].charAt(0) + i[1].charAt(0) + i[2].charAt(0) : i.join("") } function ui(t, n, e, r) { return [Ai(Ci(r)), Ai(Math.round(t).toString(16)), Ai(Math.round(n).toString(16)), Ai(Math.round(e).toString(16))].join("") } function si(t, n) { n = 0 === n ? 0 : n || 10; var e = ri(t).toHsl(); return e.s -= n / 100, e.s = Mi(e.s), ri(e) } function li(t, n) { n = 0 === n ? 0 : n || 10; var e = ri(t).toHsl(); return e.s += n / 100, e.s = Mi(e.s), ri(e) } function ci(t) { return ri(t).desaturate(100) } function hi(t, n) { n = 0 === n ? 0 : n || 10; var e = ri(t).toHsl(); return e.l += n / 100, e.l = Mi(e.l), ri(e) } function fi(t, n) { n = 0 === n ? 0 : n || 10; var e = ri(t).toRgb(); return e.r = Math.max(0, Math.min(255, e.r - Math.round(-n / 100 * 255))), e.g = Math.max(0, Math.min(255, e.g - Math.round(-n / 100 * 255))), e.b = Math.max(0, Math.min(255, e.b - Math.round(-n / 100 * 255))), ri(e) } function di(t, n) { n = 0 === n ? 0 : n || 10; var e = ri(t).toHsl(); return e.l -= n / 100, e.l = Mi(e.l), ri(e) } function pi(t, n) { var e = ri(t).toHsl(), r = (e.h + n) % 360; return e.h = r < 0 ? 360 + r : r, ri(e) } function gi(t) { var n = ri(t).toHsl(); return n.h = (n.h + 180) % 360, ri(n) } function yi(t, n) { if (isNaN(n) || n <= 0) throw new Error("Argument to polyad must be a positive number"); for (var e = ri(t).toHsl(), r = [ri(t)], i = 360 / n, o = 1; o < n; o++)r.push(ri({ h: (e.h + o * i) % 360, s: e.s, l: e.l })); return r } function vi(t) { var n = ri(t).toHsl(), e = n.h; return [ri(t), ri({ h: (e + 72) % 360, s: n.s, l: n.l }), ri({ h: (e + 216) % 360, s: n.s, l: n.l })] } function _i(t, n, e) { n = n || 6, e = e || 30; var r = ri(t).toHsl(), i = 360 / e, o = [ri(t)]; for (r.h = (r.h - (i * n >> 1) + 720) % 360; --n;)r.h = (r.h + i) % 360, o.push(ri(r)); return o } function mi(t, n) { n = n || 6; for (var e = ri(t).toHsv(), r = e.h, i = e.s, o = e.v, a = [], u = 1 / n; n--;)a.push(ri({ h: r, s: i, v: o })), o = (o + u) % 1; return a } ri.prototype = { isDark: function () { return this.getBrightness() < 128 }, isLight: function () { return !this.isDark() }, isValid: function () { return this._ok }, getOriginalInput: function () { return this._originalInput }, getFormat: function () { return this._format }, getAlpha: function () { return this._a }, getBrightness: function () { var t = this.toRgb(); return (299 * t.r + 587 * t.g + 114 * t.b) / 1e3 }, getLuminance: function () { var t, n, e, r = this.toRgb(); return t = r.r / 255, n = r.g / 255, e = r.b / 255, .2126 * (t <= .03928 ? t / 12.92 : Math.pow((t + .055) / 1.055, 2.4)) + .7152 * (n <= .03928 ? n / 12.92 : Math.pow((n + .055) / 1.055, 2.4)) + .0722 * (e <= .03928 ? e / 12.92 : Math.pow((e + .055) / 1.055, 2.4)) }, setAlpha: function (t) { return this._a = wi(t), this._roundA = Math.round(100 * this._a) / 100, this }, toHsv: function () { var t = oi(this._r, this._g, this._b); return { h: 360 * t.h, s: t.s, v: t.v, a: this._a } }, toHsvString: function () { var t = oi(this._r, this._g, this._b), n = Math.round(360 * t.h), e = Math.round(100 * t.s), r = Math.round(100 * t.v); return 1 == this._a ? "hsv(" + n + ", " + e + "%, " + r + "%)" : "hsva(" + n + ", " + e + "%, " + r + "%, " + this._roundA + ")" }, toHsl: function () { var t = ii(this._r, this._g, this._b); return { h: 360 * t.h, s: t.s, l: t.l, a: this._a } }, toHslString: function () { var t = ii(this._r, this._g, this._b), n = Math.round(360 * t.h), e = Math.round(100 * t.s), r = Math.round(100 * t.l); return 1 == this._a ? "hsl(" + n + ", " + e + "%, " + r + "%)" : "hsla(" + n + ", " + e + "%, " + r + "%, " + this._roundA + ")" }, toHex: function (t) { return ai(this._r, this._g, this._b, t) }, toHexString: function (t) { return "#" + this.toHex(t) }, toHex8: function (t) { return function (t, n, e, r, i) { var o = [Ai(Math.round(t).toString(16)), Ai(Math.round(n).toString(16)), Ai(Math.round(e).toString(16)), Ai(Ci(r))]; if (i && o[0].charAt(0) == o[0].charAt(1) && o[1].charAt(0) == o[1].charAt(1) && o[2].charAt(0) == o[2].charAt(1) && o[3].charAt(0) == o[3].charAt(1)) return o[0].charAt(0) + o[1].charAt(0) + o[2].charAt(0) + o[3].charAt(0); return o.join("") }(this._r, this._g, this._b, this._a, t) }, toHex8String: function (t) { return "#" + this.toHex8(t) }, toRgb: function () { return { r: Math.round(this._r), g: Math.round(this._g), b: Math.round(this._b), a: this._a } }, toRgbString: function () { return 1 == this._a ? "rgb(" + Math.round(this._r) + ", " + Math.round(this._g) + ", " + Math.round(this._b) + ")" : "rgba(" + Math.round(this._r) + ", " + Math.round(this._g) + ", " + Math.round(this._b) + ", " + this._roundA + ")" }, toPercentageRgb: function () { return { r: Math.round(100 * ki(this._r, 255)) + "%", g: Math.round(100 * ki(this._g, 255)) + "%", b: Math.round(100 * ki(this._b, 255)) + "%", a: this._a } }, toPercentageRgbString: function () { return 1 == this._a ? "rgb(" + Math.round(100 * ki(this._r, 255)) + "%, " + Math.round(100 * ki(this._g, 255)) + "%, " + Math.round(100 * ki(this._b, 255)) + "%)" : "rgba(" + Math.round(100 * ki(this._r, 255)) + "%, " + Math.round(100 * ki(this._g, 255)) + "%, " + Math.round(100 * ki(this._b, 255)) + "%, " + this._roundA + ")" }, toName: function () { return 0 === this._a ? "transparent" : !(this._a < 1) && (bi[ai(this._r, this._g, this._b, !0)] || !1) }, toFilter: function (t) { var n = "#" + ui(this._r, this._g, this._b, this._a), e = n, r = this._gradientType ? "GradientType = 1, " : ""; if (t) { var i = ri(t); e = "#" + ui(i._r, i._g, i._b, i._a) } return "progid:DXImageTransform.Microsoft.gradient(" + r + "startColorstr=" + n + ",endColorstr=" + e + ")" }, toString: function (t) { var n = !!t; t = t || this._format; var e = !1, r = this._a < 1 && this._a >= 0; return n || !r || "hex" !== t && "hex6" !== t && "hex3" !== t && "hex4" !== t && "hex8" !== t && "name" !== t ? ("rgb" === t && (e = this.toRgbString()), "prgb" === t && (e = this.toPercentageRgbString()), "hex" !== t && "hex6" !== t || (e = this.toHexString()), "hex3" === t && (e = this.toHexString(!0)), "hex4" === t && (e = this.toHex8String(!0)), "hex8" === t && (e = this.toHex8String()), "name" === t && (e = this.toName()), "hsl" === t && (e = this.toHslString()), "hsv" === t && (e = this.toHsvString()), e || this.toHexString()) : "name" === t && 0 === this._a ? this.toName() : this.toRgbString() }, clone: function () { return ri(this.toString()) }, _applyModification: function (t, n) { var e = t.apply(null, [this].concat([].slice.call(n))); return this._r = e._r, this._g = e._g, this._b = e._b, this.setAlpha(e._a), this }, lighten: function () { return this._applyModification(hi, arguments) }, brighten: function () { return this._applyModification(fi, arguments) }, darken: function () { return this._applyModification(di, arguments) }, desaturate: function () { return this._applyModification(si, arguments) }, saturate: function () { return this._applyModification(li, arguments) }, greyscale: function () { return this._applyModification(ci, arguments) }, spin: function () { return this._applyModification(pi, arguments) }, _applyCombination: function (t, n) { return t.apply(null, [this].concat([].slice.call(n))) }, analogous: function () { return this._applyCombination(_i, arguments) }, complement: function () { return this._applyCombination(gi, arguments) }, monochromatic: function () { return this._applyCombination(mi, arguments) }, splitcomplement: function () { return this._applyCombination(vi, arguments) }, triad: function () { return this._applyCombination(yi, [3]) }, tetrad: function () { return this._applyCombination(yi, [4]) } }, ri.fromRatio = function (t, n) { if ("object" == typeof t) { var e = {}; for (var r in t) t.hasOwnProperty(r) && (e[r] = "a" === r ? t[r] : Si(t[r])); t = e } return ri(t, n) }, ri.equals = function (t, n) { return !(!t || !n) && ri(t).toRgbString() == ri(n).toRgbString() }, ri.random = function () { return ri.fromRatio({ r: Math.random(), g: Math.random(), b: Math.random() }) }, ri.mix = function (t, n, e) { e = 0 === e ? 0 : e || 50; var r = ri(t).toRgb(), i = ri(n).toRgb(), o = e / 100; return ri({ r: (i.r - r.r) * o + r.r, g: (i.g - r.g) * o + r.g, b: (i.b - r.b) * o + r.b, a: (i.a - r.a) * o + r.a }) },
        // <http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef (WCAG Version 2)
        // Analyze the 2 colors and returns the color contrast defined by (WCAG Version 2)
        ri.readability = function (t, n) { var e = ri(t), r = ri(n); return (Math.max(e.getLuminance(), r.getLuminance()) + .05) / (Math.min(e.getLuminance(), r.getLuminance()) + .05) }, ri.isReadable = function (t, n, e) { var r, i, o = ri.readability(t, n); switch (i = !1, (r = function (t) { var n, e; n = ((t = t || { level: "AA", size: "small" }).level || "AA").toUpperCase(), e = (t.size || "small").toLowerCase(), "AA" !== n && "AAA" !== n && (n = "AA"); "small" !== e && "large" !== e && (e = "small"); return { level: n, size: e } }(e)).level + r.size) { case "AAsmall": case "AAAlarge": i = o >= 4.5; break; case "AAlarge": i = o >= 3; break; case "AAAsmall": i = o >= 7 }return i }, ri.mostReadable = function (t, n, e) { var r, i, o, a, u = null, s = 0; i = (e = e || {}).includeFallbackColors, o = e.level, a = e.size; for (var l = 0; l < n.length; l++)(r = ri.readability(t, n[l])) > s && (s = r, u = ri(n[l])); return ri.isReadable(t, u, { level: o, size: a }) || !i ? u : (e.includeFallbackColors = !1, ri.mostReadable(t, ["#fff", "#000"], e)) }; var xi = ri.names = { aliceblue: "f0f8ff", antiquewhite: "faebd7", aqua: "0ff", aquamarine: "7fffd4", azure: "f0ffff", beige: "f5f5dc", bisque: "ffe4c4", black: "000", blanchedalmond: "ffebcd", blue: "00f", blueviolet: "8a2be2", brown: "a52a2a", burlywood: "deb887", burntsienna: "ea7e5d", cadetblue: "5f9ea0", chartreuse: "7fff00", chocolate: "d2691e", coral: "ff7f50", cornflowerblue: "6495ed", cornsilk: "fff8dc", crimson: "dc143c", cyan: "0ff", darkblue: "00008b", darkcyan: "008b8b", darkgoldenrod: "b8860b", darkgray: "a9a9a9", darkgreen: "006400", darkgrey: "a9a9a9", darkkhaki: "bdb76b", darkmagenta: "8b008b", darkolivegreen: "556b2f", darkorange: "ff8c00", darkorchid: "9932cc", darkred: "8b0000", darksalmon: "e9967a", darkseagreen: "8fbc8f", darkslateblue: "483d8b", darkslategray: "2f4f4f", darkslategrey: "2f4f4f", darkturquoise: "00ced1", darkviolet: "9400d3", deeppink: "ff1493", deepskyblue: "00bfff", dimgray: "696969", dimgrey: "696969", dodgerblue: "1e90ff", firebrick: "b22222", floralwhite: "fffaf0", forestgreen: "228b22", fuchsia: "f0f", gainsboro: "dcdcdc", ghostwhite: "f8f8ff", gold: "ffd700", goldenrod: "daa520", gray: "808080", green: "008000", greenyellow: "adff2f", grey: "808080", honeydew: "f0fff0", hotpink: "ff69b4", indianred: "cd5c5c", indigo: "4b0082", ivory: "fffff0", khaki: "f0e68c", lavender: "e6e6fa", lavenderblush: "fff0f5", lawngreen: "7cfc00", lemonchiffon: "fffacd", lightblue: "add8e6", lightcoral: "f08080", lightcyan: "e0ffff", lightgoldenrodyellow: "fafad2", lightgray: "d3d3d3", lightgreen: "90ee90", lightgrey: "d3d3d3", lightpink: "ffb6c1", lightsalmon: "ffa07a", lightseagreen: "20b2aa", lightskyblue: "87cefa", lightslategray: "789", lightslategrey: "789", lightsteelblue: "b0c4de", lightyellow: "ffffe0", lime: "0f0", limegreen: "32cd32", linen: "faf0e6", magenta: "f0f", maroon: "800000", mediumaquamarine: "66cdaa", mediumblue: "0000cd", mediumorchid: "ba55d3", mediumpurple: "9370db", mediumseagreen: "3cb371", mediumslateblue: "7b68ee", mediumspringgreen: "00fa9a", mediumturquoise: "48d1cc", mediumvioletred: "c71585", midnightblue: "191970", mintcream: "f5fffa", mistyrose: "ffe4e1", moccasin: "ffe4b5", navajowhite: "ffdead", navy: "000080", oldlace: "fdf5e6", olive: "808000", olivedrab: "6b8e23", orange: "ffa500", orangered: "ff4500", orchid: "da70d6", palegoldenrod: "eee8aa", palegreen: "98fb98", paleturquoise: "afeeee", palevioletred: "db7093", papayawhip: "ffefd5", peachpuff: "ffdab9", peru: "cd853f", pink: "ffc0cb", plum: "dda0dd", powderblue: "b0e0e6", purple: "800080", rebeccapurple: "663399", red: "f00", rosybrown: "bc8f8f", royalblue: "4169e1", saddlebrown: "8b4513", salmon: "fa8072", sandybrown: "f4a460", seagreen: "2e8b57", seashell: "fff5ee", sienna: "a0522d", silver: "c0c0c0", skyblue: "87ceeb", slateblue: "6a5acd", slategray: "708090", slategrey: "708090", snow: "fffafa", springgreen: "00ff7f", steelblue: "4682b4", tan: "d2b48c", teal: "008080", thistle: "d8bfd8", tomato: "ff6347", turquoise: "40e0d0", violet: "ee82ee", wheat: "f5deb3", white: "fff", whitesmoke: "f5f5f5", yellow: "ff0", yellowgreen: "9acd32" }, bi = ri.hexNames = function (t) { var n = {}; for (var e in t) t.hasOwnProperty(e) && (n[t[e]] = e); return n }(xi); function wi(t) { return t = parseFloat(t), (isNaN(t) || t < 0 || t > 1) && (t = 1), t } function ki(t, n) { (function (t) { return "string" == typeof t && -1 != t.indexOf(".") && 1 === parseFloat(t) })(t) && (t = "100%"); var e = function (t) { return "string" == typeof t && -1 != t.indexOf("%") }(t); return t = Math.min(n, Math.max(0, parseFloat(t))), e && (t = parseInt(t * n, 10) / 100), Math.abs(t - n) < 1e-6 ? 1 : t % n / parseFloat(n) } function Mi(t) { return Math.min(1, Math.max(0, t)) } function zi(t) { return parseInt(t, 16) } function Ai(t) { return 1 == t.length ? "0" + t : "" + t } function Si(t) { return t <= 1 && (t = 100 * t + "%"), t } function Ci(t) { return Math.round(255 * parseFloat(t)).toString(16) } function Ei(t) { return zi(t) / 255 } var Ni, Pi, Oi, Ti = (Pi = "[\\s|\\(]+(" + (Ni = "(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)") + ")[,|\\s]+(" + Ni + ")[,|\\s]+(" + Ni + ")\\s*\\)?", Oi = "[\\s|\\(]+(" + Ni + ")[,|\\s]+(" + Ni + ")[,|\\s]+(" + Ni + ")[,|\\s]+(" + Ni + ")\\s*\\)?", { CSS_UNIT: new RegExp(Ni), rgb: new RegExp("rgb" + Pi), rgba: new RegExp("rgba" + Oi), hsl: new RegExp("hsl" + Pi), hsla: new RegExp("hsla" + Oi), hsv: new RegExp("hsv" + Pi), hsva: new RegExp("hsva" + Oi), hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/, hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/, hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/, hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/ }); function ji(t) { return !!Ti.CSS_UNIT.exec(t) } function Ri(t, n) { if (!(t instanceof n)) throw new TypeError("Cannot call a class as a function") } function Di(t, n) { for (var e = 0; e < n.length; e++) { var r = n[e]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r) } } function Ii(t) { return function (t) { if (Array.isArray(t)) return Ui(t) }(t) || function (t) { if ("undefined" != typeof Symbol && null != t[Symbol.iterator] || null != t["@@iterator"]) return Array.from(t) }(t) || function (t, n) { if (!t) return; if ("string" == typeof t) return Ui(t, n); var e = Object.prototype.toString.call(t).slice(8, -1); "Object" === e && t.constructor && (e = t.constructor.name); if ("Map" === e || "Set" === e) return Array.from(t); if ("Arguments" === e || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)) return Ui(t, n) }(t) || function () { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") }() } function Ui(t, n) { (null == n || n > t.length) && (n = t.length); for (var e = 0, r = new Array(n); e < n; e++)r[e] = t[e]; return r } var Fi = function (t, n, e) { return (t << 16) + (n << 8) + e }, Li = function (t, n) { return 123 * t % Math.pow(2, n) }, qi = function () { function t() { var n = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 6; Ri(this, t), this.csBits = n, this.registry = ["__reserved for background__"] } var n, e, r; return n = t, e = [{ key: "register", value: function (t) { if (this.registry.length >= Math.pow(2, 24 - this.csBits)) return null; var n, e = this.registry.length, r = Li(e, this.csBits), i = (n = e + (r << 24 - this.csBits), "#".concat(Math.min(n, Math.pow(2, 24)).toString(16).padStart(6, "0"))); return this.registry.push(t), i } }, { key: "lookup", value: function (t) { var n, e, r, i, o = "string" == typeof t ? (n = ri(t).toRgb(), e = n.r, r = n.g, i = n.b, Fi(e, r, i)) : Fi.apply(void 0, Ii(t)); if (!o) return null; var a = o & Math.pow(2, 24 - this.csBits) - 1, u = o >> 24 - this.csBits & Math.pow(2, this.csBits) - 1; return Li(a, this.csBits) !== u || a >= this.registry.length ? null : this.registry[a] } }], e && Di(n.prototype, e), r && Di(n, r), Object.defineProperty(n, "prototype", { writable: !1 }), t }(); function Bi(t, n, e) { var r, i = 1; function o() { var o, a, u = r.length, s = 0, l = 0, c = 0; for (o = 0; o < u; ++o)s += (a = r[o]).x || 0, l += a.y || 0, c += a.z || 0; for (s = (s / u - t) * i, l = (l / u - n) * i, c = (c / u - e) * i, o = 0; o < u; ++o)a = r[o], s && (a.x -= s), l && (a.y -= l), c && (a.z -= c) } return null == t && (t = 0), null == n && (n = 0), null == e && (e = 0), o.initialize = function (t) { r = t }, o.x = function (n) { return arguments.length ? (t = +n, o) : t }, o.y = function (t) { return arguments.length ? (n = +t, o) : n }, o.z = function (t) { return arguments.length ? (e = +t, o) : e }, o.strength = function (t) { return arguments.length ? (i = +t, o) : i }, o } function $i(t, n, e) { if (isNaN(n)) return t; var r, i, o, a, u, s, l = t._root, c = { data: e }, h = t._x0, f = t._x1; if (!l) return t._root = c, t; for (; l.length;)if ((a = n >= (i = (h + f) / 2)) ? h = i : f = i, r = l, !(l = l[u = +a])) return r[u] = c, t; if (n === (o = +t._x.call(null, l.data))) return c.next = l, r ? r[u] = c : t._root = c, t; do { r = r ? r[u] = new Array(2) : t._root = new Array(2), (a = n >= (i = (h + f) / 2)) ? h = i : f = i } while ((u = +a) == (s = +(o >= i))); return r[s] = l, r[u] = c, t } function Hi(t, n, e) { this.node = t, this.x0 = n, this.x1 = e } function Vi(t) { return t[0] } function Gi(t, n) { var e = new Xi(null == n ? Vi : n, NaN, NaN); return null == t ? e : e.addAll(t) } function Xi(t, n, e) { this._x = t, this._x0 = n, this._x1 = e, this._root = void 0 } function Yi(t) { for (var n = { data: t.data }, e = n; t = t.next;)e = e.next = { data: t.data }; return n } var Wi = Gi.prototype = Xi.prototype; function Zi(t, n, e, r) { if (isNaN(n) || isNaN(e)) return t; var i, o, a, u, s, l, c, h, f, d = t._root, p = { data: r }, g = t._x0, y = t._y0, v = t._x1, _ = t._y1; if (!d) return t._root = p, t; for (; d.length;)if ((l = n >= (o = (g + v) / 2)) ? g = o : v = o, (c = e >= (a = (y + _) / 2)) ? y = a : _ = a, i = d, !(d = d[h = c << 1 | l])) return i[h] = p, t; if (u = +t._x.call(null, d.data), s = +t._y.call(null, d.data), n === u && e === s) return p.next = d, i ? i[h] = p : t._root = p, t; do { i = i ? i[h] = new Array(4) : t._root = new Array(4), (l = n >= (o = (g + v) / 2)) ? g = o : v = o, (c = e >= (a = (y + _) / 2)) ? y = a : _ = a } while ((h = c << 1 | l) == (f = (s >= a) << 1 | u >= o)); return i[f] = d, i[h] = p, t } function Qi(t, n, e, r, i) { this.node = t, this.x0 = n, this.y0 = e, this.x1 = r, this.y1 = i } function Ki(t) { return t[0] } function Ji(t) { return t[1] } function to(t, n, e) { var r = new no(null == n ? Ki : n, null == e ? Ji : e, NaN, NaN, NaN, NaN); return null == t ? r : r.addAll(t) } function no(t, n, e, r, i, o) { this._x = t, this._y = n, this._x0 = e, this._y0 = r, this._x1 = i, this._y1 = o, this._root = void 0 } function eo(t) { for (var n = { data: t.data }, e = n; t = t.next;)e = e.next = { data: t.data }; return n } Wi.copy = function () { var t, n, e = new Xi(this._x, this._x0, this._x1), r = this._root; if (!r) return e; if (!r.length) return e._root = Yi(r), e; for (t = [{ source: r, target: e._root = new Array(2) }]; r = t.pop();)for (var i = 0; i < 2; ++i)(n = r.source[i]) && (n.length ? t.push({ source: n, target: r.target[i] = new Array(2) }) : r.target[i] = Yi(n)); return e }, Wi.add = function (t) { var n = +this._x.call(null, t); return $i(this.cover(n), n, t) }, Wi.addAll = function (t) { var n, e, r = t.length, i = new Array(r), o = 1 / 0, a = -1 / 0; for (n = 0; n < r; ++n)isNaN(e = +this._x.call(null, t[n])) || (i[n] = e, e < o && (o = e), e > a && (a = e)); if (o > a) return this; for (this.cover(o).cover(a), n = 0; n < r; ++n)$i(this, i[n], t[n]); return this }, Wi.cover = function (t) { if (isNaN(t = +t)) return this; var n = this._x0, e = this._x1; if (isNaN(n)) e = (n = Math.floor(t)) + 1; else { for (var r, i, o = e - n || 1, a = this._root; n > t || t >= e;)switch (i = +(t < n), (r = new Array(2))[i] = a, a = r, o *= 2, i) { case 0: e = n + o; break; case 1: n = e - o }this._root && this._root.length && (this._root = a) } return this._x0 = n, this._x1 = e, this }, Wi.data = function () { var t = []; return this.visit((function (n) { if (!n.length) do { t.push(n.data) } while (n = n.next) })), t }, Wi.extent = function (t) { return arguments.length ? this.cover(+t[0][0]).cover(+t[1][0]) : isNaN(this._x0) ? void 0 : [[this._x0], [this._x1]] }, Wi.find = function (t, n) { var e, r, i, o, a, u = this._x0, s = this._x1, l = [], c = this._root; for (c && l.push(new Hi(c, u, s)), null == n ? n = 1 / 0 : (u = t - n, s = t + n); o = l.pop();)if (!(!(c = o.node) || (r = o.x0) > s || (i = o.x1) < u)) if (c.length) { var h = (r + i) / 2; l.push(new Hi(c[1], h, i), new Hi(c[0], r, h)), (a = +(t >= h)) && (o = l[l.length - 1], l[l.length - 1] = l[l.length - 1 - a], l[l.length - 1 - a] = o) } else { var f = Math.abs(t - +this._x.call(null, c.data)); f < n && (n = f, u = t - f, s = t + f, e = c.data) } return e }, Wi.remove = function (t) { if (isNaN(o = +this._x.call(null, t))) return this; var n, e, r, i, o, a, u, s, l, c = this._root, h = this._x0, f = this._x1; if (!c) return this; if (c.length) for (; ;) { if ((u = o >= (a = (h + f) / 2)) ? h = a : f = a, n = c, !(c = c[s = +u])) return this; if (!c.length) break; n[s + 1 & 1] && (e = n, l = s) } for (; c.data !== t;)if (r = c, !(c = c.next)) return this; return (i = c.next) && delete c.next, r ? (i ? r.next = i : delete r.next, this) : n ? (i ? n[s] = i : delete n[s], (c = n[0] || n[1]) && c === (n[1] || n[0]) && !c.length && (e ? e[l] = c : this._root = c), this) : (this._root = i, this) }, Wi.removeAll = function (t) { for (var n = 0, e = t.length; n < e; ++n)this.remove(t[n]); return this }, Wi.root = function () { return this._root }, Wi.size = function () { var t = 0; return this.visit((function (n) { if (!n.length) do { ++t } while (n = n.next) })), t }, Wi.visit = function (t) { var n, e, r, i, o = [], a = this._root; for (a && o.push(new Hi(a, this._x0, this._x1)); n = o.pop();)if (!t(a = n.node, r = n.x0, i = n.x1) && a.length) { var u = (r + i) / 2; (e = a[1]) && o.push(new Hi(e, u, i)), (e = a[0]) && o.push(new Hi(e, r, u)) } return this }, Wi.visitAfter = function (t) { var n, e = [], r = []; for (this._root && e.push(new Hi(this._root, this._x0, this._x1)); n = e.pop();) { var i = n.node; if (i.length) { var o, a = n.x0, u = n.x1, s = (a + u) / 2; (o = i[0]) && e.push(new Hi(o, a, s)), (o = i[1]) && e.push(new Hi(o, s, u)) } r.push(n) } for (; n = r.pop();)t(n.node, n.x0, n.x1); return this }, Wi.x = function (t) { return arguments.length ? (this._x = t, this) : this._x }; var ro = to.prototype = no.prototype; function io(t, n, e, r, i) { if (isNaN(n) || isNaN(e) || isNaN(r)) return t; var o, a, u, s, l, c, h, f, d, p, g, y, v = t._root, _ = { data: i }, m = t._x0, x = t._y0, b = t._z0, w = t._x1, k = t._y1, M = t._z1; if (!v) return t._root = _, t; for (; v.length;)if ((f = n >= (a = (m + w) / 2)) ? m = a : w = a, (d = e >= (u = (x + k) / 2)) ? x = u : k = u, (p = r >= (s = (b + M) / 2)) ? b = s : M = s, o = v, !(v = v[g = p << 2 | d << 1 | f])) return o[g] = _, t; if (l = +t._x.call(null, v.data), c = +t._y.call(null, v.data), h = +t._z.call(null, v.data), n === l && e === c && r === h) return _.next = v, o ? o[g] = _ : t._root = _, t; do { o = o ? o[g] = new Array(8) : t._root = new Array(8), (f = n >= (a = (m + w) / 2)) ? m = a : w = a, (d = e >= (u = (x + k) / 2)) ? x = u : k = u, (p = r >= (s = (b + M) / 2)) ? b = s : M = s } while ((g = p << 2 | d << 1 | f) == (y = (h >= s) << 2 | (c >= u) << 1 | l >= a)); return o[y] = v, o[g] = _, t } function oo(t, n, e, r, i, o, a) { this.node = t, this.x0 = n, this.y0 = e, this.z0 = r, this.x1 = i, this.y1 = o, this.z1 = a } function ao(t) { return t[0] } function uo(t) { return t[1] } function so(t) { return t[2] } function lo(t, n, e, r) { var i = new co(null == n ? ao : n, null == e ? uo : e, null == r ? so : r, NaN, NaN, NaN, NaN, NaN, NaN); return null == t ? i : i.addAll(t) } function co(t, n, e, r, i, o, a, u, s) { this._x = t, this._y = n, this._z = e, this._x0 = r, this._y0 = i, this._z0 = o, this._x1 = a, this._y1 = u, this._z1 = s, this._root = void 0 } function ho(t) { for (var n = { data: t.data }, e = n; t = t.next;)e = e.next = { data: t.data }; return n } ro.copy = function () { var t, n, e = new no(this._x, this._y, this._x0, this._y0, this._x1, this._y1), r = this._root; if (!r) return e; if (!r.length) return e._root = eo(r), e; for (t = [{ source: r, target: e._root = new Array(4) }]; r = t.pop();)for (var i = 0; i < 4; ++i)(n = r.source[i]) && (n.length ? t.push({ source: n, target: r.target[i] = new Array(4) }) : r.target[i] = eo(n)); return e }, ro.add = function (t) { const n = +this._x.call(null, t), e = +this._y.call(null, t); return Zi(this.cover(n, e), n, e, t) }, ro.addAll = function (t) { var n, e, r, i, o = t.length, a = new Array(o), u = new Array(o), s = 1 / 0, l = 1 / 0, c = -1 / 0, h = -1 / 0; for (e = 0; e < o; ++e)isNaN(r = +this._x.call(null, n = t[e])) || isNaN(i = +this._y.call(null, n)) || (a[e] = r, u[e] = i, r < s && (s = r), r > c && (c = r), i < l && (l = i), i > h && (h = i)); if (s > c || l > h) return this; for (this.cover(s, l).cover(c, h), e = 0; e < o; ++e)Zi(this, a[e], u[e], t[e]); return this }, ro.cover = function (t, n) { if (isNaN(t = +t) || isNaN(n = +n)) return this; var e = this._x0, r = this._y0, i = this._x1, o = this._y1; if (isNaN(e)) i = (e = Math.floor(t)) + 1, o = (r = Math.floor(n)) + 1; else { for (var a, u, s = i - e || 1, l = this._root; e > t || t >= i || r > n || n >= o;)switch (u = (n < r) << 1 | t < e, (a = new Array(4))[u] = l, l = a, s *= 2, u) { case 0: i = e + s, o = r + s; break; case 1: e = i - s, o = r + s; break; case 2: i = e + s, r = o - s; break; case 3: e = i - s, r = o - s }this._root && this._root.length && (this._root = l) } return this._x0 = e, this._y0 = r, this._x1 = i, this._y1 = o, this }, ro.data = function () { var t = []; return this.visit((function (n) { if (!n.length) do { t.push(n.data) } while (n = n.next) })), t }, ro.extent = function (t) { return arguments.length ? this.cover(+t[0][0], +t[0][1]).cover(+t[1][0], +t[1][1]) : isNaN(this._x0) ? void 0 : [[this._x0, this._y0], [this._x1, this._y1]] }, ro.find = function (t, n, e) { var r, i, o, a, u, s, l, c = this._x0, h = this._y0, f = this._x1, d = this._y1, p = [], g = this._root; for (g && p.push(new Qi(g, c, h, f, d)), null == e ? e = 1 / 0 : (c = t - e, h = n - e, f = t + e, d = n + e, e *= e); s = p.pop();)if (!(!(g = s.node) || (i = s.x0) > f || (o = s.y0) > d || (a = s.x1) < c || (u = s.y1) < h)) if (g.length) { var y = (i + a) / 2, v = (o + u) / 2; p.push(new Qi(g[3], y, v, a, u), new Qi(g[2], i, v, y, u), new Qi(g[1], y, o, a, v), new Qi(g[0], i, o, y, v)), (l = (n >= v) << 1 | t >= y) && (s = p[p.length - 1], p[p.length - 1] = p[p.length - 1 - l], p[p.length - 1 - l] = s) } else { var _ = t - +this._x.call(null, g.data), m = n - +this._y.call(null, g.data), x = _ * _ + m * m; if (x < e) { var b = Math.sqrt(e = x); c = t - b, h = n - b, f = t + b, d = n + b, r = g.data } } return r }, ro.remove = function (t) { if (isNaN(o = +this._x.call(null, t)) || isNaN(a = +this._y.call(null, t))) return this; var n, e, r, i, o, a, u, s, l, c, h, f, d = this._root, p = this._x0, g = this._y0, y = this._x1, v = this._y1; if (!d) return this; if (d.length) for (; ;) { if ((l = o >= (u = (p + y) / 2)) ? p = u : y = u, (c = a >= (s = (g + v) / 2)) ? g = s : v = s, n = d, !(d = d[h = c << 1 | l])) return this; if (!d.length) break; (n[h + 1 & 3] || n[h + 2 & 3] || n[h + 3 & 3]) && (e = n, f = h) } for (; d.data !== t;)if (r = d, !(d = d.next)) return this; return (i = d.next) && delete d.next, r ? (i ? r.next = i : delete r.next, this) : n ? (i ? n[h] = i : delete n[h], (d = n[0] || n[1] || n[2] || n[3]) && d === (n[3] || n[2] || n[1] || n[0]) && !d.length && (e ? e[f] = d : this._root = d), this) : (this._root = i, this) }, ro.removeAll = function (t) { for (var n = 0, e = t.length; n < e; ++n)this.remove(t[n]); return this }, ro.root = function () { return this._root }, ro.size = function () { var t = 0; return this.visit((function (n) { if (!n.length) do { ++t } while (n = n.next) })), t }, ro.visit = function (t) { var n, e, r, i, o, a, u = [], s = this._root; for (s && u.push(new Qi(s, this._x0, this._y0, this._x1, this._y1)); n = u.pop();)if (!t(s = n.node, r = n.x0, i = n.y0, o = n.x1, a = n.y1) && s.length) { var l = (r + o) / 2, c = (i + a) / 2; (e = s[3]) && u.push(new Qi(e, l, c, o, a)), (e = s[2]) && u.push(new Qi(e, r, c, l, a)), (e = s[1]) && u.push(new Qi(e, l, i, o, c)), (e = s[0]) && u.push(new Qi(e, r, i, l, c)) } return this }, ro.visitAfter = function (t) { var n, e = [], r = []; for (this._root && e.push(new Qi(this._root, this._x0, this._y0, this._x1, this._y1)); n = e.pop();) { var i = n.node; if (i.length) { var o, a = n.x0, u = n.y0, s = n.x1, l = n.y1, c = (a + s) / 2, h = (u + l) / 2; (o = i[0]) && e.push(new Qi(o, a, u, c, h)), (o = i[1]) && e.push(new Qi(o, c, u, s, h)), (o = i[2]) && e.push(new Qi(o, a, h, c, l)), (o = i[3]) && e.push(new Qi(o, c, h, s, l)) } r.push(n) } for (; n = r.pop();)t(n.node, n.x0, n.y0, n.x1, n.y1); return this }, ro.x = function (t) { return arguments.length ? (this._x = t, this) : this._x }, ro.y = function (t) { return arguments.length ? (this._y = t, this) : this._y }; var fo = lo.prototype = co.prototype; function po(t) { return function () { return t } } function go(t) { return 1e-6 * (t() - .5) } function yo(t) { return t.index } function vo(t, n) { var e = t.get(n); if (!e) throw new Error("node not found: " + n); return e } function _o(t) { var n, e, r, i, o, a, u, s = yo, l = function (t) { return 1 / Math.min(o[t.source.index], o[t.target.index]) }, c = po(30), h = 1; function f(r) { for (var o = 0, s = t.length; o < h; ++o)for (var l, c, f, d, p, g = 0, y = 0, v = 0, _ = 0; g < s; ++g)c = (l = t[g]).source, y = (f = l.target).x + f.vx - c.x - c.vx || go(u), i > 1 && (v = f.y + f.vy - c.y - c.vy || go(u)), i > 2 && (_ = f.z + f.vz - c.z - c.vz || go(u)), y *= d = ((d = Math.sqrt(y * y + v * v + _ * _)) - e[g]) / d * r * n[g], v *= d, _ *= d, f.vx -= y * (p = a[g]), i > 1 && (f.vy -= v * p), i > 2 && (f.vz -= _ * p), c.vx += y * (p = 1 - p), i > 1 && (c.vy += v * p), i > 2 && (c.vz += _ * p) } function d() { if (r) { var i, u, l = r.length, c = t.length, h = new Map(r.map(((t, n) => [s(t, n, r), t]))); for (i = 0, o = new Array(l); i < c; ++i)(u = t[i]).index = i, "object" != typeof u.source && (u.source = vo(h, u.source)), "object" != typeof u.target && (u.target = vo(h, u.target)), o[u.source.index] = (o[u.source.index] || 0) + 1, o[u.target.index] = (o[u.target.index] || 0) + 1; for (i = 0, a = new Array(c); i < c; ++i)u = t[i], a[i] = o[u.source.index] / (o[u.source.index] + o[u.target.index]); n = new Array(c), p(), e = new Array(c), g() } } function p() { if (r) for (var e = 0, i = t.length; e < i; ++e)n[e] = +l(t[e], e, t) } function g() { if (r) for (var n = 0, i = t.length; n < i; ++n)e[n] = +c(t[n], n, t) } return null == t && (t = []), f.initialize = function (t, ...n) { r = t, u = n.find((t => "function" == typeof t)) || Math.random, i = n.find((t => [1, 2, 3].includes(t))) || 2, d() }, f.links = function (n) { return arguments.length ? (t = n, d(), f) : t }, f.id = function (t) { return arguments.length ? (s = t, f) : s }, f.iterations = function (t) { return arguments.length ? (h = +t, f) : h }, f.strength = function (t) { return arguments.length ? (l = "function" == typeof t ? t : po(+t), p(), f) : l }, f.distance = function (t) { return arguments.length ? (c = "function" == typeof t ? t : po(+t), g(), f) : c }, f } fo.copy = function () { var t, n, e = new co(this._x, this._y, this._z, this._x0, this._y0, this._z0, this._x1, this._y1, this._z1), r = this._root; if (!r) return e; if (!r.length) return e._root = ho(r), e; for (t = [{ source: r, target: e._root = new Array(8) }]; r = t.pop();)for (var i = 0; i < 8; ++i)(n = r.source[i]) && (n.length ? t.push({ source: n, target: r.target[i] = new Array(8) }) : r.target[i] = ho(n)); return e }, fo.add = function (t) { var n = +this._x.call(null, t), e = +this._y.call(null, t), r = +this._z.call(null, t); return io(this.cover(n, e, r), n, e, r, t) }, fo.addAll = function (t) { var n, e, r, i, o, a = t.length, u = new Array(a), s = new Array(a), l = new Array(a), c = 1 / 0, h = 1 / 0, f = 1 / 0, d = -1 / 0, p = -1 / 0, g = -1 / 0; for (e = 0; e < a; ++e)isNaN(r = +this._x.call(null, n = t[e])) || isNaN(i = +this._y.call(null, n)) || isNaN(o = +this._z.call(null, n)) || (u[e] = r, s[e] = i, l[e] = o, r < c && (c = r), r > d && (d = r), i < h && (h = i), i > p && (p = i), o < f && (f = o), o > g && (g = o)); if (c > d || h > p || f > g) return this; for (this.cover(c, h, f).cover(d, p, g), e = 0; e < a; ++e)io(this, u[e], s[e], l[e], t[e]); return this }, fo.cover = function (t, n, e) { if (isNaN(t = +t) || isNaN(n = +n) || isNaN(e = +e)) return this; var r = this._x0, i = this._y0, o = this._z0, a = this._x1, u = this._y1, s = this._z1; if (isNaN(r)) a = (r = Math.floor(t)) + 1, u = (i = Math.floor(n)) + 1, s = (o = Math.floor(e)) + 1; else { for (var l, c, h = a - r || 1, f = this._root; r > t || t >= a || i > n || n >= u || o > e || e >= s;)switch (c = (e < o) << 2 | (n < i) << 1 | t < r, (l = new Array(8))[c] = f, f = l, h *= 2, c) { case 0: a = r + h, u = i + h, s = o + h; break; case 1: r = a - h, u = i + h, s = o + h; break; case 2: a = r + h, i = u - h, s = o + h; break; case 3: r = a - h, i = u - h, s = o + h; break; case 4: a = r + h, u = i + h, o = s - h; break; case 5: r = a - h, u = i + h, o = s - h; break; case 6: a = r + h, i = u - h, o = s - h; break; case 7: r = a - h, i = u - h, o = s - h }this._root && this._root.length && (this._root = f) } return this._x0 = r, this._y0 = i, this._z0 = o, this._x1 = a, this._y1 = u, this._z1 = s, this }, fo.data = function () { var t = []; return this.visit((function (n) { if (!n.length) do { t.push(n.data) } while (n = n.next) })), t }, fo.extent = function (t) { return arguments.length ? this.cover(+t[0][0], +t[0][1], +t[0][2]).cover(+t[1][0], +t[1][1], +t[1][2]) : isNaN(this._x0) ? void 0 : [[this._x0, this._y0, this._z0], [this._x1, this._y1, this._z1]] }, fo.find = function (t, n, e, r) { var i, o, a, u, s, l, c, h, f, d = this._x0, p = this._y0, g = this._z0, y = this._x1, v = this._y1, _ = this._z1, m = [], x = this._root; for (x && m.push(new oo(x, d, p, g, y, v, _)), null == r ? r = 1 / 0 : (d = t - r, p = n - r, g = e - r, y = t + r, v = n + r, _ = e + r, r *= r); h = m.pop();)if (!(!(x = h.node) || (o = h.x0) > y || (a = h.y0) > v || (u = h.z0) > _ || (s = h.x1) < d || (l = h.y1) < p || (c = h.z1) < g)) if (x.length) { var b = (o + s) / 2, w = (a + l) / 2, k = (u + c) / 2; m.push(new oo(x[7], b, w, k, s, l, c), new oo(x[6], o, w, k, b, l, c), new oo(x[5], b, a, k, s, w, c), new oo(x[4], o, a, k, b, w, c), new oo(x[3], b, w, u, s, l, k), new oo(x[2], o, w, u, b, l, k), new oo(x[1], b, a, u, s, w, k), new oo(x[0], o, a, u, b, w, k)), (f = (e >= k) << 2 | (n >= w) << 1 | t >= b) && (h = m[m.length - 1], m[m.length - 1] = m[m.length - 1 - f], m[m.length - 1 - f] = h) } else { var M = t - +this._x.call(null, x.data), z = n - +this._y.call(null, x.data), A = e - +this._z.call(null, x.data), S = M * M + z * z + A * A; if (S < r) { var C = Math.sqrt(r = S); d = t - C, p = n - C, g = e - C, y = t + C, v = n + C, _ = e + C, i = x.data } } return i }, fo.remove = function (t) { if (isNaN(o = +this._x.call(null, t)) || isNaN(a = +this._y.call(null, t)) || isNaN(u = +this._z.call(null, t))) return this; var n, e, r, i, o, a, u, s, l, c, h, f, d, p, g, y = this._root, v = this._x0, _ = this._y0, m = this._z0, x = this._x1, b = this._y1, w = this._z1; if (!y) return this; if (y.length) for (; ;) { if ((h = o >= (s = (v + x) / 2)) ? v = s : x = s, (f = a >= (l = (_ + b) / 2)) ? _ = l : b = l, (d = u >= (c = (m + w) / 2)) ? m = c : w = c, n = y, !(y = y[p = d << 2 | f << 1 | h])) return this; if (!y.length) break; (n[p + 1 & 7] || n[p + 2 & 7] || n[p + 3 & 7] || n[p + 4 & 7] || n[p + 5 & 7] || n[p + 6 & 7] || n[p + 7 & 7]) && (e = n, g = p) } for (; y.data !== t;)if (r = y, !(y = y.next)) return this; return (i = y.next) && delete y.next, r ? (i ? r.next = i : delete r.next, this) : n ? (i ? n[p] = i : delete n[p], (y = n[0] || n[1] || n[2] || n[3] || n[4] || n[5] || n[6] || n[7]) && y === (n[7] || n[6] || n[5] || n[4] || n[3] || n[2] || n[1] || n[0]) && !y.length && (e ? e[g] = y : this._root = y), this) : (this._root = i, this) }, fo.removeAll = function (t) { for (var n = 0, e = t.length; n < e; ++n)this.remove(t[n]); return this }, fo.root = function () { return this._root }, fo.size = function () { var t = 0; return this.visit((function (n) { if (!n.length) do { ++t } while (n = n.next) })), t }, fo.visit = function (t) { var n, e, r, i, o, a, u, s, l = [], c = this._root; for (c && l.push(new oo(c, this._x0, this._y0, this._z0, this._x1, this._y1, this._z1)); n = l.pop();)if (!t(c = n.node, r = n.x0, i = n.y0, o = n.z0, a = n.x1, u = n.y1, s = n.z1) && c.length) { var h = (r + a) / 2, f = (i + u) / 2, d = (o + s) / 2; (e = c[7]) && l.push(new oo(e, h, f, d, a, u, s)), (e = c[6]) && l.push(new oo(e, r, f, d, h, u, s)), (e = c[5]) && l.push(new oo(e, h, i, d, a, f, s)), (e = c[4]) && l.push(new oo(e, r, i, d, h, f, s)), (e = c[3]) && l.push(new oo(e, h, f, o, a, u, d)), (e = c[2]) && l.push(new oo(e, r, f, o, h, u, d)), (e = c[1]) && l.push(new oo(e, h, i, o, a, f, d)), (e = c[0]) && l.push(new oo(e, r, i, o, h, f, d)) } return this }, fo.visitAfter = function (t) { var n, e = [], r = []; for (this._root && e.push(new oo(this._root, this._x0, this._y0, this._z0, this._x1, this._y1, this._z1)); n = e.pop();) { var i = n.node; if (i.length) { var o, a = n.x0, u = n.y0, s = n.z0, l = n.x1, c = n.y1, h = n.z1, f = (a + l) / 2, d = (u + c) / 2, p = (s + h) / 2; (o = i[0]) && e.push(new oo(o, a, u, s, f, d, p)), (o = i[1]) && e.push(new oo(o, f, u, s, l, d, p)), (o = i[2]) && e.push(new oo(o, a, d, s, f, c, p)), (o = i[3]) && e.push(new oo(o, f, d, s, l, c, p)), (o = i[4]) && e.push(new oo(o, a, u, p, f, d, h)), (o = i[5]) && e.push(new oo(o, f, u, p, l, d, h)), (o = i[6]) && e.push(new oo(o, a, d, p, f, c, h)), (o = i[7]) && e.push(new oo(o, f, d, p, l, c, h)) } r.push(n) } for (; n = r.pop();)t(n.node, n.x0, n.y0, n.z0, n.x1, n.y1, n.z1); return this }, fo.x = function (t) { return arguments.length ? (this._x = t, this) : this._x }, fo.y = function (t) { return arguments.length ? (this._y = t, this) : this._y }, fo.z = function (t) { return arguments.length ? (this._z = t, this) : this._z }; const mo = 4294967296; function xo(t) { return t.x } function bo(t) { return t.y } function wo(t) { return t.z } var ko = Math.PI * (3 - Math.sqrt(5)), Mo = 20 * Math.PI / (9 + Math.sqrt(221)); function zo(t, n) { n = n || 2; var e, r = Math.min(3, Math.max(1, Math.round(n))), i = 1, o = .001, a = 1 - Math.pow(o, 1 / 300), u = 0, s = .6, l = new Map, c = ie(d), h = Et("tick", "end"), f = function () { let t = 1; return () => (t = (1664525 * t + 1013904223) % mo) / mo }(); function d() { p(), h.call("tick", e), i < o && (c.stop(), h.call("end", e)) } function p(n) { var o, c, h = t.length; void 0 === n && (n = 1); for (var f = 0; f < n; ++f)for (i += (u - i) * a, l.forEach((function (t) { t(i) })), o = 0; o < h; ++o)null == (c = t[o]).fx ? c.x += c.vx *= s : (c.x = c.fx, c.vx = 0), r > 1 && (null == c.fy ? c.y += c.vy *= s : (c.y = c.fy, c.vy = 0)), r > 2 && (null == c.fz ? c.z += c.vz *= s : (c.z = c.fz, c.vz = 0)); return e } function g() { for (var n, e = 0, i = t.length; e < i; ++e) { if ((n = t[e]).index = e, null != n.fx && (n.x = n.fx), null != n.fy && (n.y = n.fy), null != n.fz && (n.z = n.fz), isNaN(n.x) || r > 1 && isNaN(n.y) || r > 2 && isNaN(n.z)) { var o = 10 * (r > 2 ? Math.cbrt(.5 + e) : r > 1 ? Math.sqrt(.5 + e) : e), a = e * ko, u = e * Mo; 1 === r ? n.x = o : 2 === r ? (n.x = o * Math.cos(a), n.y = o * Math.sin(a)) : (n.x = o * Math.sin(a) * Math.cos(u), n.y = o * Math.cos(a), n.z = o * Math.sin(a) * Math.sin(u)) } (isNaN(n.vx) || r > 1 && isNaN(n.vy) || r > 2 && isNaN(n.vz)) && (n.vx = 0, r > 1 && (n.vy = 0), r > 2 && (n.vz = 0)) } } function y(n) { return n.initialize && n.initialize(t, f, r), n } return null == t && (t = []), g(), e = { tick: p, restart: function () { return c.restart(d), e }, stop: function () { return c.stop(), e }, numDimensions: function (t) { return arguments.length ? (r = Math.min(3, Math.max(1, Math.round(t))), l.forEach(y), e) : r }, nodes: function (n) { return arguments.length ? (t = n, g(), l.forEach(y), e) : t }, alpha: function (t) { return arguments.length ? (i = +t, e) : i }, alphaMin: function (t) { return arguments.length ? (o = +t, e) : o }, alphaDecay: function (t) { return arguments.length ? (a = +t, e) : +a }, alphaTarget: function (t) { return arguments.length ? (u = +t, e) : u }, velocityDecay: function (t) { return arguments.length ? (s = 1 - t, e) : 1 - s }, randomSource: function (t) { return arguments.length ? (f = t, l.forEach(y), e) : f }, force: function (t, n) { return arguments.length > 1 ? (null == n ? l.delete(t) : l.set(t, y(n)), e) : l.get(t) }, find: function () { var n, e, i, o, a, u, s = Array.prototype.slice.call(arguments), l = s.shift() || 0, c = (r > 1 ? s.shift() : null) || 0, h = (r > 2 ? s.shift() : null) || 0, f = s.shift() || 1 / 0, d = 0, p = t.length; for (f *= f, d = 0; d < p; ++d)(o = (n = l - (a = t[d]).x) * n + (e = c - (a.y || 0)) * e + (i = h - (a.z || 0)) * i) < f && (u = a, f = o); return u }, on: function (t, n) { return arguments.length > 1 ? (h.on(t, n), e) : h.on(t) } } } function Ao() { var t, n, e, r, i, o, a = po(-30), u = 1, s = 1 / 0, l = .81; function c(r) { var o, a = t.length, u = (1 === n ? Gi(t, xo) : 2 === n ? to(t, xo, bo) : 3 === n ? lo(t, xo, bo, wo) : null).visitAfter(f); for (i = r, o = 0; o < a; ++o)e = t[o], u.visit(d) } function h() { if (t) { var n, e, r = t.length; for (o = new Array(r), n = 0; n < r; ++n)e = t[n], o[e.index] = +a(e, n, t) } } function f(t) { var e, r, i, a, u, s, l = 0, c = 0, h = t.length; if (h) { for (i = a = u = s = 0; s < h; ++s)(e = t[s]) && (r = Math.abs(e.value)) && (l += e.value, c += r, i += r * (e.x || 0), a += r * (e.y || 0), u += r * (e.z || 0)); l *= Math.sqrt(4 / h), t.x = i / c, n > 1 && (t.y = a / c), n > 2 && (t.z = u / c) } else { (e = t).x = e.data.x, n > 1 && (e.y = e.data.y), n > 2 && (e.z = e.data.z); do { l += o[e.data.index] } while (e = e.next) } t.value = l } function d(t, a, c, h, f) { if (!t.value) return !0; var d = [c, h, f][n - 1], p = t.x - e.x, g = n > 1 ? t.y - e.y : 0, y = n > 2 ? t.z - e.z : 0, v = d - a, _ = p * p + g * g + y * y; if (v * v / l < _) return _ < s && (0 === p && (_ += (p = go(r)) * p), n > 1 && 0 === g && (_ += (g = go(r)) * g), n > 2 && 0 === y && (_ += (y = go(r)) * y), _ < u && (_ = Math.sqrt(u * _)), e.vx += p * t.value * i / _, n > 1 && (e.vy += g * t.value * i / _), n > 2 && (e.vz += y * t.value * i / _)), !0; if (!(t.length || _ >= s)) { (t.data !== e || t.next) && (0 === p && (_ += (p = go(r)) * p), n > 1 && 0 === g && (_ += (g = go(r)) * g), n > 2 && 0 === y && (_ += (y = go(r)) * y), _ < u && (_ = Math.sqrt(u * _))); do { t.data !== e && (v = o[t.data.index] * i / _, e.vx += p * v, n > 1 && (e.vy += g * v), n > 2 && (e.vz += y * v)) } while (t = t.next) } } return c.initialize = function (e, ...i) { t = e, r = i.find((t => "function" == typeof t)) || Math.random, n = i.find((t => [1, 2, 3].includes(t))) || 2, h() }, c.strength = function (t) { return arguments.length ? (a = "function" == typeof t ? t : po(+t), h(), c) : a }, c.distanceMin = function (t) { return arguments.length ? (u = t * t, c) : Math.sqrt(u) }, c.distanceMax = function (t) { return arguments.length ? (s = t * t, c) : Math.sqrt(s) }, c.theta = function (t) { return arguments.length ? (l = t * t, c) : Math.sqrt(l) }, c } const { abs: So, cos: Co, sin: Eo, acos: No, atan2: Po, sqrt: Oo, pow: To } = Math; function jo(t) { return t < 0 ? -To(-t, 1 / 3) : To(t, 1 / 3) } const Ro = Math.PI, Do = 2 * Ro, Io = Ro / 2, Uo = Number.MAX_SAFE_INTEGER || 9007199254740991, Fo = Number.MIN_SAFE_INTEGER || -9007199254740991, Lo = { x: 0, y: 0, z: 0 }, qo = { Tvalues: [-.06405689286260563, .06405689286260563, -.1911188674736163, .1911188674736163, -.3150426796961634, .3150426796961634, -.4337935076260451, .4337935076260451, -.5454214713888396, .5454214713888396, -.6480936519369755, .6480936519369755, -.7401241915785544, .7401241915785544, -.820001985973903, .820001985973903, -.8864155270044011, .8864155270044011, -.9382745520027328, .9382745520027328, -.9747285559713095, .9747285559713095, -.9951872199970213, .9951872199970213], Cvalues: [.12793819534675216, .12793819534675216, .1258374563468283, .1258374563468283, .12167047292780339, .12167047292780339, .1155056680537256, .1155056680537256, .10744427011596563, .10744427011596563, .09761865210411388, .09761865210411388, .08619016153195327, .08619016153195327, .0733464814110803, .0733464814110803, .05929858491543678, .05929858491543678, .04427743881741981, .04427743881741981, .028531388628933663, .028531388628933663, .0123412297999872, .0123412297999872], arcfn: function (t, n) { const e = n(t); let r = e.x * e.x + e.y * e.y; return void 0 !== e.z && (r += e.z * e.z), Oo(r) }, compute: function (t, n, e) { if (0 === t) return n[0].t = 0, n[0]; const r = n.length - 1; if (1 === t) return n[r].t = 1, n[r]; const i = 1 - t; let o = n; if (0 === r) return n[0].t = t, n[0]; if (1 === r) { const n = { x: i * o[0].x + t * o[1].x, y: i * o[0].y + t * o[1].y, t: t }; return e && (n.z = i * o[0].z + t * o[1].z), n } if (r < 4) { let n, a, u, s = i * i, l = t * t, c = 0; 2 === r ? (o = [o[0], o[1], o[2], Lo], n = s, a = i * t * 2, u = l) : 3 === r && (n = s * i, a = s * t * 3, u = i * l * 3, c = t * l); const h = { x: n * o[0].x + a * o[1].x + u * o[2].x + c * o[3].x, y: n * o[0].y + a * o[1].y + u * o[2].y + c * o[3].y, t: t }; return e && (h.z = n * o[0].z + a * o[1].z + u * o[2].z + c * o[3].z), h } const a = JSON.parse(JSON.stringify(n)); for (; a.length > 1;) { for (let n = 0; n < a.length - 1; n++)a[n] = { x: a[n].x + (a[n + 1].x - a[n].x) * t, y: a[n].y + (a[n + 1].y - a[n].y) * t }, void 0 !== a[n].z && (a[n] = a[n].z + (a[n + 1].z - a[n].z) * t); a.splice(a.length - 1, 1) } return a[0].t = t, a[0] }, computeWithRatios: function (t, n, e, r) { const i = 1 - t, o = e, a = n; let u, s = o[0], l = o[1], c = o[2], h = o[3]; return s *= i, l *= t, 2 === a.length ? (u = s + l, { x: (s * a[0].x + l * a[1].x) / u, y: (s * a[0].y + l * a[1].y) / u, z: !!r && (s * a[0].z + l * a[1].z) / u, t: t }) : (s *= i, l *= 2 * i, c *= t * t, 3 === a.length ? (u = s + l + c, { x: (s * a[0].x + l * a[1].x + c * a[2].x) / u, y: (s * a[0].y + l * a[1].y + c * a[2].y) / u, z: !!r && (s * a[0].z + l * a[1].z + c * a[2].z) / u, t: t }) : (s *= i, l *= 1.5 * i, c *= 3 * i, h *= t * t * t, 4 === a.length ? (u = s + l + c + h, { x: (s * a[0].x + l * a[1].x + c * a[2].x + h * a[3].x) / u, y: (s * a[0].y + l * a[1].y + c * a[2].y + h * a[3].y) / u, z: !!r && (s * a[0].z + l * a[1].z + c * a[2].z + h * a[3].z) / u, t: t }) : void 0)) }, derive: function (t, n) { const e = []; for (let r = t, i = r.length, o = i - 1; i > 1; i--, o--) { const t = []; for (let e, i = 0; i < o; i++)e = { x: o * (r[i + 1].x - r[i].x), y: o * (r[i + 1].y - r[i].y) }, n && (e.z = o * (r[i + 1].z - r[i].z)), t.push(e); e.push(t), r = t } return e }, between: function (t, n, e) { return n <= t && t <= e || qo.approximately(t, n) || qo.approximately(t, e) }, approximately: function (t, n, e) { return So(t - n) <= (e || 1e-6) }, length: function (t) { const n = qo.Tvalues.length; let e = 0; for (let r, i = 0; i < n; i++)r = .5 * qo.Tvalues[i] + .5, e += qo.Cvalues[i] * qo.arcfn(r, t); return .5 * e }, map: function (t, n, e, r, i) { return r + (i - r) * ((t - n) / (e - n)) }, lerp: function (t, n, e) { const r = { x: n.x + t * (e.x - n.x), y: n.y + t * (e.y - n.y) }; return void 0 !== n.z && void 0 !== e.z && (r.z = n.z + t * (e.z - n.z)), r }, pointToString: function (t) { let n = t.x + "/" + t.y; return void 0 !== t.z && (n += "/" + t.z), n }, pointsToString: function (t) { return "[" + t.map(qo.pointToString).join(", ") + "]" }, copy: function (t) { return JSON.parse(JSON.stringify(t)) }, angle: function (t, n, e) { const r = n.x - t.x, i = n.y - t.y, o = e.x - t.x, a = e.y - t.y; return Po(r * a - i * o, r * o + i * a) }, round: function (t, n) { const e = "" + t, r = e.indexOf("."); return parseFloat(e.substring(0, r + 1 + n)) }, dist: function (t, n) { const e = t.x - n.x, r = t.y - n.y; return Oo(e * e + r * r) }, closest: function (t, n) { let e, r, i = To(2, 63); return t.forEach((function (t, o) { r = qo.dist(n, t), r < i && (i = r, e = o) })), { mdist: i, mpos: e } }, abcratio: function (t, n) { if (2 !== n && 3 !== n) return !1; if (void 0 === t) t = .5; else if (0 === t || 1 === t) return t; const e = To(t, n) + To(1 - t, n); return So((e - 1) / e) }, projectionratio: function (t, n) { if (2 !== n && 3 !== n) return !1; if (void 0 === t) t = .5; else if (0 === t || 1 === t) return t; const e = To(1 - t, n); return e / (To(t, n) + e) }, lli8: function (t, n, e, r, i, o, a, u) { const s = (t - e) * (o - u) - (n - r) * (i - a); return 0 != s && { x: ((t * r - n * e) * (i - a) - (t - e) * (i * u - o * a)) / s, y: ((t * r - n * e) * (o - u) - (n - r) * (i * u - o * a)) / s } }, lli4: function (t, n, e, r) { const i = t.x, o = t.y, a = n.x, u = n.y, s = e.x, l = e.y, c = r.x, h = r.y; return qo.lli8(i, o, a, u, s, l, c, h) }, lli: function (t, n) { return qo.lli4(t, t.c, n, n.c) }, makeline: function (t, n) { return new Qo(t.x, t.y, (t.x + n.x) / 2, (t.y + n.y) / 2, n.x, n.y) }, findbbox: function (t) { let n = Uo, e = Uo, r = Fo, i = Fo; return t.forEach((function (t) { const o = t.bbox(); n > o.x.min && (n = o.x.min), e > o.y.min && (e = o.y.min), r < o.x.max && (r = o.x.max), i < o.y.max && (i = o.y.max) })), { x: { min: n, mid: (n + r) / 2, max: r, size: r - n }, y: { min: e, mid: (e + i) / 2, max: i, size: i - e } } }, shapeintersections: function (t, n, e, r, i) { if (!qo.bboxoverlap(n, r)) return []; const o = [], a = [t.startcap, t.forward, t.back, t.endcap], u = [e.startcap, e.forward, e.back, e.endcap]; return a.forEach((function (n) { n.virtual || u.forEach((function (r) { if (r.virtual) return; const a = n.intersects(r, i); a.length > 0 && (a.c1 = n, a.c2 = r, a.s1 = t, a.s2 = e, o.push(a)) })) })), o }, makeshape: function (t, n, e) { const r = n.points.length, i = t.points.length, o = qo.makeline(n.points[r - 1], t.points[0]), a = qo.makeline(t.points[i - 1], n.points[0]), u = { startcap: o, forward: t, back: n, endcap: a, bbox: qo.findbbox([o, t, n, a]), intersections: function (t) { return qo.shapeintersections(u, u.bbox, t, t.bbox, e) } }; return u }, getminmax: function (t, n, e) { if (!e) return { min: 0, max: 0 }; let r, i, o = Uo, a = Fo; -1 === e.indexOf(0) && (e = [0].concat(e)), -1 === e.indexOf(1) && e.push(1); for (let u = 0, s = e.length; u < s; u++)r = e[u], i = t.get(r), i[n] < o && (o = i[n]), i[n] > a && (a = i[n]); return { min: o, mid: (o + a) / 2, max: a, size: a - o } }, align: function (t, n) { const e = n.p1.x, r = n.p1.y, i = -Po(n.p2.y - r, n.p2.x - e); return t.map((function (t) { return { x: (t.x - e) * Co(i) - (t.y - r) * Eo(i), y: (t.x - e) * Eo(i) + (t.y - r) * Co(i) } })) }, roots: function (t, n) { n = n || { p1: { x: 0, y: 0 }, p2: { x: 1, y: 0 } }; const e = t.length - 1, r = qo.align(t, n), i = function (t) { return 0 <= t && t <= 1 }; if (2 === e) { const t = r[0].y, n = r[1].y, e = r[2].y, o = t - 2 * n + e; if (0 !== o) { const r = -Oo(n * n - t * e), a = -t + n; return [-(r + a) / o, -(-r + a) / o].filter(i) } return n !== e && 0 === o ? [(2 * n - e) / (2 * n - 2 * e)].filter(i) : [] } const o = r[0].y, a = r[1].y, u = r[2].y; let s = 3 * a - o - 3 * u + r[3].y, l = 3 * o - 6 * a + 3 * u, c = -3 * o + 3 * a, h = o; if (qo.approximately(s, 0)) { if (qo.approximately(l, 0)) return qo.approximately(c, 0) ? [] : [-h / c].filter(i); const t = Oo(c * c - 4 * l * h), n = 2 * l; return [(t - c) / n, (-c - t) / n].filter(i) } l /= s, c /= s, h /= s; const f = (3 * c - l * l) / 3, d = f / 3, p = (2 * l * l * l - 9 * l * c + 27 * h) / 27, g = p / 2, y = g * g + d * d * d; let v, _, m, x, b; if (y < 0) { const t = -f / 3, n = Oo(t * t * t), e = -p / (2 * n), r = No(e < -1 ? -1 : e > 1 ? 1 : e), o = 2 * jo(n); return m = o * Co(r / 3) - l / 3, x = o * Co((r + Do) / 3) - l / 3, b = o * Co((r + 2 * Do) / 3) - l / 3, [m, x, b].filter(i) } if (0 === y) return v = g < 0 ? jo(-g) : -jo(g), m = 2 * v - l / 3, x = -v - l / 3, [m, x].filter(i); { const t = Oo(y); return v = jo(-g + t), _ = jo(g + t), [v - _ - l / 3].filter(i) } }, droots: function (t) { if (3 === t.length) { const n = t[0], e = t[1], r = t[2], i = n - 2 * e + r; if (0 !== i) { const t = -Oo(e * e - n * r), o = -n + e; return [-(t + o) / i, -(-t + o) / i] } return e !== r && 0 === i ? [(2 * e - r) / (2 * (e - r))] : [] } if (2 === t.length) { const n = t[0], e = t[1]; return n !== e ? [n / (n - e)] : [] } return [] }, curvature: function (t, n, e, r, i) { let o, a, u, s, l = 0, c = 0; const h = qo.compute(t, n), f = qo.compute(t, e), d = h.x * h.x + h.y * h.y; if (r ? (o = Oo(To(h.y * f.z - f.y * h.z, 2) + To(h.z * f.x - f.z * h.x, 2) + To(h.x * f.y - f.x * h.y, 2)), a = To(d + h.z * h.z, 1.5)) : (o = h.x * f.y - h.y * f.x, a = To(d, 1.5)), 0 === o || 0 === a) return { k: 0, r: 0 }; if (l = o / a, c = a / o, !i) { const i = qo.curvature(t - .001, n, e, r, !0).k, o = qo.curvature(t + .001, n, e, r, !0).k; s = (o - l + (l - i)) / 2, u = (So(o - l) + So(l - i)) / 2 } return { k: l, r: c, dk: s, adk: u } }, inflections: function (t) { if (t.length < 4) return []; const n = qo.align(t, { p1: t[0], p2: t.slice(-1)[0] }), e = n[2].x * n[1].y, r = n[3].x * n[1].y, i = n[1].x * n[2].y, o = 18 * (-3 * e + 2 * r + 3 * i - n[3].x * n[2].y), a = 18 * (3 * e - r - 3 * i), u = 18 * (i - e); if (qo.approximately(o, 0)) { if (!qo.approximately(a, 0)) { let t = -u / a; if (0 <= t && t <= 1) return [t] } return [] } const s = 2 * o; if (qo.approximately(s, 0)) return []; const l = a * a - 4 * o * u; if (l < 0) return []; const c = Math.sqrt(l); return [(c - a) / s, -(a + c) / s].filter((function (t) { return 0 <= t && t <= 1 })) }, bboxoverlap: function (t, n) { const e = ["x", "y"], r = e.length; for (let i, o, a, u, s = 0; s < r; s++)if (i = e[s], o = t[i].mid, a = n[i].mid, u = (t[i].size + n[i].size) / 2, So(o - a) >= u) return !1; return !0 }, expandbox: function (t, n) { n.x.min < t.x.min && (t.x.min = n.x.min), n.y.min < t.y.min && (t.y.min = n.y.min), n.z && n.z.min < t.z.min && (t.z.min = n.z.min), n.x.max > t.x.max && (t.x.max = n.x.max), n.y.max > t.y.max && (t.y.max = n.y.max), n.z && n.z.max > t.z.max && (t.z.max = n.z.max), t.x.mid = (t.x.min + t.x.max) / 2, t.y.mid = (t.y.min + t.y.max) / 2, t.z && (t.z.mid = (t.z.min + t.z.max) / 2), t.x.size = t.x.max - t.x.min, t.y.size = t.y.max - t.y.min, t.z && (t.z.size = t.z.max - t.z.min) }, pairiteration: function (t, n, e) { const r = t.bbox(), i = n.bbox(), o = 1e5, a = e || .5; if (r.x.size + r.y.size < a && i.x.size + i.y.size < a) return [(o * (t._t1 + t._t2) / 2 | 0) / o + "/" + (o * (n._t1 + n._t2) / 2 | 0) / o]; let u = t.split(.5), s = n.split(.5), l = [{ left: u.left, right: s.left }, { left: u.left, right: s.right }, { left: u.right, right: s.right }, { left: u.right, right: s.left }]; l = l.filter((function (t) { return qo.bboxoverlap(t.left.bbox(), t.right.bbox()) })); let c = []; return 0 === l.length || (l.forEach((function (t) { c = c.concat(qo.pairiteration(t.left, t.right, a)) })), c = c.filter((function (t, n) { return c.indexOf(t) === n }))), c }, getccenter: function (t, n, e) { const r = n.x - t.x, i = n.y - t.y, o = e.x - n.x, a = e.y - n.y, u = r * Co(Io) - i * Eo(Io), s = r * Eo(Io) + i * Co(Io), l = o * Co(Io) - a * Eo(Io), c = o * Eo(Io) + a * Co(Io), h = (t.x + n.x) / 2, f = (t.y + n.y) / 2, d = (n.x + e.x) / 2, p = (n.y + e.y) / 2, g = h + u, y = f + s, v = d + l, _ = p + c, m = qo.lli8(h, f, g, y, d, p, v, _), x = qo.dist(m, t); let b, w = Po(t.y - m.y, t.x - m.x), k = Po(n.y - m.y, n.x - m.x), M = Po(e.y - m.y, e.x - m.x); return w < M ? ((w > k || k > M) && (w += Do), w > M && (b = M, M = w, w = b)) : M < k && k < w ? (b = M, M = w, w = b) : M += Do, m.s = w, m.e = M, m.r = x, m }, numberSort: function (t, n) { return t - n } }; class Bo { constructor(t) { this.curves = [], this._3d = !1, t && (this.curves = t, this._3d = this.curves[0]._3d) } valueOf() { return this.toString() } toString() { return "[" + this.curves.map((function (t) { return qo.pointsToString(t.points) })).join(", ") + "]" } addCurve(t) { this.curves.push(t), this._3d = this._3d || t._3d } length() { return this.curves.map((function (t) { return t.length() })).reduce((function (t, n) { return t + n })) } curve(t) { return this.curves[t] } bbox() { const t = this.curves; for (var n = t[0].bbox(), e = 1; e < t.length; e++)qo.expandbox(n, t[e].bbox()); return n } offset(t) { const n = []; return this.curves.forEach((function (e) { n.push(...e.offset(t)) })), new Bo(n) } } const { abs: $o, min: Ho, max: Vo, cos: Go, sin: Xo, acos: Yo, sqrt: Wo } = Math, Zo = Math.PI; class Qo { constructor(t) { let n = t && t.forEach ? t : Array.from(arguments).slice(), e = !1; if ("object" == typeof n[0]) { e = n.length; const t = []; n.forEach((function (n) { ["x", "y", "z"].forEach((function (e) { void 0 !== n[e] && t.push(n[e]) })) })), n = t } let r = !1; const i = n.length; if (e) { if (e > 4) { if (1 !== arguments.length) throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves"); r = !0 } } else if (6 !== i && 8 !== i && 9 !== i && 12 !== i && 1 !== arguments.length) throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves"); const o = this._3d = !r && (9 === i || 12 === i) || t && t[0] && void 0 !== t[0].z, a = this.points = []; for (let t = 0, e = o ? 3 : 2; t < i; t += e) { var u = { x: n[t], y: n[t + 1] }; o && (u.z = n[t + 2]), a.push(u) } const s = this.order = a.length - 1, l = this.dims = ["x", "y"]; o && l.push("z"), this.dimlen = l.length; const c = qo.align(a, { p1: a[0], p2: a[s] }), h = qo.dist(a[0], a[s]); this._linear = c.reduce(((t, n) => t + $o(n.y)), 0) < h / 50, this._lut = [], this._t1 = 0, this._t2 = 1, this.update() } static quadraticFromPoints(t, n, e, r) { if (void 0 === r && (r = .5), 0 === r) return new Qo(n, n, e); if (1 === r) return new Qo(t, n, n); const i = Qo.getABC(2, t, n, e, r); return new Qo(t, i.A, e) } static cubicFromPoints(t, n, e, r, i) { void 0 === r && (r = .5); const o = Qo.getABC(3, t, n, e, r); void 0 === i && (i = qo.dist(n, o.C)); const a = i * (1 - r) / r, u = qo.dist(t, e), s = (e.x - t.x) / u, l = (e.y - t.y) / u, c = i * s, h = i * l, f = a * s, d = a * l, p = n.x - c, g = n.y - h, y = n.x + f, v = n.y + d, _ = o.A, m = _.x + (p - _.x) / (1 - r), x = _.y + (g - _.y) / (1 - r), b = _.x + (y - _.x) / r, w = _.y + (v - _.y) / r, k = { x: t.x + (m - t.x) / r, y: t.y + (x - t.y) / r }, M = { x: e.x + (b - e.x) / (1 - r), y: e.y + (w - e.y) / (1 - r) }; return new Qo(t, k, M, e) } static getUtils() { return qo } getUtils() { return Qo.getUtils() } static get PolyBezier() { return Bo } valueOf() { return this.toString() } toString() { return qo.pointsToString(this.points) } toSVG() { if (this._3d) return !1; const t = this.points, n = ["M", t[0].x, t[0].y, 2 === this.order ? "Q" : "C"]; for (let e = 1, r = t.length; e < r; e++)n.push(t[e].x), n.push(t[e].y); return n.join(" ") } setRatios(t) { if (t.length !== this.points.length) throw new Error("incorrect number of ratio values"); this.ratios = t, this._lut = [] } verify() { const t = this.coordDigest(); t !== this._print && (this._print = t, this.update()) } coordDigest() { return this.points.map((function (t, n) { return "" + n + t.x + t.y + (t.z ? t.z : 0) })).join("") } update() { this._lut = [], this.dpoints = qo.derive(this.points, this._3d), this.computedirection() } computedirection() { const t = this.points, n = qo.angle(t[0], t[this.order], t[1]); this.clockwise = n > 0 } length() { return qo.length(this.derivative.bind(this)) } static getABC(t = 2, n, e, r, i = .5) { const o = qo.projectionratio(i, t), a = 1 - o, u = { x: o * n.x + a * r.x, y: o * n.y + a * r.y }, s = qo.abcratio(i, t); return { A: { x: e.x + (e.x - u.x) / s, y: e.y + (e.y - u.y) / s }, B: e, C: u, S: n, E: r } } getABC(t, n) { n = n || this.get(t); let e = this.points[0], r = this.points[this.order]; return Qo.getABC(this.order, e, n, r, t) } getLUT(t) { if (this.verify(), t = t || 100, this._lut.length === t) return this._lut; this._lut = [], t++, this._lut = []; for (let n, e, r = 0; r < t; r++)e = r / (t - 1), n = this.compute(e), n.t = e, this._lut.push(n); return this._lut } on(n, e) { e = e || 5; const r = this.getLUT(), i = []; for (let t, o = 0, a = 0; o < r.length; o++)t = r[o], qo.dist(t, n) < e && (i.push(t), a += o / r.length); return !!i.length && (t /= i.length) } project(t) { const n = this.getLUT(), e = n.length - 1, r = qo.closest(n, t), i = r.mpos, o = (i - 1) / e, a = (i + 1) / e, u = .1 / e; let s, l = r.mdist, c = o, h = c; l += 1; for (let n; c < a + u; c += u)s = this.compute(c), n = qo.dist(t, s), n < l && (l = n, h = c); return h = h < 0 ? 0 : h > 1 ? 1 : h, s = this.compute(h), s.t = h, s.d = l, s } get(t) { return this.compute(t) } point(t) { return this.points[t] } compute(t) { return this.ratios ? qo.computeWithRatios(t, this.points, this.ratios, this._3d) : qo.compute(t, this.points, this._3d, this.ratios) } raise() { const t = this.points, n = [t[0]], e = t.length; for (let r, i, o = 1; o < e; o++)r = t[o], i = t[o - 1], n[o] = { x: (e - o) / e * r.x + o / e * i.x, y: (e - o) / e * r.y + o / e * i.y }; return n[e] = t[e - 1], new Qo(n) } derivative(t) { return qo.compute(t, this.dpoints[0], this._3d) } dderivative(t) { return qo.compute(t, this.dpoints[1], this._3d) } align() { let t = this.points; return new Qo(qo.align(t, { p1: t[0], p2: t[t.length - 1] })) } curvature(t) { return qo.curvature(t, this.dpoints[0], this.dpoints[1], this._3d) } inflections() { return qo.inflections(this.points) } normal(t) { return this._3d ? this.__normal3(t) : this.__normal2(t) } __normal2(t) { const n = this.derivative(t), e = Wo(n.x * n.x + n.y * n.y); return { t: t, x: -n.y / e, y: n.x / e } } __normal3(t) { const n = this.derivative(t), e = this.derivative(t + .01), r = Wo(n.x * n.x + n.y * n.y + n.z * n.z), i = Wo(e.x * e.x + e.y * e.y + e.z * e.z); n.x /= r, n.y /= r, n.z /= r, e.x /= i, e.y /= i, e.z /= i; const o = { x: e.y * n.z - e.z * n.y, y: e.z * n.x - e.x * n.z, z: e.x * n.y - e.y * n.x }, a = Wo(o.x * o.x + o.y * o.y + o.z * o.z); o.x /= a, o.y /= a, o.z /= a; const u = [o.x * o.x, o.x * o.y - o.z, o.x * o.z + o.y, o.x * o.y + o.z, o.y * o.y, o.y * o.z - o.x, o.x * o.z - o.y, o.y * o.z + o.x, o.z * o.z]; return { t: t, x: u[0] * n.x + u[1] * n.y + u[2] * n.z, y: u[3] * n.x + u[4] * n.y + u[5] * n.z, z: u[6] * n.x + u[7] * n.y + u[8] * n.z } } hull(t) { let n = this.points, e = [], r = [], i = 0; for (r[i++] = n[0], r[i++] = n[1], r[i++] = n[2], 3 === this.order && (r[i++] = n[3]); n.length > 1;) { e = []; for (let o, a = 0, u = n.length - 1; a < u; a++)o = qo.lerp(t, n[a], n[a + 1]), r[i++] = o, e.push(o); n = e } return r } split(t, n) { if (0 === t && n) return this.split(n).left; if (1 === n) return this.split(t).right; const e = this.hull(t), r = { left: 2 === this.order ? new Qo([e[0], e[3], e[5]]) : new Qo([e[0], e[4], e[7], e[9]]), right: 2 === this.order ? new Qo([e[5], e[4], e[2]]) : new Qo([e[9], e[8], e[6], e[3]]), span: e }; return r.left._t1 = qo.map(0, 0, 1, this._t1, this._t2), r.left._t2 = qo.map(t, 0, 1, this._t1, this._t2), r.right._t1 = qo.map(t, 0, 1, this._t1, this._t2), r.right._t2 = qo.map(1, 0, 1, this._t1, this._t2), n ? (n = qo.map(n, t, 1, 0, 1), r.right.split(n).left) : r } extrema() { const t = {}; let n = []; return this.dims.forEach(function (e) { let r = function (t) { return t[e] }, i = this.dpoints[0].map(r); t[e] = qo.droots(i), 3 === this.order && (i = this.dpoints[1].map(r), t[e] = t[e].concat(qo.droots(i))), t[e] = t[e].filter((function (t) { return t >= 0 && t <= 1 })), n = n.concat(t[e].sort(qo.numberSort)) }.bind(this)), t.values = n.sort(qo.numberSort).filter((function (t, e) { return n.indexOf(t) === e })), t } bbox() { const t = this.extrema(), n = {}; return this.dims.forEach(function (e) { n[e] = qo.getminmax(this, e, t[e]) }.bind(this)), n } overlaps(t) { const n = this.bbox(), e = t.bbox(); return qo.bboxoverlap(n, e) } offset(t, n) { if (void 0 !== n) { const e = this.get(t), r = this.normal(t), i = { c: e, n: r, x: e.x + r.x * n, y: e.y + r.y * n }; return this._3d && (i.z = e.z + r.z * n), i } if (this._linear) { const n = this.normal(0), e = this.points.map((function (e) { const r = { x: e.x + t * n.x, y: e.y + t * n.y }; return e.z && n.z && (r.z = e.z + t * n.z), r })); return [new Qo(e)] } return this.reduce().map((function (n) { return n._linear ? n.offset(t)[0] : n.scale(t) })) } simple() { if (3 === this.order) { const t = qo.angle(this.points[0], this.points[3], this.points[1]), n = qo.angle(this.points[0], this.points[3], this.points[2]); if (t > 0 && n < 0 || t < 0 && n > 0) return !1 } const t = this.normal(0), n = this.normal(1); let e = t.x * n.x + t.y * n.y; return this._3d && (e += t.z * n.z), $o(Yo(e)) < Zo / 3 } reduce() { let t, n, e = 0, r = 0, i = .01, o = [], a = [], u = this.extrema().values; for (-1 === u.indexOf(0) && (u = [0].concat(u)), -1 === u.indexOf(1) && u.push(1), e = u[0], t = 1; t < u.length; t++)r = u[t], n = this.split(e, r), n._t1 = e, n._t2 = r, o.push(n), e = r; return o.forEach((function (t) { for (e = 0, r = 0; r <= 1;)for (r = e + i; r <= 1.01; r += i)if (n = t.split(e, r), !n.simple()) { if (r -= i, $o(e - r) < i) return []; n = t.split(e, r), n._t1 = qo.map(e, 0, 1, t._t1, t._t2), n._t2 = qo.map(r, 0, 1, t._t1, t._t2), a.push(n), e = r; break } e < 1 && (n = t.split(e, 1), n._t1 = qo.map(e, 0, 1, t._t1, t._t2), n._t2 = t._t2, a.push(n)) })), a } translate(t, n, e) { e = "number" == typeof e ? e : n; const r = this.order; let i = this.points.map(((t, i) => (1 - i / r) * n + i / r * e)); return new Qo(this.points.map(((n, e) => ({ x: n.x + t.x * i[e], y: n.y + t.y * i[e] })))) } scale(t) { const n = this.order; let e = !1; if ("function" == typeof t && (e = t), e && 2 === n) return this.raise().scale(e); const r = this.clockwise, i = this.points; if (this._linear) return this.translate(this.normal(0), e ? e(0) : t, e ? e(1) : t); const o = e ? e(0) : t, a = e ? e(1) : t, u = [this.offset(0, 10), this.offset(1, 10)], s = [], l = qo.lli4(u[0], u[0].c, u[1], u[1].c); if (!l) throw new Error("cannot scale this curve. Try reducing it first."); return [0, 1].forEach((function (t) { const e = s[t * n] = qo.copy(i[t * n]); e.x += (t ? a : o) * u[t].n.x, e.y += (t ? a : o) * u[t].n.y })), e ? ([0, 1].forEach((function (o) { if (2 !== n || !o) { var a = i[o + 1], u = { x: a.x - l.x, y: a.y - l.y }, c = e ? e((o + 1) / n) : t; e && !r && (c = -c); var h = Wo(u.x * u.x + u.y * u.y); u.x /= h, u.y /= h, s[o + 1] = { x: a.x + c * u.x, y: a.y + c * u.y } } })), new Qo(s)) : ([0, 1].forEach((t => { if (2 === n && t) return; const e = s[t * n], r = this.derivative(t), o = { x: e.x + r.x, y: e.y + r.y }; s[t + 1] = qo.lli4(e, o, l, i[t + 1]) })), new Qo(s)) } outline(t, n, e, r) { if (n = void 0 === n ? t : n, this._linear) { const i = this.normal(0), o = this.points[0], a = this.points[this.points.length - 1]; let u, s, l; void 0 === e && (e = t, r = n), u = { x: o.x + i.x * t, y: o.y + i.y * t }, l = { x: a.x + i.x * e, y: a.y + i.y * e }, s = { x: (u.x + l.x) / 2, y: (u.y + l.y) / 2 }; const c = [u, s, l]; u = { x: o.x - i.x * n, y: o.y - i.y * n }, l = { x: a.x - i.x * r, y: a.y - i.y * r }, s = { x: (u.x + l.x) / 2, y: (u.y + l.y) / 2 }; const h = [l, s, u], f = qo.makeline(h[2], c[0]), d = qo.makeline(c[2], h[0]), p = [f, new Qo(c), d, new Qo(h)]; return new Bo(p) } const i = this.reduce(), o = i.length, a = []; let u, s = [], l = 0, c = this.length(); const h = void 0 !== e && void 0 !== r; function f(t, n, e, r, i) { return function (o) { const a = r / e, u = (r + i) / e, s = n - t; return qo.map(o, 0, 1, t + a * s, t + u * s) } } i.forEach((function (i) { const o = i.length(); h ? (a.push(i.scale(f(t, e, c, l, o))), s.push(i.scale(f(-n, -r, c, l, o)))) : (a.push(i.scale(t)), s.push(i.scale(-n))), l += o })), s = s.map((function (t) { return u = t.points, u[3] ? t.points = [u[3], u[2], u[1], u[0]] : t.points = [u[2], u[1], u[0]], t })).reverse(); const d = a[0].points[0], p = a[o - 1].points[a[o - 1].points.length - 1], g = s[o - 1].points[s[o - 1].points.length - 1], y = s[0].points[0], v = qo.makeline(g, d), _ = qo.makeline(p, y), m = [v].concat(a).concat([_]).concat(s); return new Bo(m) } outlineshapes(t, n, e) { n = n || t; const r = this.outline(t, n).curves, i = []; for (let t = 1, n = r.length; t < n / 2; t++) { const o = qo.makeshape(r[t], r[n - t], e); o.startcap.virtual = t > 1, o.endcap.virtual = t < n / 2 - 1, i.push(o) } return i } intersects(t, n) { return t ? t.p1 && t.p2 ? this.lineIntersects(t) : (t instanceof Qo && (t = t.reduce()), this.curveintersects(this.reduce(), t, n)) : this.selfintersects(n) } lineIntersects(t) { const n = Ho(t.p1.x, t.p2.x), e = Ho(t.p1.y, t.p2.y), r = Vo(t.p1.x, t.p2.x), i = Vo(t.p1.y, t.p2.y); return qo.roots(this.points, t).filter((t => { var o = this.get(t); return qo.between(o.x, n, r) && qo.between(o.y, e, i) })) } selfintersects(t) { const n = this.reduce(), e = n.length - 2, r = []; for (let i, o, a, u = 0; u < e; u++)o = n.slice(u, u + 1), a = n.slice(u + 2), i = this.curveintersects(o, a, t), r.push(...i); return r } curveintersects(t, n, e) { const r = []; t.forEach((function (t) { n.forEach((function (n) { t.overlaps(n) && r.push({ left: t, right: n }) })) })); let i = []; return r.forEach((function (t) { const n = qo.pairiteration(t.left, t.right, e); n.length > 0 && (i = i.concat(n)) })), i } arcs(t) { return t = t || .5, this._iterate(t, []) } _error(t, n, e, r) { const i = (r - e) / 4, o = this.get(e + i), a = this.get(r - i), u = qo.dist(t, n), s = qo.dist(t, o), l = qo.dist(t, a); return $o(s - u) + $o(l - u) } _iterate(t, n) { let e, r = 0, i = 1; do { e = 0, i = 1; let o, a, u, s, l, c = this.get(r), h = !1, f = !1, d = i, p = 1; do { if (f = h, s = u, d = (r + i) / 2, o = this.get(d), a = this.get(i), u = qo.getccenter(c, o, a), u.interval = { start: r, end: i }, h = this._error(u, c, r, i) <= t, l = f && !h, l || (p = i), h) { if (i >= 1) { if (u.interval.end = p = 1, s = u, i > 1) { let t = { x: u.x + u.r * Go(u.e), y: u.y + u.r * Xo(u.e) }; u.e += qo.angle({ x: u.x, y: u.y }, t, this.get(1)) } break } i += (i - r) / 2 } else i = d } while (!l && e++ < 100); if (e >= 100) break; s = s || u, n.push(s), r = p } while (i < 1); return n } } function Ko(t, n) { if (null == t) return {}; var e, r, i = function (t, n) { if (null == t) return {}; var e, r, i = {}, o = Object.keys(t); for (r = 0; r < o.length; r++)e = o[r], n.indexOf(e) >= 0 || (i[e] = t[e]); return i }(t, n); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(t); for (r = 0; r < o.length; r++)e = o[r], n.indexOf(e) >= 0 || Object.prototype.propertyIsEnumerable.call(t, e) && (i[e] = t[e]) } return i } function Jo(t, n) { return function (t) { if (Array.isArray(t)) return t }(t) || function (t, n) { var e = null == t ? null : "undefined" != typeof Symbol && t[Symbol.iterator] || t["@@iterator"]; if (null == e) return; var r, i, o = [], a = !0, u = !1; try { for (e = e.call(t); !(a = (r = e.next()).done) && (o.push(r.value), !n || o.length !== n); a = !0); } catch (t) { u = !0, i = t } finally { try { a || null == e.return || e.return() } finally { if (u) throw i } } return o }(t, n) || na(t, n) || function () { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") }() } function ta(t) { return function (t) { if (Array.isArray(t)) return ea(t) }(t) || function (t) { if ("undefined" != typeof Symbol && null != t[Symbol.iterator] || null != t["@@iterator"]) return Array.from(t) }(t) || na(t) || function () { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") }() } function na(t, n) { if (t) { if ("string" == typeof t) return ea(t, n); var e = Object.prototype.toString.call(t).slice(8, -1); return "Object" === e && t.constructor && (e = t.constructor.name), "Map" === e || "Set" === e ? Array.from(t) : "Arguments" === e || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e) ? ea(t, n) : void 0 } } function ea(t, n) { (null == n || n > t.length) && (n = t.length); for (var e = 0, r = new Array(n); e < n; e++)r[e] = t[e]; return r } function ra(t) { var n = function (t, n) { if ("object" != typeof t || null === t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var r = e.call(t, n || "default"); if ("object" != typeof r) return r; throw new TypeError("@@toPrimitive must return a primitive value.") } return ("string" === n ? String : Number)(t) }(t, "string"); return "symbol" == typeof n ? n : String(n) } function ia(t, n) { switch (arguments.length) { case 0: break; case 1: this.range(t); break; default: this.range(n).domain(t) }return this } const oa = Symbol("implicit"); var aa = function (t) { for (var n = t.length / 6 | 0, e = new Array(n), r = 0; r < n;)e[r] = "#" + t.slice(6 * r, 6 * ++r); return e }("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"), ua = function t() { var n = new sr, e = [], r = [], i = oa; function o(t) { let o = n.get(t); if (void 0 === o) { if (i !== oa) return i; n.set(t, o = e.push(t) - 1) } return r[o % r.length] } return o.domain = function (t) { if (!arguments.length) return e.slice(); e = [], n = new sr; for (const r of t) n.has(r) || n.set(r, e.push(r) - 1); return o }, o.range = function (t) { return arguments.length ? (r = Array.from(t), o) : r.slice() }, o.unknown = function (t) { return arguments.length ? (i = t, o) : i }, o.copy = function () { return t(e, r).unknown(i) }, ia.apply(o, arguments), o }(aa); function sa(t, n, e) { n && "string" == typeof e && t.filter((function (t) { return !t[e] })).forEach((function (t) { t[e] = ua(n(t)) })) } var la = function (t, n) { return n.onNeedsRedraw && n.onNeedsRedraw() }, ca = function (t, n) { if (!n.isShadow) { var e = ti(n.linkDirectionalParticles); n.graphData.links.forEach((function (t) { var n = Math.round(Math.abs(e(t))); n ? t.__photons = l(Array(n)).map((function () { return {} })) : delete t.__photons })) } }, ha = Jr({ props: { graphData: { default: { nodes: [], links: [] }, onChange: function (t, n) { n.engineRunning = !1, ca(0, n) } }, dagMode: { onChange: function (t, n) { !t && (n.graphData.nodes || []).forEach((function (t) { return t.fx = t.fy = void 0 })) } }, dagLevelDistance: {}, dagNodeFilter: { default: function (t) { return !0 } }, onDagError: { triggerUpdate: !1 }, nodeRelSize: { default: 4, triggerUpdate: !1, onChange: la }, nodeId: { default: "id" }, nodeVal: { default: "val", triggerUpdate: !1, onChange: la }, nodeColor: { default: "color", triggerUpdate: !1, onChange: la }, nodeAutoColorBy: {}, nodeCanvasObject: { triggerUpdate: !1, onChange: la }, nodeCanvasObjectMode: { default: function () { return "replace" }, triggerUpdate: !1, onChange: la }, nodeVisibility: { default: !0, triggerUpdate: !1, onChange: la }, linkSource: { default: "source" }, linkTarget: { default: "target" }, linkVisibility: { default: !0, triggerUpdate: !1, onChange: la }, linkColor: { default: "color", triggerUpdate: !1, onChange: la }, linkAutoColorBy: {}, linkLineDash: { triggerUpdate: !1, onChange: la }, linkWidth: { default: 1, triggerUpdate: !1, onChange: la }, linkCurvature: { default: 0, triggerUpdate: !1, onChange: la }, linkCanvasObject: { triggerUpdate: !1, onChange: la }, linkCanvasObjectMode: { default: function () { return "replace" }, triggerUpdate: !1, onChange: la }, linkDirectionalArrowLength: { default: 0, triggerUpdate: !1, onChange: la }, linkDirectionalArrowColor: { triggerUpdate: !1, onChange: la }, linkDirectionalArrowRelPos: { default: .5, triggerUpdate: !1, onChange: la }, linkDirectionalParticles: { default: 0, triggerUpdate: !1, onChange: ca }, linkDirectionalParticleSpeed: { default: .01, triggerUpdate: !1 }, linkDirectionalParticleWidth: { default: 4, triggerUpdate: !1 }, linkDirectionalParticleColor: { triggerUpdate: !1 }, globalScale: { default: 1, triggerUpdate: !1 }, d3AlphaMin: { default: 0, triggerUpdate: !1 }, d3AlphaDecay: { default: .0228, triggerUpdate: !1, onChange: function (t, n) { n.forceLayout.alphaDecay(t) } }, d3AlphaTarget: { default: 0, triggerUpdate: !1, onChange: function (t, n) { n.forceLayout.alphaTarget(t) } }, d3VelocityDecay: { default: .4, triggerUpdate: !1, onChange: function (t, n) { n.forceLayout.velocityDecay(t) } }, warmupTicks: { default: 0, triggerUpdate: !1 }, cooldownTicks: { default: 1 / 0, triggerUpdate: !1 }, cooldownTime: { default: 15e3, triggerUpdate: !1 }, onUpdate: { default: function () { }, triggerUpdate: !1 }, onFinishUpdate: { default: function () { }, triggerUpdate: !1 }, onEngineTick: { default: function () { }, triggerUpdate: !1 }, onEngineStop: { default: function () { }, triggerUpdate: !1 }, onNeedsRedraw: { triggerUpdate: !1 }, isShadow: { default: !1, triggerUpdate: !1 } }, methods: { d3Force: function (t, n, e) { return void 0 === e ? t.forceLayout.force(n) : (t.forceLayout.force(n, e), this) }, d3ReheatSimulation: function (t) { return t.forceLayout.alpha(1), this.resetCountdown(), this }, resetCountdown: function (t) { return t.cntTicks = 0, t.startTickTime = new Date, t.engineRunning = !0, this }, isEngineRunning: function (t) { return !!t.engineRunning }, tickFrame: function (t) { var n, e, r, i, o, a; return !t.isShadow && t.engineRunning && (++t.cntTicks > t.cooldownTicks || new Date - t.startTickTime > t.cooldownTime || t.d3AlphaMin > 0 && t.forceLayout.alpha() < t.d3AlphaMin ? (t.engineRunning = !1, t.onEngineStop()) : (t.forceLayout.tick(), t.onEngineTick())), function () { var n = ti(t.linkVisibility), e = ti(t.linkColor), r = ti(t.linkWidth), i = ti(t.linkLineDash), o = ti(t.linkCurvature), a = ti(t.linkCanvasObjectMode), u = t.ctx, c = 2 * t.isShadow, h = t.graphData.links.filter(n); h.forEach((function (t) { var n = o(t); if (!n) return void (t.__controlPoints = null); var e = t.source, r = t.target; if (!(e && r && e.hasOwnProperty("x") && r.hasOwnProperty("x"))) return; var i = Math.sqrt(Math.pow(r.x - e.x, 2) + Math.pow(r.y - e.y, 2)); if (i > 0) { var a = Math.atan2(r.y - e.y, r.x - e.x), u = i * n, s = { x: (e.x + r.x) / 2 + u * Math.cos(a - Math.PI / 2), y: (e.y + r.y) / 2 + u * Math.sin(a - Math.PI / 2) }; t.__controlPoints = [s.x, s.y] } else { var l = 70 * n; t.__controlPoints = [r.x, r.y - l, r.x + l, r.y] } })); var f = [], d = [], p = h; if (t.linkCanvasObject) { var g = [], y = []; h.forEach((function (t) { return ({ before: f, after: d, replace: g }[a(t)] || y).push(t) })), p = [].concat(l(f), d, y), f = f.concat(g) } u.save(), f.forEach((function (n) { return t.linkCanvasObject(n, u, t.globalScale) })), u.restore(); var v = function () { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [], n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [], e = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2], r = arguments.length > 3 && void 0 !== arguments[3] && arguments[3], i = (n instanceof Array ? n.length ? n : [void 0] : [n]).map((function (t) { return { keyAccessor: t, isProp: !(t instanceof Function) } })), o = t.reduce((function (t, n) { var r = t, o = n; return i.forEach((function (t, n) { var a, u = t.keyAccessor; if (t.isProp) { var s = o, l = s[u], c = Ko(s, [u].map(ra)); a = l, o = c } else a = u(o, n); n + 1 < i.length ? (r.hasOwnProperty(a) || (r[a] = {}), r = r[a]) : e ? (r.hasOwnProperty(a) || (r[a] = []), r[a].push(o)) : r[a] = o })), t }), {}); e instanceof Function && function t(n) { var r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1; r === i.length ? Object.keys(n).forEach((function (t) { return n[t] = e(n[t]) })) : Object.values(n).forEach((function (n) { return t(n, r + 1) })) }(o); var a = o; return r && (a = [], function t(n) { var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : []; e.length === i.length ? a.push({ keys: e, vals: n }) : Object.entries(n).forEach((function (n) { var r = Jo(n, 2), i = r[0], o = r[1]; return t(o, [].concat(ta(e), [i])) })) }(o), n instanceof Array && 0 === n.length && 1 === a.length && (a[0].keys = [])), a }(p, [e, r, i]); u.save(), Object.entries(v).forEach((function (n) { var e = s(n, 2), r = e[0], o = e[1], a = r && "undefined" !== r ? r : "rgba(0,0,0,0.15)"; Object.entries(o).forEach((function (n) { var e = s(n, 2), r = e[0], o = e[1], h = (r || 1) / t.globalScale + c; Object.entries(o).forEach((function (t) { var n = s(t, 2); n[0]; var e = n[1], r = i(e[0]); u.beginPath(), e.forEach((function (t) { var n = t.source, e = t.target; if (n && e && n.hasOwnProperty("x") && e.hasOwnProperty("x")) { u.moveTo(n.x, n.y); var r = t.__controlPoints; r ? u[2 === r.length ? "quadraticCurveTo" : "bezierCurveTo"].apply(u, l(r).concat([e.x, e.y])) : u.lineTo(e.x, e.y) } })), u.strokeStyle = a, u.lineWidth = h, u.setLineDash(r || []), u.stroke() })) })) })), u.restore(), u.save(), d.forEach((function (n) { return t.linkCanvasObject(n, u, t.globalScale) })), u.restore() }(), !t.isShadow && (n = ti(t.linkDirectionalArrowLength), e = ti(t.linkDirectionalArrowRelPos), r = ti(t.linkVisibility), i = ti(t.linkDirectionalArrowColor || t.linkColor), o = ti(t.nodeVal), (a = t.ctx).save(), t.graphData.links.filter(r).forEach((function (r) { var s = n(r); if (s && !(s < 0)) { var c = r.source, h = r.target; if (c && h && c.hasOwnProperty("x") && h.hasOwnProperty("x")) { var f = Math.sqrt(Math.max(0, o(c) || 1)) * t.nodeRelSize, d = Math.sqrt(Math.max(0, o(h) || 1)) * t.nodeRelSize, p = Math.min(1, Math.max(0, e(r))), g = i(r) || "rgba(0,0,0,0.28)", y = s / 1.6 / 2, v = r.__controlPoints && u(Qo, [c.x, c.y].concat(l(r.__controlPoints), [h.x, h.y])), _ = v ? function (t) { return v.get(t) } : function (t) { return { x: c.x + (h.x - c.x) * t || 0, y: c.y + (h.y - c.y) * t || 0 } }, m = v ? v.length() : Math.sqrt(Math.pow(h.x - c.x, 2) + Math.pow(h.y - c.y, 2)), x = f + s + (m - f - d - s) * p, b = _(x / m), w = _((x - s) / m), k = _((x - .8 * s) / m), M = Math.atan2(b.y - w.y, b.x - w.x) - Math.PI / 2; a.beginPath(), a.moveTo(b.x, b.y), a.lineTo(w.x + y * Math.cos(M), w.y + y * Math.sin(M)), a.lineTo(k.x, k.y), a.lineTo(w.x - y * Math.cos(M), w.y - y * Math.sin(M)), a.fillStyle = g, a.fill() } } })), a.restore()), !t.isShadow && function () { var n = ti(t.linkDirectionalParticles), e = ti(t.linkDirectionalParticleSpeed), r = ti(t.linkDirectionalParticleWidth), i = ti(t.linkVisibility), o = ti(t.linkDirectionalParticleColor || t.linkColor), a = t.ctx; a.save(), t.graphData.links.filter(i).forEach((function (i) { var s = n(i); if (i.hasOwnProperty("__photons") && i.__photons.length) { var c = i.source, h = i.target; if (c && h && c.hasOwnProperty("x") && h.hasOwnProperty("x")) { var f = e(i), d = i.__photons || [], p = Math.max(0, r(i) / 2) / Math.sqrt(t.globalScale), g = o(i) || "rgba(0,0,0,0.28)"; a.fillStyle = g; var y = i.__controlPoints ? u(Qo, [c.x, c.y].concat(l(i.__controlPoints), [h.x, h.y])) : null, v = 0, _ = !1; d.forEach((function (t) { var n = !!t.__singleHop; if (t.hasOwnProperty("__progressRatio") || (t.__progressRatio = n ? 0 : v / s), !n && v++, t.__progressRatio += f, t.__progressRatio >= 1) { if (n) return void (_ = !0); t.__progressRatio = t.__progressRatio % 1 } var e = t.__progressRatio, r = y ? y.get(e) : { x: c.x + (h.x - c.x) * e || 0, y: c.y + (h.y - c.y) * e || 0 }; a.beginPath(), a.arc(r.x, r.y, p, 0, 2 * Math.PI, !1), a.fill() })), _ && (i.__photons = i.__photons.filter((function (t) { return !t.__singleHop || t.__progressRatio <= 1 }))) } } })), a.restore() }(), function () { var n = ti(t.nodeVisibility), e = ti(t.nodeVal), r = ti(t.nodeColor), i = ti(t.nodeCanvasObjectMode), o = t.ctx, a = t.isShadow / t.globalScale, u = t.graphData.nodes.filter(n); o.save(), u.forEach((function (n) { var u = i(n); if (!t.nodeCanvasObject || "before" !== u && "replace" !== u || (t.nodeCanvasObject(n, o, t.globalScale), "replace" !== u)) { var s = Math.sqrt(Math.max(0, e(n) || 1)) * t.nodeRelSize + a; o.beginPath(), o.arc(n.x, n.y, s, 0, 2 * Math.PI, !1), o.fillStyle = r(n) || "rgba(31, 120, 180, 0.92)", o.fill(), t.nodeCanvasObject && "after" === u && t.nodeCanvasObject(n, t.ctx, t.globalScale) } else o.restore() })), o.restore() }(), this }, emitParticle: function (t, n) { return n && (!n.__photons && (n.__photons = []), n.__photons.push({ __singleHop: !0 })), this } }, stateInit: function () { return { forceLayout: zo().force("link", _o()).force("charge", Ao()).force("center", Bi()).force("dagRadial", null).stop(), engineRunning: !1 } }, init: function (t, n) { n.ctx = t }, update: function (t) { t.engineRunning = !1, t.onUpdate(), null !== t.nodeAutoColorBy && sa(t.graphData.nodes, ti(t.nodeAutoColorBy), t.nodeColor), null !== t.linkAutoColorBy && sa(t.graphData.links, ti(t.linkAutoColorBy), t.linkColor), t.graphData.links.forEach((function (n) { n.source = n[t.linkSource], n.target = n[t.linkTarget] })), t.forceLayout.stop().alpha(1).nodes(t.graphData.nodes); var n = t.forceLayout.force("link"); n && n.id((function (n) { return n[t.nodeId] })).links(t.graphData.links); var e = t.dagMode && function (t, n) { var e = t.nodes, o = t.links, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}, u = a.nodeFilter, c = void 0 === u ? function () { return !0 } : u, h = a.onLoopError, f = void 0 === h ? function (t) { throw "Invalid DAG structure! Found cycle in node path: ".concat(t.join(" -> "), ".") } : h, d = {}; e.forEach((function (t) { return d[n(t)] = { data: t, out: [], depth: -1, skip: !c(t) } })), o.forEach((function (t) { var e = t.source, i = t.target, o = l(e), a = l(i); if (!d.hasOwnProperty(o)) throw "Missing source node with id: ".concat(o); if (!d.hasOwnProperty(a)) throw "Missing target node with id: ".concat(a); var u = d[o], s = d[a]; function l(t) { return "object" === r(t) ? n(t) : t } u.out.push(s) })); var p = []; y(Object.values(d)); var g = Object.assign.apply(Object, [{}].concat(l(Object.entries(d).filter((function (t) { return !s(t, 2)[1].skip })).map((function (t) { var n = s(t, 2); return i({}, n[0], n[1].depth) }))))); return g; function y(t) { for (var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [], r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0, i = function () { var i = t[o]; if (-1 !== e.indexOf(i)) { var a = [].concat(l(e.slice(e.indexOf(i))), [i]).map((function (t) { return n(t.data) })); return p.some((function (t) { return t.length === a.length && t.every((function (t, n) { return t === a[n] })) })) || (p.push(a), f(a)), "continue" } r > i.depth && (i.depth = r, y(i.out, [].concat(l(e), [i]), r + (i.skip ? 0 : 1))) }, o = 0, a = t.length; o < a; o++)i() } }(t.graphData, (function (n) { return n[t.nodeId] }), { nodeFilter: t.dagNodeFilter, onLoopError: t.onDagError || void 0 }), o = Math.max.apply(Math, l(Object.values(e || []))), a = t.dagLevelDistance || t.graphData.nodes.length / (o || 1) * 2 * (-1 !== ["radialin", "radialout"].indexOf(t.dagMode) ? .7 : 1); if (t.dagMode) { var u = function (n, r) { return function (i) { return n ? (e[i[t.nodeId]] - o / 2) * a * (r ? -1 : 1) : void 0 } }, c = u(-1 !== ["lr", "rl"].indexOf(t.dagMode), "rl" === t.dagMode), h = u(-1 !== ["td", "bu"].indexOf(t.dagMode), "bu" === t.dagMode); t.graphData.nodes.filter(t.dagNodeFilter).forEach((function (t) { t.fx = c(t), t.fy = h(t) })) } t.forceLayout.force("dagRadial", -1 !== ["radialin", "radialout"].indexOf(t.dagMode) ? function (t, n, e, r) { var i, o, a, u, s = po(.1); function l(t) { for (var s = 0, l = i.length; s < l; ++s) { var c = i[s], h = c.x - n || 1e-6, f = (c.y || 0) - e || 1e-6, d = (c.z || 0) - r || 1e-6, p = Math.sqrt(h * h + f * f + d * d), g = (u[s] - p) * a[s] * t / p; c.vx += h * g, o > 1 && (c.vy += f * g), o > 2 && (c.vz += d * g) } } function c() { if (i) { var n, e = i.length; for (a = new Array(e), u = new Array(e), n = 0; n < e; ++n)u[n] = +t(i[n], n, i), a[n] = isNaN(u[n]) ? 0 : +s(i[n], n, i) } } return "function" != typeof t && (t = po(+t)), null == n && (n = 0), null == e && (e = 0), null == r && (r = 0), l.initialize = function (t, ...n) { i = t, o = n.find((t => [1, 2, 3].includes(t))) || 2, c() }, l.strength = function (t) { return arguments.length ? (s = "function" == typeof t ? t : po(+t), c(), l) : s }, l.radius = function (n) { return arguments.length ? (t = "function" == typeof n ? n : po(+n), c(), l) : t }, l.x = function (t) { return arguments.length ? (n = +t, l) : n }, l.y = function (t) { return arguments.length ? (e = +t, l) : e }, l.z = function (t) { return arguments.length ? (r = +t, l) : r }, l }((function (n) { var r = e[n[t.nodeId]] || -1; return ("radialin" === t.dagMode ? o - r : r) * a })).strength((function (n) { return t.dagNodeFilter(n) ? 1 : 0 })) : null); for (var f = 0; f < t.warmupTicks && !(t.d3AlphaMin > 0 && t.forceLayout.alpha() < t.d3AlphaMin); f++)t.forceLayout.tick(); this.resetCountdown(), t.onFinishUpdate() } }); function fa(t, n) { var e = t instanceof Array ? t : [t], r = new n; return { linkProp: function (t) { return { default: r[t](), onChange: function (n, r) { e.forEach((function (e) { return r[e][t](n) })) }, triggerUpdate: !1 } }, linkMethod: function (t) { return function (n) { for (var r = arguments.length, i = new Array(r > 1 ? r - 1 : 0), o = 1; o < r; o++)i[o - 1] = arguments[o]; var a = []; return e.forEach((function (e) { var r = n[e], o = r[t].apply(r, i); o !== r && a.push(o) })), a.length ? a[0] : this } } } } var da = fa("forceGraph", ha), pa = fa(["forceGraph", "shadowGraph"], ha), ga = Object.assign.apply(Object, l(["nodeColor", "nodeAutoColorBy", "nodeCanvasObject", "nodeCanvasObjectMode", "linkColor", "linkAutoColorBy", "linkLineDash", "linkWidth", "linkCanvasObject", "linkCanvasObjectMode", "linkDirectionalArrowLength", "linkDirectionalArrowColor", "linkDirectionalArrowRelPos", "linkDirectionalParticles", "linkDirectionalParticleSpeed", "linkDirectionalParticleWidth", "linkDirectionalParticleColor", "dagMode", "dagLevelDistance", "dagNodeFilter", "onDagError", "d3AlphaMin", "d3AlphaDecay", "d3VelocityDecay", "warmupTicks", "cooldownTicks", "cooldownTime", "onEngineTick", "onEngineStop"].map((function (t) { return i({}, t, da.linkProp(t)) }))).concat(l(["nodeRelSize", "nodeId", "nodeVal", "nodeVisibility", "linkSource", "linkTarget", "linkVisibility", "linkCurvature"].map((function (t) { return i({}, t, pa.linkProp(t)) }))))), ya = Object.assign.apply(Object, l(["d3Force", "d3ReheatSimulation", "emitParticle"].map((function (t) { return i({}, t, da.linkMethod(t)) })))); function va(t) { if (t.canvas) { var n = t.canvas.width, e = t.canvas.height; 300 === n && 150 === e && (n = e = 0); var r = window.devicePixelRatio; n /= r, e /= r, [t.canvas, t.shadowCanvas].forEach((function (i) { i.style.width = "".concat(t.width, "px"), i.style.height = "".concat(t.height, "px"), i.width = t.width * r, i.height = t.height * r, n || e || i.getContext("2d").scale(r, r) })); var i = Ke(t.canvas).k; t.zoom.translateBy(t.zoom.__baseElem, (t.width - n) / 2 / i, (t.height - e) / 2 / i), t.needsRedraw = !0 } } function _a(t) { var n = window.devicePixelRatio; t.setTransform(n, 0, 0, n, 0, 0) } function ma(t, n, e) { t.save(), _a(t), t.clearRect(0, 0, n, e), t.restore() } var xa = Jr({ props: e({ width: { default: window.innerWidth, onChange: function (t, n) { return va(n) }, triggerUpdate: !1 }, height: { default: window.innerHeight, onChange: function (t, n) { return va(n) }, triggerUpdate: !1 }, graphData: { default: { nodes: [], links: [] }, onChange: function (t, n) { [{ type: "Node", objs: t.nodes }, { type: "Link", objs: t.links }].forEach((function (t) { var e = t.type; t.objs.filter((function (t) { if (!t.hasOwnProperty("__indexColor")) return !0; var e = n.colorTracker.lookup(t.__indexColor); return !e || !e.hasOwnProperty("d") || e.d !== t })).forEach((function (t) { t.__indexColor = n.colorTracker.register({ type: e, d: t }) })) })), n.forceGraph.graphData(t), n.shadowGraph.graphData(t) }, triggerUpdate: !1 }, backgroundColor: { onChange: function (t, n) { n.canvas && t && (n.canvas.style.background = t) }, triggerUpdate: !1 }, nodeLabel: { default: "name", triggerUpdate: !1 }, nodePointerAreaPaint: { onChange: function (t, n) { n.shadowGraph.nodeCanvasObject(t ? function (n, e, r) { return t(n, n.__indexColor, e, r) } : null), n.flushShadowCanvas && n.flushShadowCanvas() }, triggerUpdate: !1 }, linkPointerAreaPaint: { onChange: function (t, n) { n.shadowGraph.linkCanvasObject(t ? function (n, e, r) { return t(n, n.__indexColor, e, r) } : null), n.flushShadowCanvas && n.flushShadowCanvas() }, triggerUpdate: !1 }, linkLabel: { default: "name", triggerUpdate: !1 }, linkHoverPrecision: { default: 4, triggerUpdate: !1 }, minZoom: { default: .01, onChange: function (t, n) { n.zoom.scaleExtent([t, n.zoom.scaleExtent()[1]]) }, triggerUpdate: !1 }, maxZoom: { default: 1e3, onChange: function (t, n) { n.zoom.scaleExtent([n.zoom.scaleExtent()[0], t]) }, triggerUpdate: !1 }, enableNodeDrag: { default: !0, triggerUpdate: !1 }, enableZoomInteraction: { default: !0, triggerUpdate: !1 }, enablePanInteraction: { default: !0, triggerUpdate: !1 }, enableZoomPanInteraction: { default: !0, triggerUpdate: !1 }, enablePointerInteraction: { default: !0, onChange: function (t, n) { n.hoverObj = null }, triggerUpdate: !1 }, autoPauseRedraw: { default: !0, triggerUpdate: !1 }, onNodeDrag: { default: function () { }, triggerUpdate: !1 }, onNodeDragEnd: { default: function () { }, triggerUpdate: !1 }, onNodeClick: { triggerUpdate: !1 }, onNodeRightClick: { triggerUpdate: !1 }, onNodeHover: { triggerUpdate: !1 }, onLinkClick: { triggerUpdate: !1 }, onLinkRightClick: { triggerUpdate: !1 }, onLinkHover: { triggerUpdate: !1 }, onBackgroundClick: { triggerUpdate: !1 }, onBackgroundRightClick: { triggerUpdate: !1 }, onZoom: { triggerUpdate: !1 }, onZoomEnd: { triggerUpdate: !1 }, onRenderFramePre: { triggerUpdate: !1 }, onRenderFramePost: { triggerUpdate: !1 } }, ga), aliases: { stopAnimation: "pauseAnimation" }, methods: e({ graph2ScreenCoords: function (t, n, e) { var r = Ke(t.canvas); return { x: n * r.k + r.x, y: e * r.k + r.y } }, screen2GraphCoords: function (t, n, e) { var r = Ke(t.canvas); return { x: (n - r.x) / r.k, y: (e - r.y) / r.k } }, centerAt: function (t, n, e, r) { if (!t.canvas) return null; if (void 0 !== n || void 0 !== e) { var i = Object.assign({}, void 0 !== n ? { x: n } : {}, void 0 !== e ? { y: e } : {}); return r ? new Vr.Tween(o()).to(i, r).easing(Vr.Easing.Quadratic.Out).onUpdate(a).start() : a(i), this } return o(); function o() { var n = Ke(t.canvas); return { x: (t.width / 2 - n.x) / n.k, y: (t.height / 2 - n.y) / n.k } } function a(n) { var e = n.x, r = n.y; t.zoom.translateTo(t.zoom.__baseElem, void 0 === e ? o().x : e, void 0 === r ? o().y : r), t.needsRedraw = !0 } }, zoom: function (t, n, e) { return t.canvas ? void 0 !== n ? (e ? new Vr.Tween({ k: r() }).to({ k: n }, e).easing(Vr.Easing.Quadratic.Out).onUpdate((function (t) { return i(t.k) })).start() : i(n), this) : r() : null; function r() { return Ke(t.canvas).k } function i(n) { t.zoom.scaleTo(t.zoom.__baseElem, n), t.needsRedraw = !0 } }, zoomToFit: function (t) { for (var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, e = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 10, r = arguments.length, i = new Array(r > 3 ? r - 3 : 0), o = 3; o < r; o++)i[o - 3] = arguments[o]; var a = this.getGraphBbox.apply(this, i); if (a) { var u = { x: (a.x[0] + a.x[1]) / 2, y: (a.y[0] + a.y[1]) / 2 }, s = Math.max(1e-12, Math.min(1e12, (t.width - 2 * e) / (a.x[1] - a.x[0]), (t.height - 2 * e) / (a.y[1] - a.y[0]))); this.centerAt(u.x, u.y, n), this.zoom(s, n) } return this }, getGraphBbox: function (t) { var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : function () { return !0 }, e = ti(t.nodeVal), r = function (n) { return Math.sqrt(Math.max(0, e(n) || 1)) * t.nodeRelSize }, i = t.graphData.nodes.filter(n).map((function (t) { return { x: t.x, y: t.y, r: r(t) } })); return i.length ? { x: [fr(i, (function (t) { return t.x - t.r })), hr(i, (function (t) { return t.x + t.r }))], y: [fr(i, (function (t) { return t.y - t.r })), hr(i, (function (t) { return t.y + t.r }))] } : null }, pauseAnimation: function (t) { return t.animationFrameRequestId && (cancelAnimationFrame(t.animationFrameRequestId), t.animationFrameRequestId = null), this }, resumeAnimation: function (t) { return t.animationFrameRequestId || this._animationCycle(), this }, _destructor: function () { this.pauseAnimation(), this.graphData({ nodes: [], links: [] }) } }, ya), stateInit: function () { return { lastSetZoom: 1, zoom: ur(), forceGraph: new ha, shadowGraph: (new ha).cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0), colorTracker: new qi } }, init: function (t, n) { var r = this; t.innerHTML = ""; var i = document.createElement("div"); i.classList.add("force-graph-container"), i.style.position = "relative", t.appendChild(i), n.canvas = document.createElement("canvas"), n.backgroundColor && (n.canvas.style.background = n.backgroundColor), i.appendChild(n.canvas), n.shadowCanvas = document.createElement("canvas"); var o = n.canvas.getContext("2d"), a = n.shadowCanvas.getContext("2d", { willReadFrequently: !0 }), u = { x: -1e12, y: -1e12 }, s = function () { var t = null, e = window.devicePixelRatio, r = u.x > 0 && u.y > 0 ? a.getImageData(u.x * e, u.y * e, 1, 1) : null; return r && (t = n.colorTracker.lookup(r.data)), t }; At(n.canvas).call(function () { var t, n, e, r, i = Bt, o = $t, a = Ht, u = Vt, s = {}, l = Et("start", "drag", "end"), c = 0, h = 0; function f(t) { t.on("mousedown.drag", d).filter(u).on("touchstart.drag", y).on("touchmove.drag", v, jt).on("touchend.drag touchcancel.drag", _).style("touch-action", "none").style("-webkit-tap-highlight-color", "rgba(0,0,0,0)") } function d(a, u) { if (!r && i.call(this, a, u)) { var s = m(this, o.call(this, a, u), a, u, "mouse"); s && (At(a.view).on("mousemove.drag", p, Rt).on("mouseup.drag", g, Rt), Ut(a.view), Dt(a), e = !1, t = a.clientX, n = a.clientY, s("start", a)) } } function p(r) { if (It(r), !e) { var i = r.clientX - t, o = r.clientY - n; e = i * i + o * o > h } s.mouse("drag", r) } function g(t) { At(t.view).on("mousemove.drag mouseup.drag", null), Ft(t.view, e), It(t), s.mouse("end", t) } function y(t, n) { if (i.call(this, t, n)) { var e, r, a = t.changedTouches, u = o.call(this, t, n), s = a.length; for (e = 0; e < s; ++e)(r = m(this, u, t, n, a[e].identifier, a[e])) && (Dt(t), r("start", t, a[e])) } } function v(t) { var n, e, r = t.changedTouches, i = r.length; for (n = 0; n < i; ++n)(e = s[r[n].identifier]) && (It(t), e("drag", t, r[n])) } function _(t) { var n, e, i = t.changedTouches, o = i.length; for (r && clearTimeout(r), r = setTimeout((function () { r = null }), 500), n = 0; n < o; ++n)(e = s[i[n].identifier]) && (Dt(t), e("end", t, i[n])) } function m(t, n, e, r, i, o) { var u, h, d, p = l.copy(), g = St(o || e, n); if (null != (d = a.call(t, new qt("beforestart", { sourceEvent: e, target: f, identifier: i, active: c, x: g[0], y: g[1], dx: 0, dy: 0, dispatch: p }), r))) return u = d.x - g[0] || 0, h = d.y - g[1] || 0, function e(o, a, l) { var y, v = g; switch (o) { case "start": s[i] = e, y = c++; break; case "end": delete s[i], --c; case "drag": g = St(l || a, n), y = c }p.call(o, t, new qt(o, { sourceEvent: a, subject: d, target: f, identifier: i, active: y, x: g[0] + u, y: g[1] + h, dx: g[0] - v[0], dy: g[1] - v[1], dispatch: p }), r) } } return f.filter = function (t) { return arguments.length ? (i = "function" == typeof t ? t : Lt(!!t), f) : i }, f.container = function (t) { return arguments.length ? (o = "function" == typeof t ? t : Lt(t), f) : o }, f.subject = function (t) { return arguments.length ? (a = "function" == typeof t ? t : Lt(t), f) : a }, f.touchable = function (t) { return arguments.length ? (u = "function" == typeof t ? t : Lt(!!t), f) : u }, f.on = function () { var t = l.on.apply(l, arguments); return t === l ? f : t }, f.clickDistance = function (t) { return arguments.length ? (h = (t = +t) * t, f) : Math.sqrt(h) }, f }().subject((function () { if (!n.enableNodeDrag) return null; var t = s(); return t && "Node" === t.type ? t.d : null })).on("start", (function (t) { var e = t.subject; e.__initialDragPos = { x: e.x, y: e.y, fx: e.fx, fy: e.fy }, t.active || (e.fx = e.x, e.fy = e.y), n.canvas.classList.add("grabbable") })).on("drag", (function (t) { var e = t.subject, r = e.__initialDragPos, i = t, o = Ke(n.canvas).k, a = { x: r.x + (i.x - r.x) / o - e.x, y: r.y + (i.y - r.y) / o - e.y };["x", "y"].forEach((function (t) { return e["f".concat(t)] = e[t] = r[t] + (i[t] - r[t]) / o })), n.forceGraph.d3AlphaTarget(.3).resetCountdown(), n.isPointerDragging = !0, e.__dragged = !0, n.onNodeDrag(e, a) })).on("end", (function (t) { var e = t.subject, r = e.__initialDragPos, i = { x: e.x - r.x, y: e.y - r.y }; void 0 === r.fx && (e.fx = void 0), void 0 === r.fy && (e.fy = void 0), delete e.__initialDragPos, n.forceGraph.d3AlphaTarget() && n.forceGraph.d3AlphaTarget(0).resetCountdown(), n.canvas.classList.remove("grabbable"), n.isPointerDragging = !1, e.__dragged && (delete e.__dragged, n.onNodeDragEnd(e, i)) }))), n.zoom(n.zoom.__baseElem = At(n.canvas)), n.zoom.__baseElem.on("dblclick.zoom", null), n.zoom.filter((function (t) { return !t.button && n.enableZoomPanInteraction && (n.enableZoomInteraction || "wheel" !== t.type) && (n.enablePanInteraction || "wheel" === t.type) })).on("zoom", (function (t) { var i = t.transform;[o, a].forEach((function (t) { _a(t), t.translate(i.x, i.y), t.scale(i.k, i.k) })), n.onZoom && n.onZoom(e(e({}, i), r.centerAt())), n.needsRedraw = !0 })).on("end", (function (t) { return n.onZoomEnd && n.onZoomEnd(e(e({}, t.transform), r.centerAt())) })), va(n), n.forceGraph.onNeedsRedraw((function () { return n.needsRedraw = !0 })).onFinishUpdate((function () { Ke(n.canvas).k === n.lastSetZoom && n.graphData.nodes.length && (n.zoom.scaleTo(n.zoom.__baseElem, n.lastSetZoom = 4 / Math.cbrt(n.graphData.nodes.length)), n.needsRedraw = !0) })); var l = document.createElement("div"); l.classList.add("graph-tooltip"), i.appendChild(l), ["pointermove", "pointerdown"].forEach((function (t) { return i.addEventListener(t, (function (e) { "pointerdown" === t && (n.isPointerPressed = !0, n.pointerDownEvent = e), !n.isPointerDragging && "pointermove" === e.type && n.onBackgroundClick && (e.pressure > 0 || n.isPointerPressed) && ("touch" !== e.pointerType || void 0 === e.movementX || [e.movementX, e.movementY].some((function (t) { return Math.abs(t) > 1 }))) && (n.isPointerDragging = !0); var r, o, a, s = (r = i.getBoundingClientRect(), o = window.pageXOffset || document.documentElement.scrollLeft, a = window.pageYOffset || document.documentElement.scrollTop, { top: r.top + a, left: r.left + o }); u.x = e.pageX - s.left, u.y = e.pageY - s.top, l.style.top = "".concat(u.y, "px"), l.style.left = "".concat(u.x, "px"), l.style.transform = "translate(-".concat(u.x / n.width * 100, "%, ").concat(n.height - u.y < 100 ? "calc(-100% - 8px)" : "21px", ")") }), { passive: !0 }) })), i.addEventListener("pointerup", (function (t) { if (n.isPointerPressed = !1, n.isPointerDragging) n.isPointerDragging = !1; else { var e = [t, n.pointerDownEvent]; requestAnimationFrame((function () { if (0 === t.button) if (n.hoverObj) { var r = n["on".concat(n.hoverObj.type, "Click")]; r && r.apply(void 0, [n.hoverObj.d].concat(e)) } else n.onBackgroundClick && n.onBackgroundClick.apply(n, e); if (2 === t.button) if (n.hoverObj) { var i = n["on".concat(n.hoverObj.type, "RightClick")]; i && i.apply(void 0, [n.hoverObj.d].concat(e)) } else n.onBackgroundRightClick && n.onBackgroundRightClick.apply(n, e) })) } }), { passive: !0 }), i.addEventListener("contextmenu", (function (t) { return !(n.onBackgroundRightClick || n.onNodeRightClick || n.onLinkRightClick) || (t.preventDefault(), !1) })), n.forceGraph(o), n.shadowGraph(a); var c = Nr((function () { ma(a, n.width, n.height), n.shadowGraph.linkWidth((function (t) { return ti(n.linkWidth)(t) + n.linkHoverPrecision })); var t = Ke(n.canvas); n.shadowGraph.globalScale(t.k).tickFrame() }), 800); n.flushShadowCanvas = c.flush, (this._animationCycle = function t() { var e = !n.autoPauseRedraw || !!n.needsRedraw || n.forceGraph.isEngineRunning() || n.graphData.links.some((function (t) { return t.__photons && t.__photons.length })); if (n.needsRedraw = !1, n.enablePointerInteraction) { var r = n.isPointerDragging ? null : s(); if (r !== n.hoverObj) { var i = n.hoverObj, a = i ? i.type : null, u = r ? r.type : null; if (a && a !== u) { var h = n["on".concat(a, "Hover")]; h && h(null, i.d) } if (u) { var f = n["on".concat(u, "Hover")]; f && f(r.d, a === u ? i.d : null) } var d = r && ti(n["".concat(r.type.toLowerCase(), "Label")])(r.d) || ""; l.style.visibility = d ? "visible" : "hidden", l.innerHTML = d, n.canvas.classList[r && n["on".concat(u, "Click")] || !r && n.onBackgroundClick ? "add" : "remove"]("clickable"), n.hoverObj = r } e && c() } if (e) { ma(o, n.width, n.height); var p = Ke(n.canvas).k; n.onRenderFramePre && n.onRenderFramePre(o, p), n.forceGraph.globalScale(p).tickFrame(), n.onRenderFramePost && n.onRenderFramePost(o, p) } Vr.update(), n.animationFrameRequestId = requestAnimationFrame(t) })() }, update: function (t) { } }); return xa
}));